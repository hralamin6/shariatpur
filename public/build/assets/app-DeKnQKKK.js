function On(e){"@babel/helpers - typeof";return On=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},On(e)}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ml(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Mt(e,t,n){return t&&Ml(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qn(){return qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qn.apply(this,arguments)}function Yt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kr(e,t)}function yi(e){return yi=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},yi(e)}function kr(e,t){return kr=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},kr(e,t)}function Pl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rl(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wl(e)}function Jt(e){var t=Pl();return function(){var i=yi(e),r;if(t){var s=yi(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Rl(this,r)}}var qr=function(){function e(){Lt(this,e)}return Mt(e,[{key:"listenForWhisper",value:function(n,i){return this.listen(".client-"+n,i)}},{key:"notification",value:function(n){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",n)}},{key:"stopListeningForWhisper",value:function(n,i){return this.stopListening(".client-"+n,i)}}]),e}(),ho=function(){function e(t){Lt(this,e),this.namespace=t}return Mt(e,[{key:"format",value:function(n){return[".","\\"].includes(n.charAt(0))?n.substring(1):(this.namespace&&(n=this.namespace+"."+n),n.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(n){this.namespace=n}}]),e}();function Dl(e){try{new e}catch(t){if(t.message.includes("is not a constructor"))return!1}return!0}var $r=function(e){Yt(n,e);var t=Jt(n);function n(i,r,s){var o;return Lt(this,n),o=t.call(this),o.name=r,o.pusher=i,o.options=s,o.eventFormatter=new ho(o.options.namespace),o.subscribe(),o}return Mt(n,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(r,s){return this.on(this.eventFormatter.format(r),s),this}},{key:"listenToAll",value:function(r){var s=this;return this.subscription.bind_global(function(o,c){if(!o.startsWith("pusher:")){var l=s.options.namespace.replace(/\./g,"\\"),m=o.startsWith(l)?o.substring(l.length+1):"."+o;r(m,c)}}),this}},{key:"stopListening",value:function(r,s){return s?this.subscription.unbind(this.eventFormatter.format(r),s):this.subscription.unbind(this.eventFormatter.format(r)),this}},{key:"stopListeningToAll",value:function(r){return r?this.subscription.unbind_global(r):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(r){return this.on("pusher:subscription_succeeded",function(){r()}),this}},{key:"error",value:function(r){return this.on("pusher:subscription_error",function(s){r(s)}),this}},{key:"on",value:function(r,s){return this.subscription.bind(r,s),this}}]),n}(qr),fo=function(e){Yt(n,e);var t=Jt(n);function n(){return Lt(this,n),t.apply(this,arguments)}return Mt(n,[{key:"whisper",value:function(r,s){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),s),this}}]),n}($r),Il=function(e){Yt(n,e);var t=Jt(n);function n(){return Lt(this,n),t.apply(this,arguments)}return Mt(n,[{key:"whisper",value:function(r,s){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),s),this}}]),n}($r),Ol=function(e){Yt(n,e);var t=Jt(n);function n(){return Lt(this,n),t.apply(this,arguments)}return Mt(n,[{key:"here",value:function(r){return this.on("pusher:subscription_succeeded",function(s){r(Object.keys(s.members).map(function(o){return s.members[o]}))}),this}},{key:"joining",value:function(r){return this.on("pusher:member_added",function(s){r(s.info)}),this}},{key:"whisper",value:function(r,s){return this.pusher.channels.channels[this.name].trigger("client-".concat(r),s),this}},{key:"leaving",value:function(r){return this.on("pusher:member_removed",function(s){r(s.info)}),this}}]),n}(fo),mo=function(e){Yt(n,e);var t=Jt(n);function n(i,r,s){var o;return Lt(this,n),o=t.call(this),o.events={},o.listeners={},o.name=r,o.socket=i,o.options=s,o.eventFormatter=new ho(o.options.namespace),o.subscribe(),o}return Mt(n,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(r,s){return this.on(this.eventFormatter.format(r),s),this}},{key:"stopListening",value:function(r,s){return this.unbindEvent(this.eventFormatter.format(r),s),this}},{key:"subscribed",value:function(r){return this.on("connect",function(s){r(s)}),this}},{key:"error",value:function(r){return this}},{key:"on",value:function(r,s){var o=this;return this.listeners[r]=this.listeners[r]||[],this.events[r]||(this.events[r]=function(c,l){o.name===c&&o.listeners[r]&&o.listeners[r].forEach(function(m){return m(l)})},this.socket.on(r,this.events[r])),this.listeners[r].push(s),this}},{key:"unbind",value:function(){var r=this;Object.keys(this.events).forEach(function(s){r.unbindEvent(s)})}},{key:"unbindEvent",value:function(r,s){this.listeners[r]=this.listeners[r]||[],s&&(this.listeners[r]=this.listeners[r].filter(function(o){return o!==s})),(!s||this.listeners[r].length===0)&&(this.events[r]&&(this.socket.removeListener(r,this.events[r]),delete this.events[r]),delete this.listeners[r])}}]),n}(qr),po=function(e){Yt(n,e);var t=Jt(n);function n(){return Lt(this,n),t.apply(this,arguments)}return Mt(n,[{key:"whisper",value:function(r,s){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(r),data:s}),this}}]),n}(mo),_l=function(e){Yt(n,e);var t=Jt(n);function n(){return Lt(this,n),t.apply(this,arguments)}return Mt(n,[{key:"here",value:function(r){return this.on("presence:subscribed",function(s){r(s.map(function(o){return o.user_info}))}),this}},{key:"joining",value:function(r){return this.on("presence:joining",function(s){return r(s.user_info)}),this}},{key:"whisper",value:function(r,s){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(r),data:s}),this}},{key:"leaving",value:function(r){return this.on("presence:leaving",function(s){return r(s.user_info)}),this}}]),n}(po),Si=function(e){Yt(n,e);var t=Jt(n);function n(){return Lt(this,n),t.apply(this,arguments)}return Mt(n,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(r,s){return this}},{key:"listenToAll",value:function(r){return this}},{key:"stopListening",value:function(r,s){return this}},{key:"subscribed",value:function(r){return this}},{key:"error",value:function(r){return this}},{key:"on",value:function(r,s){return this}}]),n}(qr),go=function(e){Yt(n,e);var t=Jt(n);function n(){return Lt(this,n),t.apply(this,arguments)}return Mt(n,[{key:"whisper",value:function(r,s){return this}}]),n}(Si),Nl=function(e){Yt(n,e);var t=Jt(n);function n(){return Lt(this,n),t.apply(this,arguments)}return Mt(n,[{key:"whisper",value:function(r,s){return this}}]),n}(Si),Bl=function(e){Yt(n,e);var t=Jt(n);function n(){return Lt(this,n),t.apply(this,arguments)}return Mt(n,[{key:"here",value:function(r){return this}},{key:"joining",value:function(r){return this}},{key:"whisper",value:function(r,s){return this}},{key:"leaving",value:function(r){return this}}]),n}(go),Vr=function(){function e(t){Lt(this,e),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(t),this.connect()}return Mt(e,[{key:"setOptions",value:function(n){this.options=qn(this._defaultOptions,n);var i=this.csrfToken();return i&&(this.options.auth.headers["X-CSRF-TOKEN"]=i,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=i),i=this.options.bearerToken,i&&(this.options.auth.headers.Authorization="Bearer "+i,this.options.userAuthentication.headers.Authorization="Bearer "+i),n}},{key:"csrfToken",value:function(){var n;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(n=document.querySelector('meta[name="csrf-token"]'))?n.getAttribute("content"):null}}]),e}(),Ss=function(e){Yt(n,e);var t=Jt(n);function n(){var i;return Lt(this,n),i=t.apply(this,arguments),i.channels={},i}return Mt(n,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(r,s,o){return this.channel(r).listen(s,o)}},{key:"channel",value:function(r){return this.channels[r]||(this.channels[r]=new $r(this.pusher,r,this.options)),this.channels[r]}},{key:"privateChannel",value:function(r){return this.channels["private-"+r]||(this.channels["private-"+r]=new fo(this.pusher,"private-"+r,this.options)),this.channels["private-"+r]}},{key:"encryptedPrivateChannel",value:function(r){return this.channels["private-encrypted-"+r]||(this.channels["private-encrypted-"+r]=new Il(this.pusher,"private-encrypted-"+r,this.options)),this.channels["private-encrypted-"+r]}},{key:"presenceChannel",value:function(r){return this.channels["presence-"+r]||(this.channels["presence-"+r]=new Ol(this.pusher,"presence-"+r,this.options)),this.channels["presence-"+r]}},{key:"leave",value:function(r){var s=this,o=[r,"private-"+r,"private-encrypted-"+r,"presence-"+r];o.forEach(function(c,l){s.leaveChannel(c)})}},{key:"leaveChannel",value:function(r){this.channels[r]&&(this.channels[r].unsubscribe(),delete this.channels[r])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),n}(Vr),xs=function(e){Yt(n,e);var t=Jt(n);function n(){var i;return Lt(this,n),i=t.apply(this,arguments),i.channels={},i}return Mt(n,[{key:"connect",value:function(){var r=this,s=this.getSocketIO();return this.socket=s(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(r.channels).forEach(function(o){o.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(r,s,o){return this.channel(r).listen(s,o)}},{key:"channel",value:function(r){return this.channels[r]||(this.channels[r]=new mo(this.socket,r,this.options)),this.channels[r]}},{key:"privateChannel",value:function(r){return this.channels["private-"+r]||(this.channels["private-"+r]=new po(this.socket,"private-"+r,this.options)),this.channels["private-"+r]}},{key:"presenceChannel",value:function(r){return this.channels["presence-"+r]||(this.channels["presence-"+r]=new _l(this.socket,"presence-"+r,this.options)),this.channels["presence-"+r]}},{key:"leave",value:function(r){var s=this,o=[r,"private-"+r,"presence-"+r];o.forEach(function(c){s.leaveChannel(c)})}},{key:"leaveChannel",value:function(r){this.channels[r]&&(this.channels[r].unsubscribe(),delete this.channels[r])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),n}(Vr),Fl=function(e){Yt(n,e);var t=Jt(n);function n(){var i;return Lt(this,n),i=t.apply(this,arguments),i.channels={},i}return Mt(n,[{key:"connect",value:function(){}},{key:"listen",value:function(r,s,o){return new Si}},{key:"channel",value:function(r){return new Si}},{key:"privateChannel",value:function(r){return new go}},{key:"encryptedPrivateChannel",value:function(r){return new Nl}},{key:"presenceChannel",value:function(r){return new Bl}},{key:"leave",value:function(r){}},{key:"leaveChannel",value:function(r){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),n}(Vr),zl=function(){function e(t){Lt(this,e),this.options=t,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return Mt(e,[{key:"channel",value:function(n){return this.connector.channel(n)}},{key:"connect",value:function(){if(this.options.broadcaster=="reverb")this.connector=new Ss(qn(qn({},this.options),{cluster:""}));else if(this.options.broadcaster=="pusher")this.connector=new Ss(this.options);else if(this.options.broadcaster=="socket.io")this.connector=new xs(this.options);else if(this.options.broadcaster=="null")this.connector=new Fl(this.options);else if(typeof this.options.broadcaster=="function"&&Dl(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw new Error("Broadcaster ".concat(On(this.options.broadcaster)," ").concat(this.options.broadcaster," is not supported."))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(n){return this.connector.presenceChannel(n)}},{key:"leave",value:function(n){this.connector.leave(n)}},{key:"leaveChannel",value:function(n){this.connector.leaveChannel(n)}},{key:"leaveAllChannels",value:function(){for(var n in this.connector.channels)this.leaveChannel(n)}},{key:"listen",value:function(n,i,r){return this.connector.listen(n,i,r)}},{key:"private",value:function(n){return this.connector.privateChannel(n)}},{key:"encryptedPrivate",value:function(n){if(this.connector instanceof xs)throw new Error("Broadcaster ".concat(On(this.options.broadcaster)," ").concat(this.options.broadcaster," does not support encrypted private channels."));return this.connector.encryptedPrivateChannel(n)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":On(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var n=this;Vue.http.interceptors.push(function(i,r){n.socketId()&&i.headers.set("X-Socket-ID",n.socketId()),r()})}},{key:"registerAxiosRequestInterceptor",value:function(){var n=this;axios.interceptors.request.use(function(i){return n.socketId()&&(i.headers["X-Socket-Id"]=n.socketId()),i})}},{key:"registerjQueryAjaxSetup",value:function(){var n=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(i,r,s){n.socketId()&&s.setRequestHeader("X-Socket-Id",n.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var n=this;document.addEventListener("turbo:before-fetch-request",function(i){i.detail.fetchOptions.headers["X-Socket-Id"]=n.socketId()})}}]),e}();function jl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vo={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(e,t){(function(i,r){e.exports=r()})(window,function(){return function(n){var i={};function r(s){if(i[s])return i[s].exports;var o=i[s]={i:s,l:!1,exports:{}};return n[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=i,r.d=function(s,o,c){r.o(s,o)||Object.defineProperty(s,o,{enumerable:!0,get:c})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,o){if(o&1&&(s=r(s)),o&8||o&4&&typeof s=="object"&&s&&s.__esModule)return s;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:s}),o&2&&typeof s!="string")for(var l in s)r.d(c,l,(function(m){return s[m]}).bind(null,l));return c},r.n=function(s){var o=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(o,"a",o),o},r.o=function(s,o){return Object.prototype.hasOwnProperty.call(s,o)},r.p="",r(r.s=2)}([function(n,i,r){var s=this&&this.__extends||function(){var g=function(A,p){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,E){S.__proto__=E}||function(S,E){for(var k in E)E.hasOwnProperty(k)&&(S[k]=E[k])},g(A,p)};return function(A,p){g(A,p);function S(){this.constructor=A}A.prototype=p===null?Object.create(p):(S.prototype=p.prototype,new S)}}();Object.defineProperty(i,"__esModule",{value:!0});var o=256,c=function(){function g(A){A===void 0&&(A="="),this._paddingCharacter=A}return g.prototype.encodedLength=function(A){return this._paddingCharacter?(A+2)/3*4|0:(A*8+5)/6|0},g.prototype.encode=function(A){for(var p="",S=0;S<A.length-2;S+=3){var E=A[S]<<16|A[S+1]<<8|A[S+2];p+=this._encodeByte(E>>>3*6&63),p+=this._encodeByte(E>>>2*6&63),p+=this._encodeByte(E>>>1*6&63),p+=this._encodeByte(E>>>0*6&63)}var k=A.length-S;if(k>0){var E=A[S]<<16|(k===2?A[S+1]<<8:0);p+=this._encodeByte(E>>>3*6&63),p+=this._encodeByte(E>>>2*6&63),k===2?p+=this._encodeByte(E>>>1*6&63):p+=this._paddingCharacter||"",p+=this._paddingCharacter||""}return p},g.prototype.maxDecodedLength=function(A){return this._paddingCharacter?A/4*3|0:(A*6+7)/8|0},g.prototype.decodedLength=function(A){return this.maxDecodedLength(A.length-this._getPaddingLength(A))},g.prototype.decode=function(A){if(A.length===0)return new Uint8Array(0);for(var p=this._getPaddingLength(A),S=A.length-p,E=new Uint8Array(this.maxDecodedLength(S)),k=0,L=0,R=0,N=0,M=0,j=0,D=0;L<S-4;L+=4)N=this._decodeChar(A.charCodeAt(L+0)),M=this._decodeChar(A.charCodeAt(L+1)),j=this._decodeChar(A.charCodeAt(L+2)),D=this._decodeChar(A.charCodeAt(L+3)),E[k++]=N<<2|M>>>4,E[k++]=M<<4|j>>>2,E[k++]=j<<6|D,R|=N&o,R|=M&o,R|=j&o,R|=D&o;if(L<S-1&&(N=this._decodeChar(A.charCodeAt(L)),M=this._decodeChar(A.charCodeAt(L+1)),E[k++]=N<<2|M>>>4,R|=N&o,R|=M&o),L<S-2&&(j=this._decodeChar(A.charCodeAt(L+2)),E[k++]=M<<4|j>>>2,R|=j&o),L<S-3&&(D=this._decodeChar(A.charCodeAt(L+3)),E[k++]=j<<6|D,R|=D&o),R!==0)throw new Error("Base64Coder: incorrect characters for decoding");return E},g.prototype._encodeByte=function(A){var p=A;return p+=65,p+=25-A>>>8&6,p+=51-A>>>8&-75,p+=61-A>>>8&-15,p+=62-A>>>8&3,String.fromCharCode(p)},g.prototype._decodeChar=function(A){var p=o;return p+=(42-A&A-44)>>>8&-o+A-43+62,p+=(46-A&A-48)>>>8&-o+A-47+63,p+=(47-A&A-58)>>>8&-o+A-48+52,p+=(64-A&A-91)>>>8&-o+A-65+0,p+=(96-A&A-123)>>>8&-o+A-97+26,p},g.prototype._getPaddingLength=function(A){var p=0;if(this._paddingCharacter){for(var S=A.length-1;S>=0&&A[S]===this._paddingCharacter;S--)p++;if(A.length<4||p>2)throw new Error("Base64Coder: incorrect padding")}return p},g}();i.Coder=c;var l=new c;function m(g){return l.encode(g)}i.encode=m;function b(g){return l.decode(g)}i.decode=b;var v=function(g){s(A,g);function A(){return g!==null&&g.apply(this,arguments)||this}return A.prototype._encodeByte=function(p){var S=p;return S+=65,S+=25-p>>>8&6,S+=51-p>>>8&-75,S+=61-p>>>8&-13,S+=62-p>>>8&49,String.fromCharCode(S)},A.prototype._decodeChar=function(p){var S=o;return S+=(44-p&p-46)>>>8&-o+p-45+62,S+=(94-p&p-96)>>>8&-o+p-95+63,S+=(47-p&p-58)>>>8&-o+p-48+52,S+=(64-p&p-91)>>>8&-o+p-65+0,S+=(96-p&p-123)>>>8&-o+p-97+26,S},A}(c);i.URLSafeCoder=v;var y=new v;function d(g){return y.encode(g)}i.encodeURLSafe=d;function f(g){return y.decode(g)}i.decodeURLSafe=f,i.encodedLength=function(g){return l.encodedLength(g)},i.maxDecodedLength=function(g){return l.maxDecodedLength(g)},i.decodedLength=function(g){return l.decodedLength(g)}},function(n,i,r){Object.defineProperty(i,"__esModule",{value:!0});var s="utf8: invalid string",o="utf8: invalid source encoding";function c(b){for(var v=new Uint8Array(l(b)),y=0,d=0;d<b.length;d++){var f=b.charCodeAt(d);f<128?v[y++]=f:f<2048?(v[y++]=192|f>>6,v[y++]=128|f&63):f<55296?(v[y++]=224|f>>12,v[y++]=128|f>>6&63,v[y++]=128|f&63):(d++,f=(f&1023)<<10,f|=b.charCodeAt(d)&1023,f+=65536,v[y++]=240|f>>18,v[y++]=128|f>>12&63,v[y++]=128|f>>6&63,v[y++]=128|f&63)}return v}i.encode=c;function l(b){for(var v=0,y=0;y<b.length;y++){var d=b.charCodeAt(y);if(d<128)v+=1;else if(d<2048)v+=2;else if(d<55296)v+=3;else if(d<=57343){if(y>=b.length-1)throw new Error(s);y++,v+=4}else throw new Error(s)}return v}i.encodedLength=l;function m(b){for(var v=[],y=0;y<b.length;y++){var d=b[y];if(d&128){var f=void 0;if(d<224){if(y>=b.length)throw new Error(o);var g=b[++y];if((g&192)!==128)throw new Error(o);d=(d&31)<<6|g&63,f=128}else if(d<240){if(y>=b.length-1)throw new Error(o);var g=b[++y],A=b[++y];if((g&192)!==128||(A&192)!==128)throw new Error(o);d=(d&15)<<12|(g&63)<<6|A&63,f=2048}else if(d<248){if(y>=b.length-2)throw new Error(o);var g=b[++y],A=b[++y],p=b[++y];if((g&192)!==128||(A&192)!==128||(p&192)!==128)throw new Error(o);d=(d&15)<<18|(g&63)<<12|(A&63)<<6|p&63,f=65536}else throw new Error(o);if(d<f||d>=55296&&d<=57343)throw new Error(o);if(d>=65536){if(d>1114111)throw new Error(o);d-=65536,v.push(String.fromCharCode(55296|d>>10)),d=56320|d&1023}}v.push(String.fromCharCode(d))}return v.join("")}i.decode=m},function(n,i,r){n.exports=r(3).default},function(n,i,r){r.r(i);class s{constructor(a,u){this.lastId=0,this.prefix=a,this.name=u}create(a){this.lastId++;var u=this.lastId,x=this.prefix+u,T=this.name+"["+u+"]",B=!1,q=function(){B||(a.apply(null,arguments),B=!0)};return this[u]=q,{number:u,id:x,name:T,callback:q}}remove(a){delete this[a.number]}}var o=new s("_pusher_script_","Pusher.ScriptReceivers"),c={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},l=c;class m{constructor(a){this.options=a,this.receivers=a.receivers||o,this.loading={}}load(a,u,x){var T=this;if(T.loading[a]&&T.loading[a].length>0)T.loading[a].push(x);else{T.loading[a]=[x];var B=tt.createScriptRequest(T.getPath(a,u)),q=T.receivers.create(function(J){if(T.receivers.remove(q),T.loading[a]){var Z=T.loading[a];delete T.loading[a];for(var ut=function(Et){Et||B.cleanup()},ft=0;ft<Z.length;ft++)Z[ft](J,ut)}});B.send(q)}}getRoot(a){var u,x=tt.getDocument().location.protocol;return a&&a.useTLS||x==="https:"?u=this.options.cdn_https:u=this.options.cdn_http,u.replace(/\/*$/,"")+"/"+this.options.version}getPath(a,u){return this.getRoot(u)+"/"+a+this.options.suffix+".js"}}var b=new s("_pusher_dependencies","Pusher.DependenciesReceivers"),v=new m({cdn_http:l.cdn_http,cdn_https:l.cdn_https,version:l.VERSION,suffix:l.dependency_suffix,receivers:b});const y={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var f={buildLogSuffix:function(h){const a="See:",u=y.urls[h];if(!u)return"";let x;return u.fullUrl?x=u.fullUrl:u.path&&(x=y.baseUrl+u.path),x?`${a} ${x}`:""}},g;(function(h){h.UserAuthentication="user-authentication",h.ChannelAuthorization="channel-authorization"})(g||(g={}));class A extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}class p extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}class S extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}class k extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}class L extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}class R extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}class N extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}class M extends Error{constructor(a,u){super(u),this.status=a,Object.setPrototypeOf(this,new.target.prototype)}}var D=function(h,a,u,x,T){const B=tt.createXHR();B.open("POST",u.endpoint,!0),B.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var q in u.headers)B.setRequestHeader(q,u.headers[q]);if(u.headersProvider!=null){let J=u.headersProvider();for(var q in J)B.setRequestHeader(q,J[q])}return B.onreadystatechange=function(){if(B.readyState===4)if(B.status===200){let J,Z=!1;try{J=JSON.parse(B.responseText),Z=!0}catch{T(new M(200,`JSON returned from ${x.toString()} endpoint was invalid, yet status code was 200. Data was: ${B.responseText}`),null)}Z&&T(null,J)}else{let J="";switch(x){case g.UserAuthentication:J=f.buildLogSuffix("authenticationEndpoint");break;case g.ChannelAuthorization:J=`Clients must be authorized to join private or presence channels. ${f.buildLogSuffix("authorizationEndpoint")}`;break}T(new M(B.status,`Unable to retrieve auth string from ${x.toString()} endpoint - received status: ${B.status} from ${u.endpoint}. ${J}`),null)}},B.send(a),B};function w(h){return I(G(h))}var P=String.fromCharCode,O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H=function(h){var a=h.charCodeAt(0);return a<128?h:a<2048?P(192|a>>>6)+P(128|a&63):P(224|a>>>12&15)+P(128|a>>>6&63)+P(128|a&63)},G=function(h){return h.replace(/[^\x00-\x7F]/g,H)},_=function(h){var a=[0,2,1][h.length%3],u=h.charCodeAt(0)<<16|(h.length>1?h.charCodeAt(1):0)<<8|(h.length>2?h.charCodeAt(2):0),x=[O.charAt(u>>>18),O.charAt(u>>>12&63),a>=2?"=":O.charAt(u>>>6&63),a>=1?"=":O.charAt(u&63)];return x.join("")},I=window.btoa||function(h){return h.replace(/[\s\S]{1,3}/g,_)};class F{constructor(a,u,x,T){this.clear=u,this.timer=a(()=>{this.timer&&(this.timer=T(this.timer))},x)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var X=F;function K(h){window.clearTimeout(h)}function dt(h){window.clearInterval(h)}class rt extends X{constructor(a,u){super(setTimeout,K,a,function(x){return u(),null})}}class Ct extends X{constructor(a,u){super(setInterval,dt,a,function(x){return u(),x})}}var z={now(){return Date.now?Date.now():new Date().valueOf()},defer(h){return new rt(0,h)},method(h,...a){var u=Array.prototype.slice.call(arguments,1);return function(x){return x[h].apply(x,u.concat(arguments))}}},$=z;function W(h,...a){for(var u=0;u<a.length;u++){var x=a[u];for(var T in x)x[T]&&x[T].constructor&&x[T].constructor===Object?h[T]=W(h[T]||{},x[T]):h[T]=x[T]}return h}function U(){for(var h=["Pusher"],a=0;a<arguments.length;a++)typeof arguments[a]=="string"?h.push(arguments[a]):h.push(ie(arguments[a]));return h.join(" : ")}function Q(h,a){var u=Array.prototype.indexOf;if(h===null)return-1;if(u&&h.indexOf===u)return h.indexOf(a);for(var x=0,T=h.length;x<T;x++)if(h[x]===a)return x;return-1}function ht(h,a){for(var u in h)Object.prototype.hasOwnProperty.call(h,u)&&a(h[u],u,h)}function Bt(h){var a=[];return ht(h,function(u,x){a.push(x)}),a}function Ut(h){var a=[];return ht(h,function(u){a.push(u)}),a}function Pt(h,a,u){for(var x=0;x<h.length;x++)a.call(u||window,h[x],x,h)}function pt(h,a){for(var u=[],x=0;x<h.length;x++)u.push(a(h[x],x,h,u));return u}function wt(h,a){var u={};return ht(h,function(x,T){u[T]=a(x)}),u}function Ot(h,a){a=a||function(T){return!!T};for(var u=[],x=0;x<h.length;x++)a(h[x],x,h,u)&&u.push(h[x]);return u}function le(h,a){var u={};return ht(h,function(x,T){(a&&a(x,T,h,u)||x)&&(u[T]=x)}),u}function ne(h){var a=[];return ht(h,function(u,x){a.push([x,u])}),a}function _t(h,a){for(var u=0;u<h.length;u++)if(a(h[u],u,h))return!0;return!1}function ce(h,a){for(var u=0;u<h.length;u++)if(!a(h[u],u,h))return!1;return!0}function ue(h){return wt(h,function(a){return typeof a=="object"&&(a=ie(a)),encodeURIComponent(w(a.toString()))})}function ke(h){var a=le(h,function(x){return x!==void 0}),u=pt(ne(ue(a)),$.method("join","=")).join("&");return u}function Le(h){var a=[],u=[];return function x(T,B){var q,J,Z;switch(typeof T){case"object":if(!T)return null;for(q=0;q<a.length;q+=1)if(a[q]===T)return{$ref:u[q]};if(a.push(T),u.push(B),Object.prototype.toString.apply(T)==="[object Array]")for(Z=[],q=0;q<T.length;q+=1)Z[q]=x(T[q],B+"["+q+"]");else{Z={};for(J in T)Object.prototype.hasOwnProperty.call(T,J)&&(Z[J]=x(T[J],B+"["+JSON.stringify(J)+"]"))}return Z;case"number":case"string":case"boolean":return T}}(h,"$")}function ie(h){try{return JSON.stringify(h)}catch{return JSON.stringify(Le(h))}}class de{constructor(){this.globalLog=a=>{window.console&&window.console.log&&window.console.log(a)}}debug(...a){this.log(this.globalLog,a)}warn(...a){this.log(this.globalLogWarn,a)}error(...a){this.log(this.globalLogError,a)}globalLogWarn(a){window.console&&window.console.warn?window.console.warn(a):this.globalLog(a)}globalLogError(a){window.console&&window.console.error?window.console.error(a):this.globalLogWarn(a)}log(a,...u){var x=U.apply(this,arguments);$i.log?$i.log(x):$i.logToConsole&&a.bind(this)(x)}}var lt=new de,Ft=function(h,a,u,x,T){(u.headers!==void 0||u.headersProvider!=null)&&lt.warn(`To send headers with the ${x.toString()} request, you must use AJAX, rather than JSONP.`);var B=h.nextAuthCallbackID.toString();h.nextAuthCallbackID++;var q=h.getDocument(),J=q.createElement("script");h.auth_callbacks[B]=function(ft){T(null,ft)};var Z="Pusher.auth_callbacks['"+B+"']";J.src=u.endpoint+"?callback="+encodeURIComponent(Z)+"&"+a;var ut=q.getElementsByTagName("head")[0]||q.documentElement;ut.insertBefore(J,ut.firstChild)},ze=Ft;class ge{constructor(a){this.src=a}send(a){var u=this,x="Error loading "+u.src;u.script=document.createElement("script"),u.script.id=a.id,u.script.src=u.src,u.script.type="text/javascript",u.script.charset="UTF-8",u.script.addEventListener?(u.script.onerror=function(){a.callback(x)},u.script.onload=function(){a.callback(null)}):u.script.onreadystatechange=function(){(u.script.readyState==="loaded"||u.script.readyState==="complete")&&a.callback(null)},u.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(u.errorScript=document.createElement("script"),u.errorScript.id=a.id+"_error",u.errorScript.text=a.name+"('"+x+"');",u.script.async=u.errorScript.async=!1):u.script.async=!0;var T=document.getElementsByTagName("head")[0];T.insertBefore(u.script,T.firstChild),u.errorScript&&T.insertBefore(u.errorScript,u.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class Jn{constructor(a,u){this.url=a,this.data=u}send(a){if(!this.request){var u=ke(this.data),x=this.url+"/"+a.number+"?"+u;this.request=tt.createScriptRequest(x),this.request.send(a)}}cleanup(){this.request&&this.request.cleanup()}}var mn=function(h,a){return function(u,x){var T="http"+(a?"s":"")+"://",B=T+(h.host||h.options.host)+h.options.path,q=tt.createJSONPRequest(B,u),J=tt.ScriptReceivers.create(function(Z,ut){o.remove(J),q.cleanup(),ut&&ut.host&&(h.host=ut.host),x&&x(Z,ut)});q.send(J)}},Kn={name:"jsonp",getAgent:mn},nn=Kn;function Me(h,a,u){var x=h+(a.useTLS?"s":""),T=a.useTLS?a.hostTLS:a.hostNonTLS;return x+"://"+T+u}function Kt(h,a){var u="/app/"+h,x="?protocol="+l.PROTOCOL+"&client=js&version="+l.VERSION+(a?"&"+a:"");return u+x}var Pe={getInitial:function(h,a){var u=(a.httpPath||"")+Kt(h,"flash=false");return Me("ws",a,u)}},pn={getInitial:function(h,a){var u=(a.httpPath||"/pusher")+Kt(h);return Me("http",a,u)}},gn={getInitial:function(h,a){return Me("http",a,a.httpPath||"/pusher")},getPath:function(h,a){return Kt(h)}};class Ni{constructor(){this._callbacks={}}get(a){return this._callbacks[we(a)]}add(a,u,x){var T=we(a);this._callbacks[T]=this._callbacks[T]||[],this._callbacks[T].push({fn:u,context:x})}remove(a,u,x){if(!a&&!u&&!x){this._callbacks={};return}var T=a?[we(a)]:Bt(this._callbacks);u||x?this.removeCallback(T,u,x):this.removeAllCallbacks(T)}removeCallback(a,u,x){Pt(a,function(T){this._callbacks[T]=Ot(this._callbacks[T]||[],function(B){return u&&u!==B.fn||x&&x!==B.context}),this._callbacks[T].length===0&&delete this._callbacks[T]},this)}removeAllCallbacks(a){Pt(a,function(u){delete this._callbacks[u]},this)}}function we(h){return"_"+h}class Gt{constructor(a){this.callbacks=new Ni,this.global_callbacks=[],this.failThrough=a}bind(a,u,x){return this.callbacks.add(a,u,x),this}bind_global(a){return this.global_callbacks.push(a),this}unbind(a,u,x){return this.callbacks.remove(a,u,x),this}unbind_global(a){return a?(this.global_callbacks=Ot(this.global_callbacks||[],u=>u!==a),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(a,u,x){for(var T=0;T<this.global_callbacks.length;T++)this.global_callbacks[T](a,u);var B=this.callbacks.get(a),q=[];if(x?q.push(u,x):u&&q.push(u),B&&B.length>0)for(var T=0;T<B.length;T++)B[T].fn.apply(B[T].context||window,q);else this.failThrough&&this.failThrough(a,u);return this}}class Bi extends Gt{constructor(a,u,x,T,B){super(),this.initialize=tt.transportConnectionInitializer,this.hooks=a,this.name=u,this.priority=x,this.key=T,this.options=B,this.state="new",this.timeline=B.timeline,this.activityTimeout=B.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var a=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(a,this.options)}catch(u){return $.defer(()=>{this.onError(u),this.changeState("closed")}),!1}return this.bindListeners(),lt.debug("Connecting",{transport:this.name,url:a}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(a){return this.state==="open"?($.defer(()=>{this.socket&&this.socket.send(a)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(a){this.emit("error",{type:"WebSocketError",error:a}),this.timeline.error(this.buildTimelineMessage({error:a.toString()}))}onClose(a){a?this.changeState("closed",{code:a.code,reason:a.reason,wasClean:a.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(a){this.emit("message",a)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=a=>{this.onError(a)},this.socket.onclose=a=>{this.onClose(a)},this.socket.onmessage=a=>{this.onMessage(a)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(a,u){this.state=a,this.timeline.info(this.buildTimelineMessage({state:a,params:u})),this.emit(a,u)}buildTimelineMessage(a){return W({cid:this.id},a)}}class re{constructor(a){this.hooks=a}isSupported(a){return this.hooks.isSupported(a)}createConnection(a,u,x,T){return new Bi(this.hooks,a,u,x,T)}}var Fi=new re({urls:Pe,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!tt.getWebSocketAPI()},isSupported:function(){return!!tt.getWebSocketAPI()},getSocket:function(h){return tt.createWebSocket(h)}}),yt={urls:pn,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Se=W({getSocket:function(h){return tt.HTTPFactory.createStreamingSocket(h)}},yt),Qn=W({getSocket:function(h){return tt.HTTPFactory.createPollingSocket(h)}},yt),vn={isSupported:function(){return tt.isXHRSupported()}},bn=new re(W({},Se,vn)),Zn=new re(W({},Qn,vn)),ti={ws:Fi,xhr_streaming:bn,xhr_polling:Zn},zt=ti,rn=new re({file:"sockjs",urls:gn,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(h,a){return new window.SockJS(h,null,{js_path:v.getPath("sockjs",{useTLS:a.useTLS}),ignore_null_origin:a.ignoreNullOrigin})},beforeOpen:function(h,a){h.send(JSON.stringify({path:a}))}}),yn={isSupported:function(h){var a=tt.isXDRSupported(h.useTLS);return a}},ei=new re(W({},Se,yn)),Sn=new re(W({},Qn,yn));zt.xdr_streaming=ei,zt.xdr_polling=Sn,zt.sockjs=rn;var ni=zt;class he extends Gt{constructor(){super();var a=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){a.emit("online")},!1),window.addEventListener("offline",function(){a.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var ii=new he;class ri{constructor(a,u,x){this.manager=a,this.transport=u,this.minPingDelay=x.minPingDelay,this.maxPingDelay=x.maxPingDelay,this.pingDelay=void 0}createConnection(a,u,x,T){T=W({},T,{activityTimeout:this.pingDelay});var B=this.transport.createConnection(a,u,x,T),q=null,J=function(){B.unbind("open",J),B.bind("closed",Z),q=$.now()},Z=ut=>{if(B.unbind("closed",Z),ut.code===1002||ut.code===1003)this.manager.reportDeath();else if(!ut.wasClean&&q){var ft=$.now()-q;ft<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(ft/2,this.minPingDelay))}};return B.bind("open",J),B}isSupported(a){return this.manager.isAlive()&&this.transport.isSupported(a)}}const xn={decodeMessage:function(h){try{var a=JSON.parse(h.data),u=a.data;if(typeof u=="string")try{u=JSON.parse(a.data)}catch{}var x={event:a.event,channel:a.channel,data:u};return a.user_id&&(x.user_id=a.user_id),x}catch(T){throw{type:"MessageParseError",error:T,data:h.data}}},encodeMessage:function(h){return JSON.stringify(h)},processHandshake:function(h){var a=xn.decodeMessage(h);if(a.event==="pusher:connection_established"){if(!a.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:a.data.socket_id,activityTimeout:a.data.activity_timeout*1e3}}else{if(a.event==="pusher:error")return{action:this.getCloseAction(a.data),error:this.getCloseError(a.data)};throw"Invalid handshake"}},getCloseAction:function(h){return h.code<4e3?h.code>=1002&&h.code<=1004?"backoff":null:h.code===4e3?"tls_only":h.code<4100?"refused":h.code<4200?"backoff":h.code<4300?"retry":"refused"},getCloseError:function(h){return h.code!==1e3&&h.code!==1001?{type:"PusherError",data:{code:h.code,message:h.reason||h.message}}:null}};var ve=xn;class zi extends Gt{constructor(a,u){super(),this.id=a,this.transport=u,this.activityTimeout=u.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(a){return this.transport.send(a)}send_event(a,u,x){var T={event:a,data:u};return x&&(T.channel=x),lt.debug("Event sent",T),this.send(ve.encodeMessage(T))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var a={message:x=>{var T;try{T=ve.decodeMessage(x)}catch(B){this.emit("error",{type:"MessageParseError",error:B,data:x.data})}if(T!==void 0){switch(lt.debug("Event recd",T),T.event){case"pusher:error":this.emit("error",{type:"PusherError",data:T.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",T)}},activity:()=>{this.emit("activity")},error:x=>{this.emit("error",x)},closed:x=>{u(),x&&x.code&&this.handleCloseEvent(x),this.transport=null,this.emit("closed")}},u=()=>{ht(a,(x,T)=>{this.transport.unbind(T,x)})};ht(a,(x,T)=>{this.transport.bind(T,x)})}handleCloseEvent(a){var u=ve.getCloseAction(a),x=ve.getCloseError(a);x&&this.emit("error",x),u&&this.emit(u,{action:u,error:x})}}class C{constructor(a,u){this.transport=a,this.callback=u,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=a=>{this.unbindListeners();var u;try{u=ve.processHandshake(a)}catch(x){this.finish("error",{error:x}),this.transport.close();return}u.action==="connected"?this.finish("connected",{connection:new zi(u.id,this.transport),activityTimeout:u.activityTimeout}):(this.finish(u.action,{error:u.error}),this.transport.close())},this.onClosed=a=>{this.unbindListeners();var u=ve.getCloseAction(a)||"backoff",x=ve.getCloseError(a);this.finish(u,{error:x})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(a,u){this.callback(W({transport:this.transport,action:a},u))}}class Y{constructor(a,u){this.timeline=a,this.options=u||{}}send(a,u){this.timeline.isEmpty()||this.timeline.send(tt.TimelineTransport.getAgent(this,a),u)}}class V extends Gt{constructor(a,u){super(function(x,T){lt.debug("No callbacks on "+a+" for "+x)}),this.name=a,this.pusher=u,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(a,u){return u(null,{auth:""})}trigger(a,u){if(a.indexOf("client-")!==0)throw new A("Event '"+a+"' does not start with 'client-'");if(!this.subscribed){var x=f.buildLogSuffix("triggeringClientEvents");lt.warn(`Client event triggered before channel 'subscription_succeeded' event . ${x}`)}return this.pusher.send_event(a,u,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(a){var u=a.event,x=a.data;if(u==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(a);else if(u==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(a);else if(u.indexOf("pusher_internal:")!==0){var T={};this.emit(u,x,T)}}handleSubscriptionSucceededEvent(a){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",a.data)}handleSubscriptionCountEvent(a){a.data.subscription_count&&(this.subscriptionCount=a.data.subscription_count),this.emit("pusher:subscription_count",a.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(a,u)=>{a?(this.subscriptionPending=!1,lt.error(a.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:a.message},a instanceof M?{status:a.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:u.auth,channel_data:u.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class nt extends V{authorize(a,u){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:a},u)}}class ct{constructor(){this.reset()}get(a){return Object.prototype.hasOwnProperty.call(this.members,a)?{id:a,info:this.members[a]}:null}each(a){ht(this.members,(u,x)=>{a(this.get(x))})}setMyID(a){this.myID=a}onSubscription(a){this.members=a.presence.hash,this.count=a.presence.count,this.me=this.get(this.myID)}addMember(a){return this.get(a.user_id)===null&&this.count++,this.members[a.user_id]=a.user_info,this.get(a.user_id)}removeMember(a){var u=this.get(a.user_id);return u&&(delete this.members[a.user_id],this.count--),u}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var it=function(h,a,u,x){function T(B){return B instanceof u?B:new u(function(q){q(B)})}return new(u||(u=Promise))(function(B,q){function J(ft){try{ut(x.next(ft))}catch(Et){q(Et)}}function Z(ft){try{ut(x.throw(ft))}catch(Et){q(Et)}}function ut(ft){ft.done?B(ft.value):T(ft.value).then(J,Z)}ut((x=x.apply(h,a||[])).next())})};class St extends nt{constructor(a,u){super(a,u),this.members=new ct}authorize(a,u){super.authorize(a,(x,T)=>it(this,void 0,void 0,function*(){if(!x)if(T=T,T.channel_data!=null){var B=JSON.parse(T.channel_data);this.members.setMyID(B.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let q=f.buildLogSuffix("authorizationEndpoint");lt.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${q}, or the user should be signed in.`),u("Invalid auth response");return}u(x,T)}))}handleEvent(a){var u=a.event;if(u.indexOf("pusher_internal:")===0)this.handleInternalEvent(a);else{var x=a.data,T={};a.user_id&&(T.user_id=a.user_id),this.emit(u,x,T)}}handleInternalEvent(a){var u=a.event,x=a.data;switch(u){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(a);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(a);break;case"pusher_internal:member_added":var T=this.members.addMember(x);this.emit("pusher:member_added",T);break;case"pusher_internal:member_removed":var B=this.members.removeMember(x);B&&this.emit("pusher:member_removed",B);break}}handleSubscriptionSucceededEvent(a){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(a.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var fe=r(1),Xt=r(0);class Rt extends nt{constructor(a,u,x){super(a,u),this.key=null,this.nacl=x}authorize(a,u){super.authorize(a,(x,T)=>{if(x){u(x,T);return}let B=T.shared_secret;if(!B){u(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Xt.decode)(B),delete T.shared_secret,u(null,T)})}trigger(a,u){throw new L("Client events are not currently supported for encrypted channels")}handleEvent(a){var u=a.event,x=a.data;if(u.indexOf("pusher_internal:")===0||u.indexOf("pusher:")===0){super.handleEvent(a);return}this.handleEncryptedEvent(u,x)}handleEncryptedEvent(a,u){if(!this.key){lt.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!u.ciphertext||!u.nonce){lt.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+u);return}let x=Object(Xt.decode)(u.ciphertext);if(x.length<this.nacl.secretbox.overheadLength){lt.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${x.length}`);return}let T=Object(Xt.decode)(u.nonce);if(T.length<this.nacl.secretbox.nonceLength){lt.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${T.length}`);return}let B=this.nacl.secretbox.open(x,T,this.key);if(B===null){lt.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(q,J)=>{if(q){lt.error(`Failed to make a request to the authEndpoint: ${J}. Unable to fetch new key, so dropping encrypted event`);return}if(B=this.nacl.secretbox.open(x,T,this.key),B===null){lt.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(a,this.getDataToEmit(B))});return}this.emit(a,this.getDataToEmit(B))}getDataToEmit(a){let u=Object(fe.decode)(a);try{return JSON.parse(u)}catch{return u}}}class si extends Gt{constructor(a,u){super(),this.state="initialized",this.connection=null,this.key=a,this.options=u,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var x=tt.getNetwork();x.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),x.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(a){return this.connection?this.connection.send(a):!1}send_event(a,u,x){return this.connection?this.connection.send_event(a,u,x):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var a=(u,x)=>{u?this.runner=this.strategy.connect(0,a):x.action==="error"?(this.emit("error",{type:"HandshakeError",error:x.error}),this.timeline.error({handshakeError:x.error})):(this.abortConnecting(),this.handshakeCallbacks[x.action](x))};this.runner=this.strategy.connect(0,a)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var a=this.abandonConnection();a.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(a){this.timeline.info({action:"retry",delay:a}),a>0&&this.emit("connecting_in",Math.round(a/1e3)),this.retryTimer=new rt(a||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new rt(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new rt(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new rt(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(a){return W({},a,{message:u=>{this.resetActivityCheck(),this.emit("message",u)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:u=>{this.emit("error",u)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(a){return W({},a,{connected:u=>{this.activityTimeout=Math.min(this.options.activityTimeout,u.activityTimeout,u.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(u.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let a=u=>x=>{x.error&&this.emit("error",{type:"WebSocketError",error:x.error}),u(x)};return{tls_only:a(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:a(()=>{this.disconnect()}),backoff:a(()=>{this.retryIn(1e3)}),retry:a(()=>{this.retryIn(0)})}}setConnection(a){this.connection=a;for(var u in this.connectionCallbacks)this.connection.bind(u,this.connectionCallbacks[u]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var a in this.connectionCallbacks)this.connection.unbind(a,this.connectionCallbacks[a]);var u=this.connection;return this.connection=null,u}}updateState(a,u){var x=this.state;if(this.state=a,x!==a){var T=a;T==="connected"&&(T+=" with new socket ID "+u.socket_id),lt.debug("State changed",x+" -> "+T),this.timeline.info({state:a,params:u}),this.emit("state_change",{previous:x,current:a}),this.emit(a,u)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class oi{constructor(){this.channels={}}add(a,u){return this.channels[a]||(this.channels[a]=ga(a,u)),this.channels[a]}all(){return Ut(this.channels)}find(a){return this.channels[a]}remove(a){var u=this.channels[a];return delete this.channels[a],u}disconnect(){ht(this.channels,function(a){a.disconnect()})}}function ga(h,a){if(h.indexOf("private-encrypted-")===0){if(a.config.nacl)return xe.createEncryptedChannel(h,a,a.config.nacl);let u="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",x=f.buildLogSuffix("encryptedChannelSupport");throw new L(`${u}. ${x}`)}else{if(h.indexOf("private-")===0)return xe.createPrivateChannel(h,a);if(h.indexOf("presence-")===0)return xe.createPresenceChannel(h,a);if(h.indexOf("#")===0)throw new p('Cannot create a channel with name "'+h+'".');return xe.createChannel(h,a)}}var va={createChannels(){return new oi},createConnectionManager(h,a){return new si(h,a)},createChannel(h,a){return new V(h,a)},createPrivateChannel(h,a){return new nt(h,a)},createPresenceChannel(h,a){return new St(h,a)},createEncryptedChannel(h,a,u){return new Rt(h,a,u)},createTimelineSender(h,a){return new Y(h,a)},createHandshake(h,a){return new C(h,a)},createAssistantToTheTransportManager(h,a,u){return new ri(h,a,u)}},xe=va;class os{constructor(a){this.options=a||{},this.livesLeft=this.options.lives||1/0}getAssistant(a){return xe.createAssistantToTheTransportManager(this,a,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class je{constructor(a,u){this.strategies=a,this.loop=!!u.loop,this.failFast=!!u.failFast,this.timeout=u.timeout,this.timeoutLimit=u.timeoutLimit}isSupported(){return _t(this.strategies,$.method("isSupported"))}connect(a,u){var x=this.strategies,T=0,B=this.timeout,q=null,J=(Z,ut)=>{ut?u(null,ut):(T=T+1,this.loop&&(T=T%x.length),T<x.length?(B&&(B=B*2,this.timeoutLimit&&(B=Math.min(B,this.timeoutLimit))),q=this.tryStrategy(x[T],a,{timeout:B,failFast:this.failFast},J)):u(!0))};return q=this.tryStrategy(x[T],a,{timeout:B,failFast:this.failFast},J),{abort:function(){q.abort()},forceMinPriority:function(Z){a=Z,q&&q.forceMinPriority(Z)}}}tryStrategy(a,u,x,T){var B=null,q=null;return x.timeout>0&&(B=new rt(x.timeout,function(){q.abort(),T(!0)})),q=a.connect(u,function(J,Z){J&&B&&B.isRunning()&&!x.failFast||(B&&B.ensureAborted(),T(J,Z))}),{abort:function(){B&&B.ensureAborted(),q.abort()},forceMinPriority:function(J){q.forceMinPriority(J)}}}}class ji{constructor(a){this.strategies=a}isSupported(){return _t(this.strategies,$.method("isSupported"))}connect(a,u){return ba(this.strategies,a,function(x,T){return function(B,q){if(T[x].error=B,B){ya(T)&&u(!0);return}Pt(T,function(J){J.forceMinPriority(q.transport.priority)}),u(null,q)}})}}function ba(h,a,u){var x=pt(h,function(T,B,q,J){return T.connect(a,u(B,J))});return{abort:function(){Pt(x,Sa)},forceMinPriority:function(T){Pt(x,function(B){B.forceMinPriority(T)})}}}function ya(h){return ce(h,function(a){return!!a.error})}function Sa(h){!h.error&&!h.aborted&&(h.abort(),h.aborted=!0)}class xa{constructor(a,u,x){this.strategy=a,this.transports=u,this.ttl=x.ttl||1800*1e3,this.usingTLS=x.useTLS,this.timeline=x.timeline}isSupported(){return this.strategy.isSupported()}connect(a,u){var x=this.usingTLS,T=Aa(x),B=T&&T.cacheSkipCount?T.cacheSkipCount:0,q=[this.strategy];if(T&&T.timestamp+this.ttl>=$.now()){var J=this.transports[T.transport];J&&(["ws","wss"].includes(T.transport)||B>3?(this.timeline.info({cached:!0,transport:T.transport,latency:T.latency}),q.push(new je([J],{timeout:T.latency*2+1e3,failFast:!0}))):B++)}var Z=$.now(),ut=q.pop().connect(a,function ft(Et,ci){Et?(as(x),q.length>0?(Z=$.now(),ut=q.pop().connect(a,ft)):u(Et)):(Ea(x,ci.transport.name,$.now()-Z,B),u(null,ci))});return{abort:function(){ut.abort()},forceMinPriority:function(ft){a=ft,ut&&ut.forceMinPriority(ft)}}}}function Hi(h){return"pusherTransport"+(h?"TLS":"NonTLS")}function Aa(h){var a=tt.getLocalStorage();if(a)try{var u=a[Hi(h)];if(u)return JSON.parse(u)}catch{as(h)}return null}function Ea(h,a,u,x){var T=tt.getLocalStorage();if(T)try{T[Hi(h)]=ie({timestamp:$.now(),transport:a,latency:u,cacheSkipCount:x})}catch{}}function as(h){var a=tt.getLocalStorage();if(a)try{delete a[Hi(h)]}catch{}}class ai{constructor(a,{delay:u}){this.strategy=a,this.options={delay:u}}isSupported(){return this.strategy.isSupported()}connect(a,u){var x=this.strategy,T,B=new rt(this.options.delay,function(){T=x.connect(a,u)});return{abort:function(){B.ensureAborted(),T&&T.abort()},forceMinPriority:function(q){a=q,T&&T.forceMinPriority(q)}}}}class An{constructor(a,u,x){this.test=a,this.trueBranch=u,this.falseBranch=x}isSupported(){var a=this.test()?this.trueBranch:this.falseBranch;return a.isSupported()}connect(a,u){var x=this.test()?this.trueBranch:this.falseBranch;return x.connect(a,u)}}class Ta{constructor(a){this.strategy=a}isSupported(){return this.strategy.isSupported()}connect(a,u){var x=this.strategy.connect(a,function(T,B){B&&x.abort(),u(T,B)});return x}}function En(h){return function(){return h.isSupported()}}var Ca=function(h,a,u){var x={};function T(bs,Tl,Cl,kl,Ll){var ys=u(h,bs,Tl,Cl,kl,Ll);return x[bs]=ys,ys}var B=Object.assign({},a,{hostNonTLS:h.wsHost+":"+h.wsPort,hostTLS:h.wsHost+":"+h.wssPort,httpPath:h.wsPath}),q=Object.assign({},B,{useTLS:!0}),J=Object.assign({},a,{hostNonTLS:h.httpHost+":"+h.httpPort,hostTLS:h.httpHost+":"+h.httpsPort,httpPath:h.httpPath}),Z={loop:!0,timeout:15e3,timeoutLimit:6e4},ut=new os({minPingDelay:1e4,maxPingDelay:h.activityTimeout}),ft=new os({lives:2,minPingDelay:1e4,maxPingDelay:h.activityTimeout}),Et=T("ws","ws",3,B,ut),ci=T("wss","ws",3,q,ut),yl=T("sockjs","sockjs",1,J),hs=T("xhr_streaming","xhr_streaming",1,J,ft),Sl=T("xdr_streaming","xdr_streaming",1,J,ft),fs=T("xhr_polling","xhr_polling",1,J),xl=T("xdr_polling","xdr_polling",1,J),ms=new je([Et],Z),Al=new je([ci],Z),El=new je([yl],Z),ps=new je([new An(En(hs),hs,Sl)],Z),gs=new je([new An(En(fs),fs,xl)],Z),vs=new je([new An(En(ps),new ji([ps,new ai(gs,{delay:4e3})]),gs)],Z),Vi=new An(En(vs),vs,El),Ui;return a.useTLS?Ui=new ji([ms,new ai(Vi,{delay:2e3})]):Ui=new ji([ms,new ai(Al,{delay:2e3}),new ai(Vi,{delay:5e3})]),new xa(new Ta(new An(En(Et),Ui,Vi)),x,{ttl:18e5,timeline:a.timeline,useTLS:a.useTLS})},ka=Ca,La=function(){var h=this;h.timeline.info(h.buildTimelineMessage({transport:h.name+(h.options.useTLS?"s":"")})),h.hooks.isInitialized()?h.changeState("initialized"):h.hooks.file?(h.changeState("initializing"),v.load(h.hooks.file,{useTLS:h.options.useTLS},function(a,u){h.hooks.isInitialized()?(h.changeState("initialized"),u(!0)):(a&&h.onError(a),h.onClose(),u(!1))})):h.onClose()},Ma={getRequest:function(h){var a=new window.XDomainRequest;return a.ontimeout=function(){h.emit("error",new S),h.close()},a.onerror=function(u){h.emit("error",u),h.close()},a.onprogress=function(){a.responseText&&a.responseText.length>0&&h.onChunk(200,a.responseText)},a.onload=function(){a.responseText&&a.responseText.length>0&&h.onChunk(200,a.responseText),h.emit("finished",200),h.close()},a},abortRequest:function(h){h.ontimeout=h.onerror=h.onprogress=h.onload=null,h.abort()}},Pa=Ma;const wa=256*1024;class Ra extends Gt{constructor(a,u,x){super(),this.hooks=a,this.method=u,this.url=x}start(a){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},tt.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(a)}close(){this.unloader&&(tt.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(a,u){for(;;){var x=this.advanceBuffer(u);if(x)this.emit("chunk",{status:a,data:x});else break}this.isBufferTooLong(u)&&this.emit("buffer_too_long")}advanceBuffer(a){var u=a.slice(this.position),x=u.indexOf(`
`);return x!==-1?(this.position+=x+1,u.slice(0,x)):null}isBufferTooLong(a){return this.position===a.length&&a.length>wa}}var Wi;(function(h){h[h.CONNECTING=0]="CONNECTING",h[h.OPEN=1]="OPEN",h[h.CLOSED=3]="CLOSED"})(Wi||(Wi={}));var He=Wi,Da=1;class Ia{constructor(a,u){this.hooks=a,this.session=cs(1e3)+"/"+Ba(8),this.location=Oa(u),this.readyState=He.CONNECTING,this.openStream()}send(a){return this.sendRaw(JSON.stringify([a]))}ping(){this.hooks.sendHeartbeat(this)}close(a,u){this.onClose(a,u,!0)}sendRaw(a){if(this.readyState===He.OPEN)try{return tt.createSocketRequest("POST",ls(_a(this.location,this.session))).start(a),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(a,u,x){this.closeStream(),this.readyState=He.CLOSED,this.onclose&&this.onclose({code:a,reason:u,wasClean:x})}onChunk(a){if(a.status===200){this.readyState===He.OPEN&&this.onActivity();var u,x=a.data.slice(0,1);switch(x){case"o":u=JSON.parse(a.data.slice(1)||"{}"),this.onOpen(u);break;case"a":u=JSON.parse(a.data.slice(1)||"[]");for(var T=0;T<u.length;T++)this.onEvent(u[T]);break;case"m":u=JSON.parse(a.data.slice(1)||"null"),this.onEvent(u);break;case"h":this.hooks.onHeartbeat(this);break;case"c":u=JSON.parse(a.data.slice(1)||"[]"),this.onClose(u[0],u[1],!0);break}}}onOpen(a){this.readyState===He.CONNECTING?(a&&a.hostname&&(this.location.base=Na(this.location.base,a.hostname)),this.readyState=He.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(a){this.readyState===He.OPEN&&this.onmessage&&this.onmessage({data:a})}onActivity(){this.onactivity&&this.onactivity()}onError(a){this.onerror&&this.onerror(a)}openStream(){this.stream=tt.createSocketRequest("POST",ls(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",a=>{this.onChunk(a)}),this.stream.bind("finished",a=>{this.hooks.onFinished(this,a)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(a){$.defer(()=>{this.onError(a),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function Oa(h){var a=/([^\?]*)\/*(\??.*)/.exec(h);return{base:a[1],queryString:a[2]}}function _a(h,a){return h.base+"/"+a+"/xhr_send"}function ls(h){var a=h.indexOf("?")===-1?"?":"&";return h+a+"t="+ +new Date+"&n="+Da++}function Na(h,a){var u=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(h);return u[1]+a+u[3]}function cs(h){return tt.randomInt(h)}function Ba(h){for(var a=[],u=0;u<h;u++)a.push(cs(32).toString(32));return a.join("")}var Fa=Ia,za={getReceiveURL:function(h,a){return h.base+"/"+a+"/xhr_streaming"+h.queryString},onHeartbeat:function(h){h.sendRaw("[]")},sendHeartbeat:function(h){h.sendRaw("[]")},onFinished:function(h,a){h.onClose(1006,"Connection interrupted ("+a+")",!1)}},ja=za,Ha={getReceiveURL:function(h,a){return h.base+"/"+a+"/xhr"+h.queryString},onHeartbeat:function(){},sendHeartbeat:function(h){h.sendRaw("[]")},onFinished:function(h,a){a===200?h.reconnect():h.onClose(1006,"Connection interrupted ("+a+")",!1)}},Wa=Ha,qa={getRequest:function(h){var a=tt.getXHRAPI(),u=new a;return u.onreadystatechange=u.onprogress=function(){switch(u.readyState){case 3:u.responseText&&u.responseText.length>0&&h.onChunk(u.status,u.responseText);break;case 4:u.responseText&&u.responseText.length>0&&h.onChunk(u.status,u.responseText),h.emit("finished",u.status),h.close();break}},u},abortRequest:function(h){h.onreadystatechange=null,h.abort()}},$a=qa,Va={createStreamingSocket(h){return this.createSocket(ja,h)},createPollingSocket(h){return this.createSocket(Wa,h)},createSocket(h,a){return new Fa(h,a)},createXHR(h,a){return this.createRequest($a,h,a)},createRequest(h,a,u){return new Ra(h,a,u)}},us=Va;us.createXDR=function(h,a){return this.createRequest(Pa,h,a)};var Ua=us,Ga={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:o,DependenciesReceivers:b,getDefaultStrategy:ka,Transports:ni,transportConnectionInitializer:La,HTTPFactory:Ua,TimelineTransport:nn,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(h){window.Pusher=h;var a=()=>{this.onDocumentBody(h.ready)};window.JSON?a():v.load("json2",{},a)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:D,jsonp:ze}},onDocumentBody(h){document.body?h():setTimeout(()=>{this.onDocumentBody(h)},0)},createJSONPRequest(h,a){return new Jn(h,a)},createScriptRequest(h){return new ge(h)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var h=this.getXHRAPI();return new h},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return ii},createWebSocket(h){var a=this.getWebSocketAPI();return new a(h)},createSocketRequest(h,a){if(this.isXHRSupported())return this.HTTPFactory.createXHR(h,a);if(this.isXDRSupported(a.indexOf("https:")===0))return this.HTTPFactory.createXDR(h,a);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var h=this.getXHRAPI();return!!h&&new h().withCredentials!==void 0},isXDRSupported(h){var a=h?"https:":"http:",u=this.getProtocol();return!!window.XDomainRequest&&u===a},addUnloadListener(h){window.addEventListener!==void 0?window.addEventListener("unload",h,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",h)},removeUnloadListener(h){window.addEventListener!==void 0?window.removeEventListener("unload",h,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",h)},randomInt(h){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*h)}},tt=Ga,qi;(function(h){h[h.ERROR=3]="ERROR",h[h.INFO=6]="INFO",h[h.DEBUG=7]="DEBUG"})(qi||(qi={}));var li=qi;class Xa{constructor(a,u,x){this.key=a,this.session=u,this.events=[],this.options=x||{},this.sent=0,this.uniqueID=0}log(a,u){a<=this.options.level&&(this.events.push(W({},u,{timestamp:$.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(a){this.log(li.ERROR,a)}info(a){this.log(li.INFO,a)}debug(a){this.log(li.DEBUG,a)}isEmpty(){return this.events.length===0}send(a,u){var x=W({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],a(x,(T,B)=>{T||this.sent++,u&&u(T,B)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class Ya{constructor(a,u,x,T){this.name=a,this.priority=u,this.transport=x,this.options=T||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(a,u){if(this.isSupported()){if(this.priority<a)return ds(new E,u)}else return ds(new N,u);var x=!1,T=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),B=null,q=function(){T.unbind("initialized",q),T.connect()},J=function(){B=xe.createHandshake(T,function(Et){x=!0,ft(),u(null,Et)})},Z=function(Et){ft(),u(Et)},ut=function(){ft();var Et;Et=ie(T),u(new k(Et))},ft=function(){T.unbind("initialized",q),T.unbind("open",J),T.unbind("error",Z),T.unbind("closed",ut)};return T.bind("initialized",q),T.bind("open",J),T.bind("error",Z),T.bind("closed",ut),T.initialize(),{abort:()=>{x||(ft(),B?B.close():T.close())},forceMinPriority:Et=>{x||this.priority<Et&&(B?B.close():T.close())}}}}function ds(h,a){return $.defer(function(){a(h)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:Ja}=tt;var Ka=function(h,a,u,x,T,B){var q=Ja[u];if(!q)throw new R(u);var J=(!h.enabledTransports||Q(h.enabledTransports,a)!==-1)&&(!h.disabledTransports||Q(h.disabledTransports,a)===-1),Z;return J?(T=Object.assign({ignoreNullOrigin:h.ignoreNullOrigin},T),Z=new Ya(a,x,B?B.getAssistant(q):q,T)):Z=Qa,Z},Qa={isSupported:function(){return!1},connect:function(h,a){var u=$.defer(function(){a(new N)});return{abort:function(){u.ensureAborted()},forceMinPriority:function(){}}}};function Za(h){if(h==null)throw"You must pass an options object";if(h.cluster==null)throw"Options object must provide a cluster";"disableStats"in h&&lt.warn("The disableStats option is deprecated in favor of enableStats")}const tl=(h,a)=>{var u="socket_id="+encodeURIComponent(h.socketId);for(var x in a.params)u+="&"+encodeURIComponent(x)+"="+encodeURIComponent(a.params[x]);if(a.paramsProvider!=null){let T=a.paramsProvider();for(var x in T)u+="&"+encodeURIComponent(x)+"="+encodeURIComponent(T[x])}return u};var el=h=>{if(typeof tt.getAuthorizers()[h.transport]>"u")throw`'${h.transport}' is not a recognized auth transport`;return(a,u)=>{const x=tl(a,h);tt.getAuthorizers()[h.transport](tt,x,h,g.UserAuthentication,u)}};const nl=(h,a)=>{var u="socket_id="+encodeURIComponent(h.socketId);u+="&channel_name="+encodeURIComponent(h.channelName);for(var x in a.params)u+="&"+encodeURIComponent(x)+"="+encodeURIComponent(a.params[x]);if(a.paramsProvider!=null){let T=a.paramsProvider();for(var x in T)u+="&"+encodeURIComponent(x)+"="+encodeURIComponent(T[x])}return u};var il=h=>{if(typeof tt.getAuthorizers()[h.transport]>"u")throw`'${h.transport}' is not a recognized auth transport`;return(a,u)=>{const x=nl(a,h);tt.getAuthorizers()[h.transport](tt,x,h,g.ChannelAuthorization,u)}};const rl=(h,a,u)=>{const x={authTransport:a.transport,authEndpoint:a.endpoint,auth:{params:a.params,headers:a.headers}};return(T,B)=>{const q=h.channel(T.channelName);u(q,x).authorize(T.socketId,B)}};function sl(h,a){let u={activityTimeout:h.activityTimeout||l.activityTimeout,cluster:h.cluster,httpPath:h.httpPath||l.httpPath,httpPort:h.httpPort||l.httpPort,httpsPort:h.httpsPort||l.httpsPort,pongTimeout:h.pongTimeout||l.pongTimeout,statsHost:h.statsHost||l.stats_host,unavailableTimeout:h.unavailableTimeout||l.unavailableTimeout,wsPath:h.wsPath||l.wsPath,wsPort:h.wsPort||l.wsPort,wssPort:h.wssPort||l.wssPort,enableStats:ul(h),httpHost:ol(h),useTLS:cl(h),wsHost:al(h),userAuthenticator:dl(h),channelAuthorizer:fl(h,a)};return"disabledTransports"in h&&(u.disabledTransports=h.disabledTransports),"enabledTransports"in h&&(u.enabledTransports=h.enabledTransports),"ignoreNullOrigin"in h&&(u.ignoreNullOrigin=h.ignoreNullOrigin),"timelineParams"in h&&(u.timelineParams=h.timelineParams),"nacl"in h&&(u.nacl=h.nacl),u}function ol(h){return h.httpHost?h.httpHost:h.cluster?`sockjs-${h.cluster}.pusher.com`:l.httpHost}function al(h){return h.wsHost?h.wsHost:ll(h.cluster)}function ll(h){return`ws-${h}.pusher.com`}function cl(h){return tt.getProtocol()==="https:"?!0:h.forceTLS!==!1}function ul(h){return"enableStats"in h?h.enableStats:"disableStats"in h?!h.disableStats:!1}function dl(h){const a=Object.assign(Object.assign({},l.userAuthentication),h.userAuthentication);return"customHandler"in a&&a.customHandler!=null?a.customHandler:el(a)}function hl(h,a){let u;return"channelAuthorization"in h?u=Object.assign(Object.assign({},l.channelAuthorization),h.channelAuthorization):(u={transport:h.authTransport||l.authTransport,endpoint:h.authEndpoint||l.authEndpoint},"auth"in h&&("params"in h.auth&&(u.params=h.auth.params),"headers"in h.auth&&(u.headers=h.auth.headers)),"authorizer"in h&&(u.customHandler=rl(a,u,h.authorizer))),u}function fl(h,a){const u=hl(h,a);return"customHandler"in u&&u.customHandler!=null?u.customHandler:il(u)}class ml extends Gt{constructor(a){super(function(u,x){lt.debug(`No callbacks on watchlist events for ${u}`)}),this.pusher=a,this.bindWatchlistInternalEvent()}handleEvent(a){a.data.events.forEach(u=>{this.emit(u.name,u)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",a=>{var u=a.event;u==="pusher_internal:watchlist_events"&&this.handleEvent(a)})}}function pl(){let h,a;return{promise:new Promise((x,T)=>{h=x,a=T}),resolve:h,reject:a}}var gl=pl;class vl extends Gt{constructor(a){super(function(u,x){lt.debug("No callbacks on user for "+u)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(u,x)=>{if(u){lt.warn(`Error during signin: ${u}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:x.auth,user_data:x.user_data})},this.pusher=a,this.pusher.connection.bind("state_change",({previous:u,current:x})=>{u!=="connected"&&x==="connected"&&this._signin(),u==="connected"&&x!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new ml(a),this.pusher.connection.bind("message",u=>{var x=u.event;x==="pusher:signin_success"&&this._onSigninSuccess(u.data),this.serverToUserChannel&&this.serverToUserChannel.name===u.channel&&this.serverToUserChannel.handleEvent(u)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(a){try{this.user_data=JSON.parse(a.user_data)}catch{lt.error(`Failed parsing user data after signin: ${a.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){lt.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const a=u=>{u.subscriptionPending&&u.subscriptionCancelled?u.reinstateSubscription():!u.subscriptionPending&&this.pusher.connection.state==="connected"&&u.subscribe()};this.serverToUserChannel=new V(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((u,x)=>{u.indexOf("pusher_internal:")===0||u.indexOf("pusher:")===0||this.emit(u,x)}),a(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:a,resolve:u}=gl();a.done=!1;const x=()=>{a.done=!0};a.then(x).catch(x),this.signinDonePromise=a,this._signinDoneResolve=u}}class Dt{static ready(){Dt.isReady=!0;for(var a=0,u=Dt.instances.length;a<u;a++)Dt.instances[a].connect()}static getClientFeatures(){return Bt(le({ws:tt.Transports.ws},function(a){return a.isSupported({})}))}constructor(a,u){bl(a),Za(u),this.key=a,this.config=sl(u,this),this.channels=xe.createChannels(),this.global_emitter=new Gt,this.sessionID=tt.randomInt(1e9),this.timeline=new Xa(this.key,this.sessionID,{cluster:this.config.cluster,features:Dt.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:li.INFO,version:l.VERSION}),this.config.enableStats&&(this.timelineSender=xe.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+tt.TimelineTransport.name}));var x=T=>tt.getDefaultStrategy(this.config,T,Ka);this.connection=xe.createConnectionManager(this.key,{getStrategy:x,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",T=>{var B=T.event,q=B.indexOf("pusher_internal:")===0;if(T.channel){var J=this.channel(T.channel);J&&J.handleEvent(T)}q||this.global_emitter.emit(T.event,T.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",T=>{lt.warn(T)}),Dt.instances.push(this),this.timeline.info({instances:Dt.instances.length}),this.user=new vl(this),Dt.isReady&&this.connect()}channel(a){return this.channels.find(a)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var a=this.connection.isUsingTLS(),u=this.timelineSender;this.timelineSenderTimer=new Ct(6e4,function(){u.send(a)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(a,u,x){return this.global_emitter.bind(a,u,x),this}unbind(a,u,x){return this.global_emitter.unbind(a,u,x),this}bind_global(a){return this.global_emitter.bind_global(a),this}unbind_global(a){return this.global_emitter.unbind_global(a),this}unbind_all(a){return this.global_emitter.unbind_all(),this}subscribeAll(){var a;for(a in this.channels.channels)this.channels.channels.hasOwnProperty(a)&&this.subscribe(a)}subscribe(a){var u=this.channels.add(a,this);return u.subscriptionPending&&u.subscriptionCancelled?u.reinstateSubscription():!u.subscriptionPending&&this.connection.state==="connected"&&u.subscribe(),u}unsubscribe(a){var u=this.channels.find(a);u&&u.subscriptionPending?u.cancelSubscription():(u=this.channels.remove(a),u&&u.subscribed&&u.unsubscribe())}send_event(a,u,x){return this.connection.send_event(a,u,x)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Dt.instances=[],Dt.isReady=!1,Dt.logToConsole=!1,Dt.Runtime=tt,Dt.ScriptReceivers=tt.ScriptReceivers,Dt.DependenciesReceivers=tt.DependenciesReceivers,Dt.auth_callbacks=tt.auth_callbacks;var $i=i.default=Dt;function bl(h){if(h==null)throw"You must pass your app key when you instantiate Pusher."}tt.setup(Dt)}])})})(vo);var Hl=vo.exports;const Wl=jl(Hl);window.Pusher=Wl;window.Echo=new zl({broadcaster:"pusher",key:"1b532c8a94e78a812ec3",cluster:"ap2",forceTLS:!0});var ql="2.1.15";const Ue="[data-trix-attachment]",Ur={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},Wt={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(e){return As(e.parentNode)===Wt[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(e){return As(e.parentNode)===Wt[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},As=e=>{var t;return e==null||(t=e.tagName)===null||t===void 0?void 0:t.toLowerCase()},Es=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),Gi=Es&&parseInt(Es[1]);var Gn={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:Gi&&Gi>12,samsungAndroid:Gi&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:typeof InputEvent<"u"&&["data","getTargetRanges","inputType"].every(e=>e in InputEvent.prototype)},bo={ADD_ATTR:["language"],SAFE_FOR_XML:!1,RETURN_DOM:!0},et={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"};const $l=[et.bytes,et.KB,et.MB,et.GB,et.TB,et.PB];var yo={prefix:"IEC",precision:2,formatter(e){switch(e){case 0:return"0 ".concat(et.bytes);case 1:return"1 ".concat(et.byte);default:let t;this.prefix==="SI"?t=1e3:this.prefix==="IEC"&&(t=1024);const n=Math.floor(Math.log(e)/Math.log(t)),i=(e/Math.pow(t,n)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(i," ").concat($l[n])}}};const Pi="\uFEFF",_e="",So=function(e){for(const t in e){const n=e[t];this[t]=n}return this},Gr=document.documentElement,Vl=Gr.matches,bt=function(e){let{onElement:t,matchingSelector:n,withCallback:i,inPhase:r,preventDefault:s,times:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=t||Gr,l=n,m=r==="capturing",b=function(v){o!=null&&--o==0&&b.destroy();const y=Be(v.target,{matchingSelector:l});y!=null&&(i==null||i.call(y,v,y),s&&v.preventDefault())};return b.destroy=()=>c.removeEventListener(e,b,m),c.addEventListener(e,b,m),b},_n=function(e){let{onElement:t,bubbles:n,cancelable:i,attributes:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=t??Gr;n=n!==!1,i=i!==!1;const o=document.createEvent("Events");return o.initEvent(e,n,i),r!=null&&So.call(o,r),s.dispatchEvent(o)},xo=function(e,t){if((e==null?void 0:e.nodeType)===1)return Vl.call(e,t)},Be=function(e){let{matchingSelector:t,untilNode:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.parentNode;if(e!=null){if(t==null)return e;if(e.closest&&n==null)return e.closest(t);for(;e&&e!==n;){if(xo(e,t))return e;e=e.parentNode}}},Xr=e=>document.activeElement!==e&&Ve(e,document.activeElement),Ve=function(e,t){if(e&&t)for(;t;){if(t===e)return!0;t=t.parentNode}},Xi=function(e){var t;if((t=e)===null||t===void 0||!t.parentNode)return;let n=0;for(e=e.previousSibling;e;)n++,e=e.previousSibling;return n},Fe=e=>{var t;return e==null||(t=e.parentNode)===null||t===void 0?void 0:t.removeChild(e)},xi=function(e){let{onlyNodesOfType:t,usingFilter:n,expandEntityReferences:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(()=>{switch(t){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(e,r,n??null,i===!0)},Ht=e=>{var t;return e==null||(t=e.tagName)===null||t===void 0?void 0:t.toLowerCase()},st=function(e){let t,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof e=="object"?(i=e,e=i.tagName):i={attributes:i};const r=document.createElement(e);if(i.editable!=null&&(i.attributes==null&&(i.attributes={}),i.attributes.contenteditable=i.editable),i.attributes)for(t in i.attributes)n=i.attributes[t],r.setAttribute(t,n);if(i.style)for(t in i.style)n=i.style[t],r.style[t]=n;if(i.data)for(t in i.data)n=i.data[t],r.dataset[t]=n;return i.className&&i.className.split(" ").forEach(s=>{r.classList.add(s)}),i.textContent&&(r.textContent=i.textContent),i.childNodes&&[].concat(i.childNodes).forEach(s=>{r.appendChild(s)}),r};let Tn;const Nn=function(){if(Tn!=null)return Tn;Tn=[];for(const e in Wt){const t=Wt[e];t.tagName&&Tn.push(t.tagName)}return Tn},Yi=e=>on(e==null?void 0:e.firstChild),Ts=function(e){let{strict:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return t?on(e):on(e)||!on(e.firstChild)&&function(n){return Nn().includes(Ht(n))&&!Nn().includes(Ht(n.firstChild))}(e)},on=e=>Ul(e)&&(e==null?void 0:e.data)==="block",Ul=e=>(e==null?void 0:e.nodeType)===Node.COMMENT_NODE,an=function(e){let{name:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e)return Bn(e)?e.data===Pi?!t||e.parentNode.dataset.trixCursorTarget===t:void 0:an(e.firstChild)},Ge=e=>xo(e,Ue),Ao=e=>Bn(e)&&(e==null?void 0:e.data)==="",Bn=e=>(e==null?void 0:e.nodeType)===Node.TEXT_NODE,Yr={level2Enabled:!0,getLevel(){return this.level2Enabled&&Gn.supportsInputEvents?2:0},pickFiles(e){const t=st("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});t.addEventListener("change",()=>{e(t.files),Fe(t)}),Fe(document.getElementById(this.fileInputId)),document.body.appendChild(t),t.click()}};var pi={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:`
`},Ye={bold:{tagName:"strong",inheritable:!0,parser(e){const t=window.getComputedStyle(e);return t.fontWeight==="bold"||t.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:e=>window.getComputedStyle(e).fontStyle==="italic"},href:{groupTagName:"a",parser(e){const t="a:not(".concat(Ue,")"),n=e.closest(t);if(n)return n.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},Eo={getDefaultHTML:()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(et.bold,'" tabindex="-1">').concat(et.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(et.italic,'" tabindex="-1">').concat(et.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(et.strike,'" tabindex="-1">').concat(et.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(et.link,'" tabindex="-1">').concat(et.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(et.heading1,'" tabindex="-1">').concat(et.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(et.quote,'" tabindex="-1">').concat(et.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(et.code,'" tabindex="-1">').concat(et.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(et.bullets,'" tabindex="-1">').concat(et.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(et.numbers,'" tabindex="-1">').concat(et.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(et.outdent,'" tabindex="-1">').concat(et.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(et.indent,'" tabindex="-1">').concat(et.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(et.attachFiles,'" tabindex="-1">').concat(et.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(et.undo,'" tabindex="-1">').concat(et.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(et.redo,'" tabindex="-1">').concat(et.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(et.urlPlaceholder,'" aria-label="').concat(et.url,`" data-trix-validate-href required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(et.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(et.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)};const Lr={interval:5e3};var Xn=Object.freeze({__proto__:null,attachments:Ur,blockAttributes:Wt,browser:Gn,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},dompurify:bo,fileSize:yo,input:Yr,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:et,parser:pi,textAttributes:Ye,toolbar:Eo,undo:Lr});class Tt{static proxyMethod(t){const{name:n,toMethod:i,toProperty:r,optional:s}=Gl(t);this.prototype[n]=function(){let o,c;var l,m;return i?c=s?(l=this[i])===null||l===void 0?void 0:l.call(this):this[i]():r&&(c=this[r]),s?(o=(m=c)===null||m===void 0?void 0:m[n],o?Cs.call(o,c,arguments):void 0):(o=c[n],Cs.call(o,c,arguments))}}}const Gl=function(e){const t=e.match(Xl);if(!t)throw new Error("can't parse @proxyMethod expression: ".concat(e));const n={name:t[4]};return t[2]!=null?n.toMethod=t[1]:n.toProperty=t[1],t[3]!=null&&(n.optional=!0),n},{apply:Cs}=Function.prototype,Xl=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$");var Ji,Ki,Qi;class $n extends Tt{static box(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t instanceof this?t:this.fromUCS2String(t==null?void 0:t.toString())}static fromUCS2String(t){return new this(t,Mr(t))}static fromCodepoints(t){return new this(Pr(t),t)}constructor(t,n){super(...arguments),this.ucs2String=t,this.codepoints=n,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(t){return Pr(this.codepoints.slice(0,Math.max(0,t))).length}offsetFromUCS2Offset(t){return Mr(this.ucs2String.slice(0,Math.max(0,t))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(t){return this.slice(t,t+1)}isEqualTo(t){return this.constructor.box(t).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}}const Yl=((Ji=Array.from)===null||Ji===void 0?void 0:Ji.call(Array,"").length)===1,Jl=((Ki=" ".codePointAt)===null||Ki===void 0?void 0:Ki.call(" ",0))!=null,Kl=((Qi=String.fromCodePoint)===null||Qi===void 0?void 0:Qi.call(String,32,128124))===" ";let Mr,Pr;Mr=Yl&&Jl?e=>Array.from(e).map(t=>t.codePointAt(0)):function(e){const t=[];let n=0;const{length:i}=e;for(;n<i;){let r=e.charCodeAt(n++);if(55296<=r&&r<=56319&&n<i){const s=e.charCodeAt(n++);(64512&s)==56320?r=((1023&r)<<10)+(1023&s)+65536:n--}t.push(r)}return t},Pr=Kl?e=>String.fromCodePoint(...Array.from(e||[])):function(e){return(()=>{const t=[];return Array.from(e).forEach(n=>{let i="";n>65535&&(n-=65536,i+=String.fromCharCode(n>>>10&1023|55296),n=56320|1023&n),t.push(i+String.fromCharCode(n))}),t})().join("")};let Ql=0;class Qe extends Tt{static fromJSONString(t){return this.fromJSON(JSON.parse(t))}constructor(){super(...arguments),this.id=++Ql}hasSameConstructorAs(t){return this.constructor===(t==null?void 0:t.constructor)}isEqualTo(t){return this===t}inspect(){const t=[],n=this.contentsForInspection()||{};for(const i in n){const r=n[i];t.push("".concat(i,"=").concat(r))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(t.length?" ".concat(t.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return $n.box(this)}getCacheKey(){return this.id.toString()}}const Je=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Jr=function(e){const t=e.slice(0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.splice(...i),t},Zl=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,tc=function(){const e=st("input",{dir:"auto",name:"x",dirName:"x.dir"}),t=st("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),n=st("form");n.appendChild(e),n.appendChild(t);const i=function(){try{return new FormData(n).has(t.dirName)}catch{return!1}}(),r=function(){try{return e.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return i?function(s){return t.value=s,new FormData(n).get(t.dirName)}:r?function(s){return e.value=s,e.matches(":dir(rtl)")?"rtl":"ltr"}:function(s){const o=s.trim().charAt(0);return Zl.test(o)?"rtl":"ltr"}}();let Zi=null,tr=null,er=null,ui=null;const wr=()=>(Zi||(Zi=nc().concat(ec())),Zi),At=e=>Wt[e],ec=()=>(tr||(tr=Object.keys(Wt)),tr),Rr=e=>Ye[e],nc=()=>(er||(er=Object.keys(Ye)),er),To=function(e,t){ic(e).textContent=t.replace(/%t/g,e)},ic=function(e){const t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("data-tag-name",e.toLowerCase());const n=rc();return n&&t.setAttribute("nonce",n),document.head.insertBefore(t,document.head.firstChild),t},rc=function(){const e=ks("trix-csp-nonce")||ks("csp-nonce");if(e){const{nonce:t,content:n}=e;return t==""?n:t}},ks=e=>document.head.querySelector("meta[name=".concat(e,"]")),Ls={"application/x-trix-feature-detection":"test"},Co=function(e){const t=e.getData("text/plain"),n=e.getData("text/html");if(!t||!n)return t==null?void 0:t.length;{const{body:i}=new DOMParser().parseFromString(n,"text/html");if(i.textContent===t)return!i.querySelector("*")}},ko=/Mac|^iP/.test(navigator.platform)?e=>e.metaKey:e=>e.ctrlKey,Kr=e=>setTimeout(e,1),Lo=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={};for(const n in e){const i=e[n];t[n]=i}return t},dn=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0},mt=function(e){if(e!=null)return Array.isArray(e)||(e=[e,e]),[Ms(e[0]),Ms(e[1]!=null?e[1]:e[0])]},Ce=function(e){if(e==null)return;const[t,n]=mt(e);return Dr(t,n)},Ai=function(e,t){if(e==null||t==null)return;const[n,i]=mt(e),[r,s]=mt(t);return Dr(n,r)&&Dr(i,s)},Ms=function(e){return typeof e=="number"?e:Lo(e)},Dr=function(e,t){return typeof e=="number"?e===t:dn(e,t)};class Mo extends Tt{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(t){if(!this.selectionManagers.includes(t))return this.selectionManagers.push(t),this.start()}unregisterSelectionManager(t){if(this.selectionManagers=this.selectionManagers.filter(n=>n!==t),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(t=>t.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}}const Ke=new Mo,Po=function(){const e=window.getSelection();if(e.rangeCount>0)return e},Fn=function(){var e;const t=(e=Po())===null||e===void 0?void 0:e.getRangeAt(0);if(t&&!sc(t))return t},wo=function(e){const t=window.getSelection();return t.removeAllRanges(),t.addRange(e),Ke.update()},sc=e=>Ps(e.startContainer)||Ps(e.endContainer),Ps=e=>!Object.getPrototypeOf(e),Rn=e=>e.replace(new RegExp("".concat(Pi),"g"),"").replace(new RegExp("".concat(_e),"g")," "),Qr=new RegExp("[^\\S".concat(_e,"]")),Zr=e=>e.replace(new RegExp("".concat(Qr.source),"g")," ").replace(/\ {2,}/g," "),ws=function(e,t){if(e.isEqualTo(t))return["",""];const n=nr(e,t),{length:i}=n.utf16String;let r;if(i){const{offset:s}=n,o=e.codepoints.slice(0,s).concat(e.codepoints.slice(s+i));r=nr(t,$n.fromCodepoints(o))}else r=nr(t,e);return[n.utf16String.toString(),r.utf16String.toString()]},nr=function(e,t){let n=0,i=e.length,r=t.length;for(;n<i&&e.charAt(n).isEqualTo(t.charAt(n));)n++;for(;i>n+1&&e.charAt(i-1).isEqualTo(t.charAt(r-1));)i--,r--;return{utf16String:e.slice(n,i),offset:n}};class ee extends Qe{static fromCommonAttributesOfObjects(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!t.length)return new this;let n=Cn(t[0]),i=n.getKeys();return t.slice(1).forEach(r=>{i=n.getKeysCommonToHash(Cn(r)),n=n.slice(i)}),n}static box(t){return Cn(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=gi(t)}add(t,n){return this.merge(oc(t,n))}remove(t){return new ee(gi(this.values,t))}get(t){return this.values[t]}has(t){return t in this.values}merge(t){return new ee(ac(this.values,lc(t)))}slice(t){const n={};return Array.from(t).forEach(i=>{this.has(i)&&(n[i]=this.values[i])}),new ee(n)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(t){return t=Cn(t),this.getKeys().filter(n=>this.values[n]===t.values[n])}isEqualTo(t){return Je(this.toArray(),Cn(t).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){const t=[];for(const n in this.values){const i=this.values[n];t.push(t.push(n,i))}this.array=t.slice(0)}return this.array}toObject(){return gi(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}}const oc=function(e,t){const n={};return n[e]=t,n},ac=function(e,t){const n=gi(e);for(const i in t){const r=t[i];n[i]=r}return n},gi=function(e,t){const n={};return Object.keys(e).sort().forEach(i=>{i!==t&&(n[i]=e[i])}),n},Cn=function(e){return e instanceof ee?e:new ee(e)},lc=function(e){return e instanceof ee?e.values:e};class ts{static groupObjects(){let t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:i,asTree:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r&&i==null&&(i=0);const s=[];return Array.from(n).forEach(o=>{var c;if(t){var l,m,b;if((l=o.canBeGrouped)!==null&&l!==void 0&&l.call(o,i)&&(m=(b=t[t.length-1]).canBeGroupedWith)!==null&&m!==void 0&&m.call(b,o,i))return void t.push(o);s.push(new this(t,{depth:i,asTree:r})),t=null}(c=o.canBeGrouped)!==null&&c!==void 0&&c.call(o,i)?t=[o]:s.push(o)}),t&&s.push(new this(t,{depth:i,asTree:r})),s}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:n,asTree:i}=arguments.length>1?arguments[1]:void 0;this.objects=t,i&&(this.depth=n,this.objects=this.constructor.groupObjects(this.objects,{asTree:i,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){const t=["objectGroup"];return Array.from(this.getObjects()).forEach(n=>{t.push(n.getCacheKey())}),t.join("/")}}class cc extends Tt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(t).forEach(n=>{const i=JSON.stringify(n);this.objects[i]==null&&(this.objects[i]=n)})}find(t){const n=JSON.stringify(t);return this.objects[n]}}class uc{constructor(t){this.reset(t)}add(t){const n=Rs(t);this.elements[n]=t}remove(t){const n=Rs(t),i=this.elements[n];if(i)return delete this.elements[n],i}reset(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(t).forEach(n=>{this.add(n)}),t}}const Rs=e=>e.dataset.trixStoreKey;class Ei extends Tt{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((t,n)=>(this.performing=!0,this.perform((i,r)=>{this.succeeded=i,this.performing=!1,this.performed=!0,this.succeeded?t(r):n(r)})))),this.promise}perform(t){return t(!1)}release(){var t,n;(t=this.promise)===null||t===void 0||(n=t.cancel)===null||n===void 0||n.call(t),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}}Ei.proxyMethod("getPromise().then"),Ei.proxyMethod("getPromise().catch");class Ze extends Tt{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=t,this.options=n,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(t=>t.cloneNode(!0))}invalidate(){var t;return this.nodes=null,this.childViews=[],(t=this.parentView)===null||t===void 0?void 0:t.invalidate()}invalidateViewForObject(t){var n;return(n=this.findViewForObject(t))===null||n===void 0?void 0:n.invalidate()}findOrCreateCachedChildView(t,n,i){let r=this.getCachedViewForObject(n);return r?this.recordChildView(r):(r=this.createChildView(...arguments),this.cacheViewForObject(r,n)),r}createChildView(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n instanceof ts&&(i.viewClass=t,t=dc);const r=new t(n,i);return this.recordChildView(r)}recordChildView(t){return t.parentView=this,t.rootView=this.rootView,this.childViews.push(t),t}getAllChildViews(){let t=[];return this.childViews.forEach(n=>{t.push(n),t=t.concat(n.getAllChildViews())}),t}findElement(){return this.findElementForObject(this.object)}findElementForObject(t){const n=t==null?void 0:t.id;if(n)return this.rootView.element.querySelector("[data-trix-id='".concat(n,"']"))}findViewForObject(t){for(const n of this.getAllChildViews())if(n.object===t)return n}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(t){var n;return(n=this.getViewCache())===null||n===void 0?void 0:n[t.getCacheKey()]}cacheViewForObject(t,n){const i=this.getViewCache();i&&(i[n.getCacheKey()]=t)}garbageCollectCachedViews(){const t=this.getViewCache();if(t){const n=this.getAllChildViews().concat(this).map(i=>i.object.getCacheKey());for(const i in t)n.includes(i)||delete t[i]}}}class dc extends Ze{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(t=>{this.findOrCreateCachedChildView(this.viewClass,t,this.options)}),this.childViews}createNodes(){const t=this.createContainerElement();return this.getChildViews().forEach(n=>{Array.from(n.getNodes()).forEach(i=>{t.appendChild(i)})}),[t]}createContainerElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(t)}}/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:Ro,setPrototypeOf:Ds,isFrozen:hc,getPrototypeOf:fc,getOwnPropertyDescriptor:mc}=Object;let{freeze:$t,seal:ae,create:Do}=Object,{apply:Ir,construct:Or}=typeof Reflect<"u"&&Reflect;$t||($t=function(e){return e}),ae||(ae=function(e){return e}),Ir||(Ir=function(e,t,n){return e.apply(t,n)}),Or||(Or=function(e,t){return new e(...t)});const di=Vt(Array.prototype.forEach),pc=Vt(Array.prototype.lastIndexOf),Is=Vt(Array.prototype.pop),kn=Vt(Array.prototype.push),gc=Vt(Array.prototype.splice),vi=Vt(String.prototype.toLowerCase),ir=Vt(String.prototype.toString),Os=Vt(String.prototype.match),Ln=Vt(String.prototype.replace),vc=Vt(String.prototype.indexOf),bc=Vt(String.prototype.trim),me=Vt(Object.prototype.hasOwnProperty),jt=Vt(RegExp.prototype.test),Mn=(_s=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Or(_s,t)});var _s;function Vt(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Ir(e,t,i)}}function ot(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vi;Ds&&Ds(e,null);let i=t.length;for(;i--;){let r=t[i];if(typeof r=="string"){const s=n(r);s!==r&&(hc(t)||(t[i]=s),r=s)}e[r]=!0}return e}function yc(e){for(let t=0;t<e.length;t++)me(e,t)||(e[t]=null);return e}function qe(e){const t=Do(null);for(const[n,i]of Ro(e))me(e,n)&&(Array.isArray(i)?t[n]=yc(i):i&&typeof i=="object"&&i.constructor===Object?t[n]=qe(i):t[n]=i);return t}function Pn(e,t){for(;e!==null;){const n=mc(e,t);if(n){if(n.get)return Vt(n.get);if(typeof n.value=="function")return Vt(n.value)}e=fc(e)}return function(){return null}}const Ns=$t(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rr=$t(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sr=$t(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Sc=$t(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),or=$t(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xc=$t(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Bs=$t(["#text"]),Fs=$t(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ar=$t(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),zs=$t(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hi=$t(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ac=ae(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ec=ae(/<%[\w\W]*|[\w\W]*%>/gm),Tc=ae(/\$\{[\w\W]*/gm),Cc=ae(/^data-[\-\w.\u00B7-\uFFFF]+$/),kc=ae(/^aria-[\-\w]+$/),Io=ae(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Lc=ae(/^(?:\w+script|data):/i),Mc=ae(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Oo=ae(/^html$/i),Pc=ae(/^[a-z][.\w]*(-[.\w]+)+$/i);var js=Object.freeze({__proto__:null,ARIA_ATTR:kc,ATTR_WHITESPACE:Mc,CUSTOM_ELEMENT:Pc,DATA_ATTR:Cc,DOCTYPE_NAME:Oo,ERB_EXPR:Ec,IS_ALLOWED_URI:Io,IS_SCRIPT_OR_DATA:Lc,MUSTACHE_EXPR:Ac,TMPLIT_EXPR:Tc});const wc=1,Rc=3,Dc=7,Ic=8,Oc=9,_c=function(){return typeof window>"u"?null:window};var Ti=function e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_c();const n=C=>e(C);if(n.version="3.2.5",n.removed=[],!t||!t.document||t.document.nodeType!==Oc||!t.Element)return n.isSupported=!1,n;let{document:i}=t;const r=i,s=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:c,Node:l,Element:m,NodeFilter:b,NamedNodeMap:v=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:y,DOMParser:d,trustedTypes:f}=t,g=m.prototype,A=Pn(g,"cloneNode"),p=Pn(g,"remove"),S=Pn(g,"nextSibling"),E=Pn(g,"childNodes"),k=Pn(g,"parentNode");if(typeof c=="function"){const C=i.createElement("template");C.content&&C.content.ownerDocument&&(i=C.content.ownerDocument)}let L,R="";const{implementation:N,createNodeIterator:M,createDocumentFragment:j,getElementsByTagName:D}=i,{importNode:w}=r;let P={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported=typeof Ro=="function"&&typeof k=="function"&&N&&N.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:O,ERB_EXPR:H,TMPLIT_EXPR:G,DATA_ATTR:_,ARIA_ATTR:I,IS_SCRIPT_OR_DATA:F,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:K}=js;let{IS_ALLOWED_URI:dt}=js,rt=null;const Ct=ot({},[...Ns,...rr,...sr,...or,...Bs]);let z=null;const $=ot({},[...Fs,...ar,...zs,...hi]);let W=Object.seal(Do(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),U=null,Q=null,ht=!0,Bt=!0,Ut=!1,Pt=!0,pt=!1,wt=!0,Ot=!1,le=!1,ne=!1,_t=!1,ce=!1,ue=!1,ke=!0,Le=!1,ie=!0,de=!1,lt={},Ft=null;const ze=ot({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ge=null;const Jn=ot({},["audio","video","img","source","image","track"]);let mn=null;const Kn=ot({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),nn="http://www.w3.org/1998/Math/MathML",Me="http://www.w3.org/2000/svg",Kt="http://www.w3.org/1999/xhtml";let Pe=Kt,pn=!1,gn=null;const Ni=ot({},[nn,Me,Kt],ir);let we=ot({},["mi","mo","mn","ms","mtext"]),Gt=ot({},["annotation-xml"]);const Bi=ot({},["title","style","font","a","script"]);let re=null;const Fi=["application/xhtml+xml","text/html"];let yt=null,Se=null;const Qn=i.createElement("form"),vn=function(C){return C instanceof RegExp||C instanceof Function},bn=function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!Se||Se!==C){if(C&&typeof C=="object"||(C={}),C=qe(C),re=Fi.indexOf(C.PARSER_MEDIA_TYPE)===-1?"text/html":C.PARSER_MEDIA_TYPE,yt=re==="application/xhtml+xml"?ir:vi,rt=me(C,"ALLOWED_TAGS")?ot({},C.ALLOWED_TAGS,yt):Ct,z=me(C,"ALLOWED_ATTR")?ot({},C.ALLOWED_ATTR,yt):$,gn=me(C,"ALLOWED_NAMESPACES")?ot({},C.ALLOWED_NAMESPACES,ir):Ni,mn=me(C,"ADD_URI_SAFE_ATTR")?ot(qe(Kn),C.ADD_URI_SAFE_ATTR,yt):Kn,ge=me(C,"ADD_DATA_URI_TAGS")?ot(qe(Jn),C.ADD_DATA_URI_TAGS,yt):Jn,Ft=me(C,"FORBID_CONTENTS")?ot({},C.FORBID_CONTENTS,yt):ze,U=me(C,"FORBID_TAGS")?ot({},C.FORBID_TAGS,yt):{},Q=me(C,"FORBID_ATTR")?ot({},C.FORBID_ATTR,yt):{},lt=!!me(C,"USE_PROFILES")&&C.USE_PROFILES,ht=C.ALLOW_ARIA_ATTR!==!1,Bt=C.ALLOW_DATA_ATTR!==!1,Ut=C.ALLOW_UNKNOWN_PROTOCOLS||!1,Pt=C.ALLOW_SELF_CLOSE_IN_ATTR!==!1,pt=C.SAFE_FOR_TEMPLATES||!1,wt=C.SAFE_FOR_XML!==!1,Ot=C.WHOLE_DOCUMENT||!1,_t=C.RETURN_DOM||!1,ce=C.RETURN_DOM_FRAGMENT||!1,ue=C.RETURN_TRUSTED_TYPE||!1,ne=C.FORCE_BODY||!1,ke=C.SANITIZE_DOM!==!1,Le=C.SANITIZE_NAMED_PROPS||!1,ie=C.KEEP_CONTENT!==!1,de=C.IN_PLACE||!1,dt=C.ALLOWED_URI_REGEXP||Io,Pe=C.NAMESPACE||Kt,we=C.MATHML_TEXT_INTEGRATION_POINTS||we,Gt=C.HTML_INTEGRATION_POINTS||Gt,W=C.CUSTOM_ELEMENT_HANDLING||{},C.CUSTOM_ELEMENT_HANDLING&&vn(C.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(W.tagNameCheck=C.CUSTOM_ELEMENT_HANDLING.tagNameCheck),C.CUSTOM_ELEMENT_HANDLING&&vn(C.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(W.attributeNameCheck=C.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),C.CUSTOM_ELEMENT_HANDLING&&typeof C.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(W.allowCustomizedBuiltInElements=C.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),pt&&(Bt=!1),ce&&(_t=!0),lt&&(rt=ot({},Bs),z=[],lt.html===!0&&(ot(rt,Ns),ot(z,Fs)),lt.svg===!0&&(ot(rt,rr),ot(z,ar),ot(z,hi)),lt.svgFilters===!0&&(ot(rt,sr),ot(z,ar),ot(z,hi)),lt.mathMl===!0&&(ot(rt,or),ot(z,zs),ot(z,hi))),C.ADD_TAGS&&(rt===Ct&&(rt=qe(rt)),ot(rt,C.ADD_TAGS,yt)),C.ADD_ATTR&&(z===$&&(z=qe(z)),ot(z,C.ADD_ATTR,yt)),C.ADD_URI_SAFE_ATTR&&ot(mn,C.ADD_URI_SAFE_ATTR,yt),C.FORBID_CONTENTS&&(Ft===ze&&(Ft=qe(Ft)),ot(Ft,C.FORBID_CONTENTS,yt)),ie&&(rt["#text"]=!0),Ot&&ot(rt,["html","head","body"]),rt.table&&(ot(rt,["tbody"]),delete U.tbody),C.TRUSTED_TYPES_POLICY){if(typeof C.TRUSTED_TYPES_POLICY.createHTML!="function")throw Mn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof C.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Mn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=C.TRUSTED_TYPES_POLICY,R=L.createHTML("")}else L===void 0&&(L=function(Y,V){if(typeof Y!="object"||typeof Y.createPolicy!="function")return null;let nt=null;const ct="data-tt-policy-suffix";V&&V.hasAttribute(ct)&&(nt=V.getAttribute(ct));const it="dompurify"+(nt?"#"+nt:"");try{return Y.createPolicy(it,{createHTML:St=>St,createScriptURL:St=>St})}catch{return console.warn("TrustedTypes policy "+it+" could not be created."),null}}(f,s)),L!==null&&typeof R=="string"&&(R=L.createHTML(""));$t&&$t(C),Se=C}},Zn=ot({},[...rr,...sr,...Sc]),ti=ot({},[...or,...xc]),zt=function(C){kn(n.removed,{element:C});try{k(C).removeChild(C)}catch{p(C)}},rn=function(C,Y){try{kn(n.removed,{attribute:Y.getAttributeNode(C),from:Y})}catch{kn(n.removed,{attribute:null,from:Y})}if(Y.removeAttribute(C),C==="is")if(_t||ce)try{zt(Y)}catch{}else try{Y.setAttribute(C,"")}catch{}},yn=function(C){let Y=null,V=null;if(ne)C="<remove></remove>"+C;else{const it=Os(C,/^[\r\n\t ]+/);V=it&&it[0]}re==="application/xhtml+xml"&&Pe===Kt&&(C='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+C+"</body></html>");const nt=L?L.createHTML(C):C;if(Pe===Kt)try{Y=new d().parseFromString(nt,re)}catch{}if(!Y||!Y.documentElement){Y=N.createDocument(Pe,"template",null);try{Y.documentElement.innerHTML=pn?R:nt}catch{}}const ct=Y.body||Y.documentElement;return C&&V&&ct.insertBefore(i.createTextNode(V),ct.childNodes[0]||null),Pe===Kt?D.call(Y,Ot?"html":"body")[0]:Ot?Y.documentElement:ct},ei=function(C){return M.call(C.ownerDocument||C,C,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT|b.SHOW_PROCESSING_INSTRUCTION|b.SHOW_CDATA_SECTION,null)},Sn=function(C){return C instanceof y&&(typeof C.nodeName!="string"||typeof C.textContent!="string"||typeof C.removeChild!="function"||!(C.attributes instanceof v)||typeof C.removeAttribute!="function"||typeof C.setAttribute!="function"||typeof C.namespaceURI!="string"||typeof C.insertBefore!="function"||typeof C.hasChildNodes!="function")},ni=function(C){return typeof l=="function"&&C instanceof l};function he(C,Y,V){di(C,nt=>{nt.call(n,Y,V,Se)})}const ii=function(C){let Y=null;if(he(P.beforeSanitizeElements,C,null),Sn(C))return zt(C),!0;const V=yt(C.nodeName);if(he(P.uponSanitizeElement,C,{tagName:V,allowedTags:rt}),C.hasChildNodes()&&!ni(C.firstElementChild)&&jt(/<[/\w!]/g,C.innerHTML)&&jt(/<[/\w!]/g,C.textContent)||C.nodeType===Dc||wt&&C.nodeType===Ic&&jt(/<[/\w]/g,C.data))return zt(C),!0;if(!rt[V]||U[V]){if(!U[V]&&xn(V)&&(W.tagNameCheck instanceof RegExp&&jt(W.tagNameCheck,V)||W.tagNameCheck instanceof Function&&W.tagNameCheck(V)))return!1;if(ie&&!Ft[V]){const nt=k(C)||C.parentNode,ct=E(C)||C.childNodes;if(ct&&nt)for(let it=ct.length-1;it>=0;--it){const St=A(ct[it],!0);St.__removalCount=(C.__removalCount||0)+1,nt.insertBefore(St,S(C))}}return zt(C),!0}return C instanceof m&&!function(nt){let ct=k(nt);ct&&ct.tagName||(ct={namespaceURI:Pe,tagName:"template"});const it=vi(nt.tagName),St=vi(ct.tagName);return!!gn[nt.namespaceURI]&&(nt.namespaceURI===Me?ct.namespaceURI===Kt?it==="svg":ct.namespaceURI===nn?it==="svg"&&(St==="annotation-xml"||we[St]):!!Zn[it]:nt.namespaceURI===nn?ct.namespaceURI===Kt?it==="math":ct.namespaceURI===Me?it==="math"&&Gt[St]:!!ti[it]:nt.namespaceURI===Kt?!(ct.namespaceURI===Me&&!Gt[St])&&!(ct.namespaceURI===nn&&!we[St])&&!ti[it]&&(Bi[it]||!Zn[it]):!(re!=="application/xhtml+xml"||!gn[nt.namespaceURI]))}(C)?(zt(C),!0):V!=="noscript"&&V!=="noembed"&&V!=="noframes"||!jt(/<\/no(script|embed|frames)/i,C.innerHTML)?(pt&&C.nodeType===Rc&&(Y=C.textContent,di([O,H,G],nt=>{Y=Ln(Y,nt," ")}),C.textContent!==Y&&(kn(n.removed,{element:C.cloneNode()}),C.textContent=Y)),he(P.afterSanitizeElements,C,null),!1):(zt(C),!0)},ri=function(C,Y,V){if(ke&&(Y==="id"||Y==="name")&&(V in i||V in Qn))return!1;if(!(Bt&&!Q[Y]&&jt(_,Y))){if(!(ht&&jt(I,Y))){if(!z[Y]||Q[Y]){if(!(xn(C)&&(W.tagNameCheck instanceof RegExp&&jt(W.tagNameCheck,C)||W.tagNameCheck instanceof Function&&W.tagNameCheck(C))&&(W.attributeNameCheck instanceof RegExp&&jt(W.attributeNameCheck,Y)||W.attributeNameCheck instanceof Function&&W.attributeNameCheck(Y))||Y==="is"&&W.allowCustomizedBuiltInElements&&(W.tagNameCheck instanceof RegExp&&jt(W.tagNameCheck,V)||W.tagNameCheck instanceof Function&&W.tagNameCheck(V))))return!1}else if(!mn[Y]){if(!jt(dt,Ln(V,X,""))){if((Y!=="src"&&Y!=="xlink:href"&&Y!=="href"||C==="script"||vc(V,"data:")!==0||!ge[C])&&!(Ut&&!jt(F,Ln(V,X,"")))){if(V)return!1}}}}}return!0},xn=function(C){return C!=="annotation-xml"&&Os(C,K)},ve=function(C){he(P.beforeSanitizeAttributes,C,null);const{attributes:Y}=C;if(!Y||Sn(C))return;const V={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0};let nt=Y.length;for(;nt--;){const ct=Y[nt],{name:it,namespaceURI:St,value:fe}=ct,Xt=yt(it);let Rt=it==="value"?fe:bc(fe);if(V.attrName=Xt,V.attrValue=Rt,V.keepAttr=!0,V.forceKeepAttr=void 0,he(P.uponSanitizeAttribute,C,V),Rt=V.attrValue,!Le||Xt!=="id"&&Xt!=="name"||(rn(it,C),Rt="user-content-"+Rt),wt&&jt(/((--!?|])>)|<\/(style|title)/i,Rt)){rn(it,C);continue}if(V.forceKeepAttr||(rn(it,C),!V.keepAttr))continue;if(!Pt&&jt(/\/>/i,Rt)){rn(it,C);continue}pt&&di([O,H,G],oi=>{Rt=Ln(Rt,oi," ")});const si=yt(C.nodeName);if(ri(si,Xt,Rt)){if(L&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!St)switch(f.getAttributeType(si,Xt)){case"TrustedHTML":Rt=L.createHTML(Rt);break;case"TrustedScriptURL":Rt=L.createScriptURL(Rt)}try{St?C.setAttributeNS(St,it,Rt):C.setAttribute(it,Rt),Sn(C)?zt(C):Is(n.removed)}catch{}}}he(P.afterSanitizeAttributes,C,null)},zi=function C(Y){let V=null;const nt=ei(Y);for(he(P.beforeSanitizeShadowDOM,Y,null);V=nt.nextNode();)he(P.uponSanitizeShadowNode,V,null),ii(V),ve(V),V.content instanceof o&&C(V.content);he(P.afterSanitizeShadowDOM,Y,null)};return n.sanitize=function(C){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=null,nt=null,ct=null,it=null;if(pn=!C,pn&&(C="<!-->"),typeof C!="string"&&!ni(C)){if(typeof C.toString!="function")throw Mn("toString is not a function");if(typeof(C=C.toString())!="string")throw Mn("dirty is not a string, aborting")}if(!n.isSupported)return C;if(le||bn(Y),n.removed=[],typeof C=="string"&&(de=!1),de){if(C.nodeName){const Xt=yt(C.nodeName);if(!rt[Xt]||U[Xt])throw Mn("root node is forbidden and cannot be sanitized in-place")}}else if(C instanceof l)V=yn("<!---->"),nt=V.ownerDocument.importNode(C,!0),nt.nodeType===wc&&nt.nodeName==="BODY"||nt.nodeName==="HTML"?V=nt:V.appendChild(nt);else{if(!_t&&!pt&&!Ot&&C.indexOf("<")===-1)return L&&ue?L.createHTML(C):C;if(V=yn(C),!V)return _t?null:ue?R:""}V&&ne&&zt(V.firstChild);const St=ei(de?C:V);for(;ct=St.nextNode();)ii(ct),ve(ct),ct.content instanceof o&&zi(ct.content);if(de)return C;if(_t){if(ce)for(it=j.call(V.ownerDocument);V.firstChild;)it.appendChild(V.firstChild);else it=V;return(z.shadowroot||z.shadowrootmode)&&(it=w.call(r,it,!0)),it}let fe=Ot?V.outerHTML:V.innerHTML;return Ot&&rt["!doctype"]&&V.ownerDocument&&V.ownerDocument.doctype&&V.ownerDocument.doctype.name&&jt(Oo,V.ownerDocument.doctype.name)&&(fe="<!DOCTYPE "+V.ownerDocument.doctype.name+`>
`+fe),pt&&di([O,H,G],Xt=>{fe=Ln(fe,Xt," ")}),L&&ue?L.createHTML(fe):fe},n.setConfig=function(){bn(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),le=!0},n.clearConfig=function(){Se=null,le=!1},n.isValidAttribute=function(C,Y,V){Se||bn({});const nt=yt(C),ct=yt(Y);return ri(nt,ct,V)},n.addHook=function(C,Y){typeof Y=="function"&&kn(P[C],Y)},n.removeHook=function(C,Y){if(Y!==void 0){const V=pc(P[C],Y);return V===-1?void 0:gc(P[C],V,1)[0]}return Is(P[C])},n.removeHooks=function(C){P[C]=[]},n.removeAllHooks=function(){P={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();Ti.addHook("uponSanitizeAttribute",function(e,t){/^data-trix-/.test(t.attrName)&&(t.forceKeepAttr=!0)});const Nc="style href src width height language class".split(" "),Bc="javascript:".split(" "),Fc="script iframe form noscript".split(" ");class wi extends Tt{static setHTML(t,n,i){const r=new this(n,i).sanitize(),s=r.getHTML?r.getHTML():r.outerHTML;t.innerHTML=s}static sanitize(t,n){const i=new this(t,n);return i.sanitize(),i}constructor(t){let{allowedAttributes:n,forbiddenProtocols:i,forbiddenElements:r,purifyOptions:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=n||Nc,this.forbiddenProtocols=i||Bc,this.forbiddenElements=r||Fc,this.purifyOptions=s||{},this.body=zc(t)}sanitize(){this.sanitizeElements(),this.normalizeListElementNesting();const t=Object.assign({},bo,this.purifyOptions);return Ti.setConfig(t),this.body=Ti.sanitize(this.body),this.body}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){const t=xi(this.body),n=[];for(;t.nextNode();){const i=t.currentNode;switch(i.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(i)?n.push(i):this.sanitizeElement(i);break;case Node.COMMENT_NODE:n.push(i)}}return n.forEach(i=>Fe(i)),this.body}sanitizeElement(t){return t.hasAttribute("href")&&this.forbiddenProtocols.includes(t.protocol)&&t.removeAttribute("href"),Array.from(t.attributes).forEach(n=>{let{name:i}=n;this.allowedAttributes.includes(i)||i.indexOf("data-trix")===0||t.removeAttribute(i)}),t}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(t=>{const n=t.previousElementSibling;n&&Ht(n)==="li"&&n.appendChild(t)}),this.body}elementIsRemovable(t){if((t==null?void 0:t.nodeType)===Node.ELEMENT_NODE)return this.elementIsForbidden(t)||this.elementIsntSerializable(t)}elementIsForbidden(t){return this.forbiddenElements.includes(Ht(t))}elementIsntSerializable(t){return t.getAttribute("data-trix-serialize")==="false"&&!Ge(t)}}const zc=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";e=e.replace(/<\/html[^>]*>[^]*$/i,"</html>");const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e,Array.from(t.head.querySelectorAll("style")).forEach(n=>{t.body.appendChild(n)}),t.body},{css:Re}=Xn;class es extends Ze{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let t;const n=t=st({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),i=this.getHref();return i&&(t=st({tagName:"a",editable:!1,attributes:{href:i,tabindex:-1}}),n.appendChild(t)),this.attachment.hasContent()?wi.setHTML(t,this.attachment.getContent()):this.createContentNodes().forEach(r=>{t.appendChild(r)}),t.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=st({tagName:"progress",attributes:{class:Re.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),n.appendChild(this.progressElement)),[Hs("left"),n,Hs("right")]}createCaptionElement(){const t=st({tagName:"figcaption",className:Re.attachmentCaption}),n=this.attachmentPiece.getCaption();if(n)t.classList.add("".concat(Re.attachmentCaption,"--edited")),t.textContent=n;else{let i,r;const s=this.getCaptionConfig();if(s.name&&(i=this.attachment.getFilename()),s.size&&(r=this.attachment.getFormattedFilesize()),i){const o=st({tagName:"span",className:Re.attachmentName,textContent:i});t.appendChild(o)}if(r){i&&t.appendChild(document.createTextNode(" "));const o=st({tagName:"span",className:Re.attachmentSize,textContent:r});t.appendChild(o)}}return t}getClassName(){const t=[Re.attachment,"".concat(Re.attachment,"--").concat(this.attachment.getType())],n=this.attachment.getExtension();return n&&t.push("".concat(Re.attachment,"--").concat(n)),t.join(" ")}getData(){const t={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:n}=this.attachmentPiece;return n.isEmpty()||(t.trixAttributes=JSON.stringify(n)),this.attachment.isPending()&&(t.trixSerialize=!1),t}getHref(){if(!jc(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var t;const n=this.attachment.getType(),i=Lo((t=Ur[n])===null||t===void 0?void 0:t.caption);return n==="file"&&(i.name=!0),i}findProgressElement(){var t;return(t=this.findElement())===null||t===void 0?void 0:t.querySelector("progress")}attachmentDidChangeUploadProgress(){const t=this.attachment.getUploadProgress(),n=this.findProgressElement();n&&(n.value=t)}}const Hs=e=>st({tagName:"span",textContent:Pi,data:{trixCursorTarget:e,trixSerialize:!1}}),jc=function(e,t){const n=st("div");return wi.setHTML(n,e||""),n.querySelector(t)};class _o extends es{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=st({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){const t=super.createCaptionElement(...arguments);return t.textContent||t.setAttribute("data-trix-placeholder",et.captionPlaceholder),t}refresh(t){var n;if(t||(t=(n=this.findElement())===null||n===void 0?void 0:n.querySelector("img")),t)return this.updateAttributesForImage(t)}updateAttributesForImage(t){const n=this.attachment.getURL(),i=this.attachment.getPreviewURL();if(t.src=i||n,i===n)t.removeAttribute("data-trix-serialized-attributes");else{const c=JSON.stringify({src:n});t.setAttribute("data-trix-serialized-attributes",c)}const r=this.attachment.getWidth(),s=this.attachment.getHeight();r!=null&&(t.width=r),s!=null&&(t.height=s);const o=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/");t.dataset.trixStoreKey=o}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}}class No extends Ze{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let t=this.attachment?this.createAttachmentNodes():this.createStringNodes();const n=this.createElement();if(n){const i=function(r){for(;(s=r)!==null&&s!==void 0&&s.firstElementChild;){var s;r=r.firstElementChild}return r}(n);Array.from(t).forEach(r=>{i.appendChild(r)}),t=[n]}return t}createAttachmentNodes(){const t=this.attachment.isPreviewable()?_o:es;return this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var t;if((t=this.textConfig)!==null&&t!==void 0&&t.plaintext)return[document.createTextNode(this.string)];{const n=[],i=this.string.split(`
`);for(let r=0;r<i.length;r++){const s=i[r];if(r>0){const o=st("br");n.push(o)}if(s.length){const o=document.createTextNode(this.preserveSpaces(s));n.push(o)}}return n}}createElement(){let t,n,i;const r={};for(n in this.attributes){i=this.attributes[n];const o=Rr(n);if(o){if(o.tagName){var s;const c=st(o.tagName);s?(s.appendChild(c),s=c):t=s=c}if(o.styleProperty&&(r[o.styleProperty]=i),o.style)for(n in o.style)i=o.style[n],r[n]=i}}if(Object.keys(r).length)for(n in t||(t=st("span")),r)i=r[n],t.style[n]=i;return t}createContainerElement(){for(const t in this.attributes){const n=this.attributes[t],i=Rr(t);if(i&&i.groupTagName){const r={};return r[t]=n,st(i.groupTagName,r)}}}preserveSpaces(t){return this.context.isLast&&(t=t.replace(/\ $/,_e)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(_e," $2")).replace(/\ {2}/g,"".concat(_e," ")).replace(/\ {2}/g," ".concat(_e)),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,_e)),t}}class Bo extends Ze{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){const t=[],n=ts.groupObjects(this.getPieces()),i=n.length-1;for(let s=0;s<n.length;s++){const o=n[s],c={};s===0&&(c.isFirst=!0),s===i&&(c.isLast=!0),Hc(r)&&(c.followsWhitespace=!0);const l=this.findOrCreateCachedChildView(No,o,{textConfig:this.textConfig,context:c});t.push(...Array.from(l.getNodes()||[]));var r=o}return t}getPieces(){return Array.from(this.text.getPieces()).filter(t=>!t.hasAttribute("blockBreak"))}}const Hc=e=>/\s$/.test(e==null?void 0:e.toString()),{css:Ws}=Xn;class Fo extends Ze{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){const t=[document.createComment("block")];if(this.block.isEmpty())t.push(st("br"));else{var n;const i=(n=At(this.block.getLastAttribute()))===null||n===void 0?void 0:n.text,r=this.findOrCreateCachedChildView(Bo,this.block.text,{textConfig:i});t.push(...Array.from(r.getNodes()||[])),this.shouldAddExtraNewlineElement()&&t.push(st("br"))}if(this.attributes.length)return t;{let i;const{tagName:r}=Wt.default;this.block.isRTL()&&(i={dir:"rtl"});const s=st({tagName:r,attributes:i});return t.forEach(o=>s.appendChild(o)),[s]}}createContainerElement(t){const n={};let i;const r=this.attributes[t],{tagName:s,htmlAttributes:o=[]}=At(r);if(t===0&&this.block.isRTL()&&Object.assign(n,{dir:"rtl"}),r==="attachmentGallery"){const c=this.block.getBlockBreakPosition();i="".concat(Ws.attachmentGallery," ").concat(Ws.attachmentGallery,"--").concat(c)}return Object.entries(this.block.htmlAttributes).forEach(c=>{let[l,m]=c;o.includes(l)&&(n[l]=m)}),st({tagName:s,className:i,attributes:n})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}}class Ri extends Ze{static render(t){const n=st("div"),i=new this(t,{element:n});return i.render(),i.sync(),n}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new uc,this.setDocument(this.object)}setDocument(t){t.isEqualTo(this.document)||(this.document=this.object=t)}render(){if(this.childViews=[],this.shadowElement=st("div"),!this.document.isEmpty()){const t=ts.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(t).forEach(n=>{const i=this.findOrCreateCachedChildView(Fo,n);Array.from(i.getNodes()).map(r=>this.shadowElement.appendChild(r))})}}isSynced(){return Wc(this.shadowElement,this.element)}sync(){const t=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()}didSync(){return this.elementStore.reset(qs(this.element)),Kr(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){const t=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(n=>{t.appendChild(n.cloneNode(!0))}),Array.from(qs(t)).forEach(n=>{const i=this.elementStore.remove(n);i&&n.parentNode.replaceChild(i,n)}),t}}const qs=e=>e.querySelectorAll("[data-trix-store-key]"),Wc=(e,t)=>$s(e.innerHTML)===$s(t.innerHTML),$s=e=>e.replace(/&nbsp;/g," ");function qt(e,t,n){return(t=qc(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qc(e){var t=function(n,i){if(typeof n!="object"||n===null)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var s=r.call(n,i);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}(e,"string");return typeof t=="symbol"?t:String(t)}function gt(e,t){return $c(e,zo(e,t,"get"))}function ns(e,t,n){return Vc(e,zo(e,t,"set"),n),n}function zo(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function $c(e,t){return t.get?t.get.call(e):t.value}function Vc(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function fi(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function jo(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zn(e,t,n){jo(e,t),t.set(e,n)}class tn extends Qe{static registerType(t,n){n.type=t,this.types[t]=n}static fromJSON(t){const n=this.types[t.type];if(n)return n.fromJSON(t)}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=ee.box(n)}copyWithAttributes(t){return new this.constructor(this.getValue(),t)}copyWithAdditionalAttributes(t){return this.copyWithAttributes(this.attributes.merge(t))}copyWithoutAttribute(t){return this.copyWithAttributes(this.attributes.remove(t))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(t){return this.attributes.get(t)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(t){return this.attributes.has(t)}hasSameStringValueAsPiece(t){return t&&this.toString()===t.toString()}hasSameAttributesAsPiece(t){return t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))}isBlockBreak(){return!1}isEqualTo(t){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(t){return this.getAttribute("href")===t.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(t){return!1}}qt(tn,"types",{});class Ho extends Ei{constructor(t){super(...arguments),this.url=t}perform(t){const n=new Image;n.onload=()=>(n.width=this.width=n.naturalWidth,n.height=this.height=n.naturalHeight,t(!0,n)),n.onerror=()=>t(!1),n.src=this.url}}class hn extends Qe{static attachmentForFile(t){const n=new this(this.attributesForFile(t));return n.setFile(t),n}static attributesForFile(t){return new ee({filename:t.name,filesize:t.size,contentType:t.type})}static fromJSON(t){return new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.releaseFile=this.releaseFile.bind(this),this.attributes=ee.box(t),this.didChangeAttributes()}getAttribute(t){return this.attributes.get(t)}hasAttribute(t){return this.attributes.has(t)}getAttributes(){return this.attributes.toObject()}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.attributes.merge(t);var i,r,s,o;if(!this.attributes.isEqualTo(n))return this.attributes=n,this.didChangeAttributes(),(i=this.previewDelegate)===null||i===void 0||(r=i.attachmentDidChangeAttributes)===null||r===void 0||r.call(i,this),(s=this.delegate)===null||s===void 0||(o=s.attachmentDidChangeAttributes)===null||o===void 0?void 0:o.call(s,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):hn.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){const t=this.attributes.get("filesize");return typeof t=="number"?yo.formatter(t):""}getExtension(){var t;return(t=this.getFilename().match(/\.(\w+)$/))===null||t===void 0?void 0:t[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(t){if(this.file=t,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(t){var n,i;if(this.uploadProgress!==t)return this.uploadProgress=t,(n=this.uploadProgressDelegate)===null||n===void 0||(i=n.attachmentDidChangeUploadProgress)===null||i===void 0?void 0:i.call(n,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(t){var n,i,r,s;if(t!==this.getPreviewURL())return this.previewURL=t,(n=this.previewDelegate)===null||n===void 0||(i=n.attachmentDidChangeAttributes)===null||i===void 0||i.call(n,this),(r=this.delegate)===null||r===void 0||(s=r.attachmentDidChangePreviewURL)===null||s===void 0?void 0:s.call(r,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(t,n){if(t&&t!==this.getPreviewURL())return this.preloadingURL=t,new Ho(t).then(i=>{let{width:r,height:s}=i;return this.getWidth()&&this.getHeight()||this.setAttributes({width:r,height:s}),this.preloadingURL=null,this.setPreviewURL(t),n==null?void 0:n()}).catch(()=>(this.preloadingURL=null,n==null?void 0:n()))}}qt(hn,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);class ln extends tn{static fromJSON(t){return new this(hn.fromJSON(t.attachment),t.attributes)}constructor(t){super(...arguments),this.attachment=t,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(t){this.hasAttribute(t)&&(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice([t])),this.attributes=this.attributes.remove(t))}removeProhibitedAttributes(){const t=this.attributes.slice(ln.permittedAttributes);t.isEqualTo(this.attributes)||(this.attributes=t)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(t){var n;return super.isEqualTo(t)&&this.attachment.id===(t==null||(n=t.attachment)===null||n===void 0?void 0:n.id)}toString(){return""}toJSON(){const t=super.toJSON(...arguments);return t.attachment=this.attachment,t}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}}qt(ln,"permittedAttributes",["caption","presentation"]),tn.registerType("attachment",ln);class is extends tn{static fromJSON(t){return new this(t.string,t.attributes)}constructor(t){super(...arguments),this.string=(n=>n.replace(/\r\n?/g,`
`))(t),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){const t=super.toJSON(...arguments);return t.string=this.string,t}canBeConsolidatedWith(t){return t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)}consolidateWith(t){return new this.constructor(this.toString()+t.toString(),this.attributes)}splitAtOffset(t){let n,i;return t===0?(n=null,i=this):t===this.length?(n=this,i=null):(n=new this.constructor(this.string.slice(0,t),this.attributes),i=new this.constructor(this.string.slice(t),this.attributes)),[n,i]}toConsole(){let{string:t}=this;return t.length>15&&(t=t.slice(0,14)+""),JSON.stringify(t.toString())}}tn.registerType("string",is);class Ci extends Qe{static box(t){return t instanceof this?t:new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=t.slice(0),this.length=this.objects.length}indexOf(t){return this.objects.indexOf(t)}splice(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return new this.constructor(Jr(this.objects,...n))}eachObject(t){return this.objects.map((n,i)=>t(n,i))}insertObjectAtIndex(t,n){return this.splice(n,0,t)}insertSplittableListAtIndex(t,n){return this.splice(n,0,...t.objects)}insertSplittableListAtPosition(t,n){const[i,r]=this.splitObjectAtPosition(n);return new this.constructor(i).insertSplittableListAtIndex(t,r)}editObjectAtIndex(t,n){return this.replaceObjectAtIndex(n(this.objects[t]),t)}replaceObjectAtIndex(t,n){return this.splice(n,1,t)}removeObjectAtIndex(t){return this.splice(t,1)}getObjectAtIndex(t){return this.objects[t]}getSplittableListInRange(t){const[n,i,r]=this.splitObjectsAtRange(t);return new this.constructor(n.slice(i,r+1))}selectSplittableList(t){const n=this.objects.filter(i=>t(i));return new this.constructor(n)}removeObjectsInRange(t){const[n,i,r]=this.splitObjectsAtRange(t);return new this.constructor(n).splice(i,r-i+1)}transformObjectsInRange(t,n){const[i,r,s]=this.splitObjectsAtRange(t),o=i.map((c,l)=>r<=l&&l<=s?n(c):c);return new this.constructor(o)}splitObjectsAtRange(t){let n,[i,r,s]=this.splitObjectAtPosition(Gc(t));return[i,n]=new this.constructor(i).splitObjectAtPosition(Xc(t)+s),[i,r,n-1]}getObjectAtPosition(t){const{index:n}=this.findIndexAndOffsetAtPosition(t);return this.objects[n]}splitObjectAtPosition(t){let n,i;const{index:r,offset:s}=this.findIndexAndOffsetAtPosition(t),o=this.objects.slice(0);if(r!=null)if(s===0)n=r,i=0;else{const c=this.getObjectAtIndex(r),[l,m]=c.splitAtOffset(s);o.splice(r,1,l,m),n=r+1,i=l.getLength()-s}else n=o.length,i=0;return[o,n,i]}consolidate(){const t=[];let n=this.objects[0];return this.objects.slice(1).forEach(i=>{var r,s;(r=(s=n).canBeConsolidatedWith)!==null&&r!==void 0&&r.call(s,i)?n=n.consolidateWith(i):(t.push(n),n=i)}),n&&t.push(n),new this.constructor(t)}consolidateFromIndexToIndex(t,n){const i=this.objects.slice(0).slice(t,n+1),r=new this.constructor(i).consolidate().toArray();return this.splice(t,i.length,...r)}findIndexAndOffsetAtPosition(t){let n,i=0;for(n=0;n<this.objects.length;n++){const r=i+this.objects[n].getLength();if(i<=t&&t<r)return{index:n,offset:t-i};i=r}return{index:null,offset:null}}findPositionAtIndexAndOffset(t,n){let i=0;for(let r=0;r<this.objects.length;r++){const s=this.objects[r];if(r<t)i+=s.getLength();else if(r===t){i+=n;break}}return i}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(t=>this.endPosition+=t.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(t){return super.isEqualTo(...arguments)||Uc(this.objects,t==null?void 0:t.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(t=>t.inspect()).join(", "),"]")}}}const Uc=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(e.length!==t.length)return!1;let n=!0;for(let i=0;i<e.length;i++){const r=e[i];n&&!r.isEqualTo(t[i])&&(n=!1)}return n},Gc=e=>e[0],Xc=e=>e[1];class pe extends Qe{static textForAttachmentWithAttributes(t,n){return new this([new ln(t,n)])}static textForStringWithAttributes(t,n){return new this([new is(t,n)])}static fromJSON(t){return new this(Array.from(t).map(n=>tn.fromJSON(n)))}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);const n=t.filter(i=>!i.isEmpty());this.pieceList=new Ci(n)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(t){return new this.constructor(t.consolidate().toArray())}copyUsingObjectMap(t){const n=this.getPieces().map(i=>t.find(i)||i);return new this.constructor(n)}appendText(t){return this.insertTextAtPosition(t,this.getLength())}insertTextAtPosition(t,n){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,n))}removeTextAtRange(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))}replaceTextAtRange(t,n){return this.removeTextAtRange(n).insertTextAtPosition(t,n[0])}moveTextFromRangeToPosition(t,n){if(t[0]<=n&&n<=t[1])return;const i=this.getTextAtRange(t),r=i.getLength();return t[0]<n&&(n-=r),this.removeTextAtRange(t).insertTextAtPosition(i,n)}addAttributeAtRange(t,n,i){const r={};return r[t]=n,this.addAttributesAtRange(r,i)}addAttributesAtRange(t,n){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(n,i=>i.copyWithAdditionalAttributes(t)))}removeAttributeAtRange(t,n){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(n,i=>i.copyWithoutAttribute(t)))}setAttributesAtRange(t,n){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(n,i=>i.copyWithAttributes(t)))}getAttributesAtPosition(t){var n;return((n=this.pieceList.getObjectAtPosition(t))===null||n===void 0?void 0:n.getAttributes())||{}}getCommonAttributes(){const t=Array.from(this.pieceList.toArray()).map(n=>n.getAttributes());return ee.fromCommonAttributesOfObjects(t).toObject()}getCommonAttributesAtRange(t){return this.getTextAtRange(t).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(t,n){let i,r=i=n;const s=this.getLength();for(;r>0&&this.getCommonAttributesAtRange([r-1,i])[t];)r--;for(;i<s&&this.getCommonAttributesAtRange([n,i+1])[t];)i++;return[r,i]}getTextAtRange(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))}getStringAtRange(t){return this.pieceList.getSplittableListInRange(t).toString()}getStringAtPosition(t){return this.getStringAtRange([t,t+1])}startsWithString(t){return this.getStringAtRange([0,t.length])===t}endsWithString(t){const n=this.getLength();return this.getStringAtRange([n-t.length,n])===t}getAttachmentPieces(){return this.pieceList.toArray().filter(t=>!!t.attachment)}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getAttachmentAndPositionById(t){let n=0;for(const r of this.pieceList.toArray()){var i;if(((i=r.attachment)===null||i===void 0?void 0:i.id)===t)return{attachment:r.attachment,position:n};n+=r.length}return{attachment:null,position:null}}getAttachmentById(t){const{attachment:n}=this.getAttachmentAndPositionById(t);return n}getRangeOfAttachment(t){const n=this.getAttachmentAndPositionById(t.id),i=n.position;if(t=n.attachment)return[i,i+1]}updateAttributesForAttachment(t,n){const i=this.getRangeOfAttachment(n);return i?this.addAttributesAtRange(t,i):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(t){var n;return super.isEqualTo(t)||(t==null||(n=t.pieceList)===null||n===void 0?void 0:n.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(t){return this.pieceList.eachObject(t)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(t){return this.pieceList.getObjectAtPosition(t)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){const t=this.pieceList.selectSplittableList(n=>n.isSerializable());return this.copyWithPieceList(t)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(t=>JSON.parse(t.toConsole())))}getDirection(){return tc(this.toString())}isRTL(){return this.getDirection()==="rtl"}}class be extends Qe{static fromJSON(t){return new this(pe.fromJSON(t.text),t.attributes,t.htmlAttributes)}constructor(t,n,i){super(...arguments),this.text=Yc(t||new pe),this.attributes=n||[],this.htmlAttributes=i||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(t){return!!super.isEqualTo(t)||this.text.isEqualTo(t==null?void 0:t.text)&&Je(this.attributes,t==null?void 0:t.attributes)&&dn(this.htmlAttributes,t==null?void 0:t.htmlAttributes)}copyWithText(t){return new be(t,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(t){return new be(this.text,t,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(t){const n=t.find(this.text);return n?this.copyWithText(n):this.copyWithText(this.text.copyUsingObjectMap(t))}addAttribute(t){const n=this.attributes.concat(Vs(t));return this.copyWithAttributes(n)}addHTMLAttribute(t,n){const i=Object.assign({},this.htmlAttributes,{[t]:n});return new be(this.text,this.attributes,i)}removeAttribute(t){const{listAttribute:n}=At(t),i=Gs(Gs(this.attributes,t),n);return this.copyWithAttributes(i)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return Us(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(t){return this.attributes[t-1]}hasAttribute(t){return this.attributes.includes(t)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return Us(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(t=>At(t).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){const t=this.getLastNestableAttribute();return t?this.removeAttribute(t):this}increaseNestingLevel(){const t=this.getLastNestableAttribute();if(t){const n=this.attributes.lastIndexOf(t),i=Jr(this.attributes,n+1,0,...Vs(t));return this.copyWithAttributes(i)}return this}getListItemAttributes(){return this.attributes.filter(t=>At(t).listAttribute)}isListItem(){var t;return(t=At(this.getLastAttribute()))===null||t===void 0?void 0:t.listAttribute}isTerminalBlock(){var t;return(t=At(this.getLastAttribute()))===null||t===void 0?void 0:t.terminal}breaksOnReturn(){var t;return(t=At(this.getLastAttribute()))===null||t===void 0?void 0:t.breakOnReturn}findLineBreakInDirectionFromPosition(t,n){const i=this.toString();let r;switch(t){case"forward":r=i.indexOf(`
`,n);break;case"backward":r=i.slice(0,n).lastIndexOf(`
`)}if(r!==-1)return r}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(t){return!this.hasAttributes()&&!t.hasAttributes()&&this.getDirection()===t.getDirection()}consolidateWith(t){const n=pe.textForStringWithAttributes(`
`),i=this.getTextWithoutBlockBreak().appendText(n);return this.copyWithText(i.appendText(t.text))}splitAtOffset(t){let n,i;return t===0?(n=null,i=this):t===this.getLength()?(n=this,i=null):(n=this.copyWithText(this.text.getTextAtRange([0,t])),i=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[n,i]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return Wo(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(t){return this.attributes[t]}canBeGroupedWith(t,n){const i=t.getAttributes(),r=i[n],s=this.attributes[n];return s===r&&!(At(s).group===!1&&!(()=>{if(!ui){ui=[];for(const o in Wt){const{listAttribute:c}=Wt[o];c!=null&&ui.push(c)}}return ui})().includes(i[n+1]))&&(this.getDirection()===t.getDirection()||t.isEmpty())}}const Yc=function(e){return e=Jc(e),e=Qc(e)},Jc=function(e){let t=!1;const n=e.getPieces();let i=n.slice(0,n.length-1);const r=n[n.length-1];return r?(i=i.map(s=>s.isBlockBreak()?(t=!0,Zc(s)):s),t?new pe([...i,r]):e):e},Kc=pe.textForStringWithAttributes(`
`,{blockBreak:!0}),Qc=function(e){return Wo(e)?e:e.appendText(Kc)},Wo=function(e){const t=e.getLength();return t===0?!1:e.getTextAtRange([t-1,t]).isBlockBreak()},Zc=e=>e.copyWithoutAttribute("blockBreak"),Vs=function(e){const{listAttribute:t}=At(e);return t?[t,e]:[e]},Us=e=>e.slice(-1)[0],Gs=function(e,t){const n=e.lastIndexOf(t);return n===-1?e:Jr(e,n,1)};class se extends Qe{static fromJSON(t){return new this(Array.from(t).map(n=>be.fromJSON(n)))}static fromString(t,n){const i=pe.textForStringWithAttributes(t,n);return new this([new be(i)])}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),t.length===0&&(t=[new be]),this.blockList=Ci.box(t)}isEmpty(){const t=this.getBlockAtIndex(0);return this.blockList.length===1&&t.isEmpty()&&!t.hasAttributes()}copy(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(t)}copyUsingObjectsFromDocument(t){const n=new cc(t.getObjects());return this.copyUsingObjectMap(n)}copyUsingObjectMap(t){const n=this.getBlocks().map(i=>t.find(i)||i.copyUsingObjectMap(t));return new this.constructor(n)}copyWithBaseBlockAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=this.getBlocks().map(i=>{const r=t.concat(i.getAttributes());return i.copyWithAttributes(r)});return new this.constructor(n)}replaceBlock(t,n){const i=this.blockList.indexOf(t);return i===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(n,i))}insertDocumentAtRange(t,n){const{blockList:i}=t;n=mt(n);let[r]=n;const{index:s,offset:o}=this.locationFromPosition(r);let c=this;const l=this.getBlockAtPosition(r);return Ce(n)&&l.isEmpty()&&!l.hasAttributes()?c=new this.constructor(c.blockList.removeObjectAtIndex(s)):l.getBlockBreakPosition()===o&&r++,c=c.removeTextAtRange(n),new this.constructor(c.blockList.insertSplittableListAtPosition(i,r))}mergeDocumentAtRange(t,n){let i,r;n=mt(n);const[s]=n,o=this.locationFromPosition(s),c=this.getBlockAtIndex(o.index).getAttributes(),l=t.getBaseBlockAttributes(),m=c.slice(-l.length);if(Je(l,m)){const y=c.slice(0,-l.length);i=t.copyWithBaseBlockAttributes(y)}else i=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(c);const b=i.getBlockCount(),v=i.getBlockAtIndex(0);if(Je(c,v.getAttributes())){const y=v.getTextWithoutBlockBreak();if(r=this.insertTextAtRange(y,n),b>1){i=new this.constructor(i.getBlocks().slice(1));const d=s+y.getLength();r=r.insertDocumentAtRange(i,d)}}else r=this.insertDocumentAtRange(i,n);return r}insertTextAtRange(t,n){n=mt(n);const[i]=n,{index:r,offset:s}=this.locationFromPosition(i),o=this.removeTextAtRange(n);return new this.constructor(o.blockList.editObjectAtIndex(r,c=>c.copyWithText(c.text.insertTextAtPosition(t,s))))}removeTextAtRange(t){let n;t=mt(t);const[i,r]=t;if(Ce(t))return this;const[s,o]=Array.from(this.locationRangeFromRange(t)),c=s.index,l=s.offset,m=this.getBlockAtIndex(c),b=o.index,v=o.offset,y=this.getBlockAtIndex(b);if(r-i==1&&m.getBlockBreakPosition()===l&&y.getBlockBreakPosition()!==v&&y.text.getStringAtPosition(v)===`
`)n=this.blockList.editObjectAtIndex(b,d=>d.copyWithText(d.text.removeTextAtRange([v,v+1])));else{let d;const f=m.text.getTextAtRange([0,l]),g=y.text.getTextAtRange([v,y.getLength()]),A=f.appendText(g);d=c!==b&&l===0&&m.getAttributeLevel()>=y.getAttributeLevel()?y.copyWithText(A):m.copyWithText(A);const p=b+1-c;n=this.blockList.splice(c,p,d)}return new this.constructor(n)}moveTextFromRangeToPosition(t,n){let i;t=mt(t);const[r,s]=t;if(r<=n&&n<=s)return this;let o=this.getDocumentAtRange(t),c=this.removeTextAtRange(t);const l=r<n;l&&(n-=o.getLength());const[m,...b]=o.getBlocks();return b.length===0?(i=m.getTextWithoutBlockBreak(),l&&(n+=1)):i=m.text,c=c.insertTextAtRange(i,n),b.length===0?c:(o=new this.constructor(b),n+=i.getLength(),c.insertDocumentAtRange(o,n))}addAttributeAtRange(t,n,i){let{blockList:r}=this;return this.eachBlockAtRange(i,(s,o,c)=>r=r.editObjectAtIndex(c,function(){return At(t)?s.addAttribute(t,n):o[0]===o[1]?s:s.copyWithText(s.text.addAttributeAtRange(t,n,o))})),new this.constructor(r)}addAttribute(t,n){let{blockList:i}=this;return this.eachBlock((r,s)=>i=i.editObjectAtIndex(s,()=>r.addAttribute(t,n))),new this.constructor(i)}removeAttributeAtRange(t,n){let{blockList:i}=this;return this.eachBlockAtRange(n,function(r,s,o){At(t)?i=i.editObjectAtIndex(o,()=>r.removeAttribute(t)):s[0]!==s[1]&&(i=i.editObjectAtIndex(o,()=>r.copyWithText(r.text.removeAttributeAtRange(t,s))))}),new this.constructor(i)}updateAttributesForAttachment(t,n){const i=this.getRangeOfAttachment(n),[r]=Array.from(i),{index:s}=this.locationFromPosition(r),o=this.getTextAtIndex(s);return new this.constructor(this.blockList.editObjectAtIndex(s,c=>c.copyWithText(o.updateAttributesForAttachment(t,n))))}removeAttributeForAttachment(t,n){const i=this.getRangeOfAttachment(n);return this.removeAttributeAtRange(t,i)}setHTMLAttributeAtPosition(t,n,i){const r=this.getBlockAtPosition(t),s=r.addHTMLAttribute(n,i);return this.replaceBlock(r,s)}insertBlockBreakAtRange(t){let n;t=mt(t);const[i]=t,{offset:r}=this.locationFromPosition(i),s=this.removeTextAtRange(t);return r===0&&(n=[new be]),new this.constructor(s.blockList.insertSplittableListAtPosition(new Ci(n),i))}applyBlockAttributeAtRange(t,n,i){const r=this.expandRangeToLineBreaksAndSplitBlocks(i);let s=r.document;i=r.range;const o=At(t);if(o.listAttribute){s=s.removeLastListAttributeAtRange(i,{exceptAttributeName:t});const c=s.convertLineBreaksToBlockBreaksInRange(i);s=c.document,i=c.range}else s=o.exclusive?s.removeBlockAttributesAtRange(i):o.terminal?s.removeLastTerminalAttributeAtRange(i):s.consolidateBlocksAtRange(i);return s.addAttributeAtRange(t,n,i)}removeLastListAttributeAtRange(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:i}=this;return this.eachBlockAtRange(t,function(r,s,o){const c=r.getLastAttribute();c&&At(c).listAttribute&&c!==n.exceptAttributeName&&(i=i.editObjectAtIndex(o,()=>r.removeAttribute(c)))}),new this.constructor(i)}removeLastTerminalAttributeAtRange(t){let{blockList:n}=this;return this.eachBlockAtRange(t,function(i,r,s){const o=i.getLastAttribute();o&&At(o).terminal&&(n=n.editObjectAtIndex(s,()=>i.removeAttribute(o)))}),new this.constructor(n)}removeBlockAttributesAtRange(t){let{blockList:n}=this;return this.eachBlockAtRange(t,function(i,r,s){i.hasAttributes()&&(n=n.editObjectAtIndex(s,()=>i.copyWithoutAttributes()))}),new this.constructor(n)}expandRangeToLineBreaksAndSplitBlocks(t){let n;t=mt(t);let[i,r]=t;const s=this.locationFromPosition(i),o=this.locationFromPosition(r);let c=this;const l=c.getBlockAtIndex(s.index);if(s.offset=l.findLineBreakInDirectionFromPosition("backward",s.offset),s.offset!=null&&(n=c.positionFromLocation(s),c=c.insertBlockBreakAtRange([n,n+1]),o.index+=1,o.offset-=c.getBlockAtIndex(s.index).getLength(),s.index+=1),s.offset=0,o.offset===0&&o.index>s.index)o.index-=1,o.offset=c.getBlockAtIndex(o.index).getBlockBreakPosition();else{const m=c.getBlockAtIndex(o.index);m.text.getStringAtRange([o.offset-1,o.offset])===`
`?o.offset-=1:o.offset=m.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==m.getBlockBreakPosition()&&(n=c.positionFromLocation(o),c=c.insertBlockBreakAtRange([n,n+1]))}return i=c.positionFromLocation(s),r=c.positionFromLocation(o),{document:c,range:t=mt([i,r])}}convertLineBreaksToBlockBreaksInRange(t){t=mt(t);let[n]=t;const i=this.getStringAtRange(t).slice(0,-1);let r=this;return i.replace(/.*?\n/g,function(s){n+=s.length,r=r.insertBlockBreakAtRange([n-1,n])}),{document:r,range:t}}consolidateBlocksAtRange(t){t=mt(t);const[n,i]=t,r=this.locationFromPosition(n).index,s=this.locationFromPosition(i).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(r,s))}getDocumentAtRange(t){t=mt(t);const n=this.blockList.getSplittableListInRange(t).toArray();return new this.constructor(n)}getStringAtRange(t){let n;const i=t=mt(t);return i[i.length-1]!==this.getLength()&&(n=-1),this.getDocumentAtRange(t).toString().slice(0,n)}getBlockAtIndex(t){return this.blockList.getObjectAtIndex(t)}getBlockAtPosition(t){const{index:n}=this.locationFromPosition(t);return this.getBlockAtIndex(n)}getTextAtIndex(t){var n;return(n=this.getBlockAtIndex(t))===null||n===void 0?void 0:n.text}getTextAtPosition(t){const{index:n}=this.locationFromPosition(t);return this.getTextAtIndex(n)}getPieceAtPosition(t){const{index:n,offset:i}=this.locationFromPosition(t);return this.getTextAtIndex(n).getPieceAtPosition(i)}getCharacterAtPosition(t){const{index:n,offset:i}=this.locationFromPosition(t);return this.getTextAtIndex(n).getStringAtRange([i,i+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(t){return this.blockList.eachObject(t)}eachBlockAtRange(t,n){let i,r;t=mt(t);const[s,o]=t,c=this.locationFromPosition(s),l=this.locationFromPosition(o);if(c.index===l.index)return i=this.getBlockAtIndex(c.index),r=[c.offset,l.offset],n(i,r,c.index);for(let m=c.index;m<=l.index;m++)if(i=this.getBlockAtIndex(m),i){switch(m){case c.index:r=[c.offset,i.text.getLength()];break;case l.index:r=[0,l.offset];break;default:r=[0,i.text.getLength()]}n(i,r,m)}}getCommonAttributesAtRange(t){t=mt(t);const[n]=t;if(Ce(t))return this.getCommonAttributesAtPosition(n);{const i=[],r=[];return this.eachBlockAtRange(t,function(s,o){if(o[0]!==o[1])return i.push(s.text.getCommonAttributesAtRange(o)),r.push(Xs(s))}),ee.fromCommonAttributesOfObjects(i).merge(ee.fromCommonAttributesOfObjects(r)).toObject()}}getCommonAttributesAtPosition(t){let n,i;const{index:r,offset:s}=this.locationFromPosition(t),o=this.getBlockAtIndex(r);if(!o)return{};const c=Xs(o),l=o.text.getAttributesAtPosition(s),m=o.text.getAttributesAtPosition(s-1),b=Object.keys(Ye).filter(v=>Ye[v].inheritable);for(n in m)i=m[n],(i===l[n]||b.includes(n))&&(c[n]=i);return c}getRangeOfCommonAttributeAtPosition(t,n){const{index:i,offset:r}=this.locationFromPosition(n),s=this.getTextAtIndex(i),[o,c]=Array.from(s.getExpandedRangeForAttributeAtOffset(t,r)),l=this.positionFromLocation({index:i,offset:o}),m=this.positionFromLocation({index:i,offset:c});return mt([l,m])}getBaseBlockAttributes(){let t=this.getBlockAtIndex(0).getAttributes();for(let n=1;n<this.getBlockCount();n++){const i=this.getBlockAtIndex(n).getAttributes(),r=Math.min(t.length,i.length);t=(()=>{const s=[];for(let o=0;o<r&&i[o]===t[o];o++)s.push(i[o]);return s})()}return t}getAttachmentById(t){for(const n of this.getAttachments())if(n.id===t)return n}getAttachmentPieces(){let t=[];return this.blockList.eachObject(n=>{let{text:i}=n;return t=t.concat(i.getAttachmentPieces())}),t}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getRangeOfAttachment(t){let n=0;const i=this.blockList.toArray();for(let r=0;r<i.length;r++){const{text:s}=i[r],o=s.getRangeOfAttachment(t);if(o)return mt([n+o[0],n+o[1]]);n+=s.getLength()}}getLocationRangeOfAttachment(t){const n=this.getRangeOfAttachment(t);return this.locationRangeFromRange(n)}getAttachmentPieceForAttachment(t){for(const n of this.getAttachmentPieces())if(n.attachment===t)return n}findRangesForBlockAttribute(t){let n=0;const i=[];return this.getBlocks().forEach(r=>{const s=r.getLength();r.hasAttribute(t)&&i.push([n,n+s]),n+=s}),i}findRangesForTextAttribute(t){let{withValue:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=0,r=[];const s=[];return this.getPieces().forEach(o=>{const c=o.getLength();(function(l){return n?l.getAttribute(t)===n:l.hasAttribute(t)})(o)&&(r[1]===i?r[1]=i+c:s.push(r=[i,i+c])),i+=c}),s}locationFromPosition(t){const n=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t));if(n.index!=null)return n;{const i=this.getBlocks();return{index:i.length-1,offset:i[i.length-1].getLength()}}}positionFromLocation(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)}locationRangeFromPosition(t){return mt(this.locationFromPosition(t))}locationRangeFromRange(t){if(!(t=mt(t)))return;const[n,i]=Array.from(t),r=this.locationFromPosition(n),s=this.locationFromPosition(i);return mt([r,s])}rangeFromLocationRange(t){let n;t=mt(t);const i=this.positionFromLocation(t[0]);return Ce(t)||(n=this.positionFromLocation(t[1])),mt([i,n])}isEqualTo(t){return this.blockList.isEqualTo(t==null?void 0:t.blockList)}getTexts(){return this.getBlocks().map(t=>t.text)}getPieces(){const t=[];return Array.from(this.getTexts()).forEach(n=>{t.push(...Array.from(n.getPieces()||[]))}),t}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){const t=[];return this.blockList.eachObject(n=>t.push(n.copyWithText(n.text.toSerializableText()))),new this.constructor(t)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(t=>JSON.parse(t.text.toConsole())))}}const Xs=function(e){const t={},n=e.getLastAttribute();return n&&(t[n]=!0),t},lr=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{string:e=Rn(e),attributes:t,type:"string"}},Ys=(e,t)=>{try{return JSON.parse(e.getAttribute("data-trix-".concat(t)))}catch{return{}}};class Vn extends Tt{static parse(t,n){const i=new this(t,n);return i.parse(),i}constructor(t){let{referenceElement:n,purifyOptions:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=t,this.referenceElement=n,this.purifyOptions=i,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return se.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer(),wi.setHTML(this.containerElement,this.html,{purifyOptions:this.purifyOptions});const t=xi(this.containerElement,{usingFilter:eu});for(;t.nextNode();)this.processNode(t.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=st({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return Fe(this.containerElement)}processNode(t){switch(t.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(t))return this.appendBlockForTextNode(t),this.processTextNode(t);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}}appendBlockForTextNode(t){const n=t.parentNode;if(n===this.currentBlockElement&&this.isBlockElement(t.previousSibling))return this.appendStringWithAttributes(`
`);if(n===this.containerElement||this.isBlockElement(n)){var i;const r=this.getBlockAttributes(n),s=this.getBlockHTMLAttributes(n);Je(r,(i=this.currentBlock)===null||i===void 0?void 0:i.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(r,n,s),this.currentBlockElement=n)}}appendBlockForElement(t){const n=this.isBlockElement(t),i=Ve(this.currentBlockElement,t);if(n&&!this.isBlockElement(t.firstChild)){if(!this.isInsignificantTextNode(t.firstChild)||!this.isBlockElement(t.firstElementChild)){const r=this.getBlockAttributes(t),s=this.getBlockHTMLAttributes(t);if(t.firstChild){if(i&&Je(r,this.currentBlock.attributes))return this.appendStringWithAttributes(`
`);this.currentBlock=this.appendBlockForAttributesWithElement(r,t,s),this.currentBlockElement=t}}}else if(this.currentBlockElement&&!i&&!n){const r=this.findParentBlockElement(t);if(r)return this.appendBlockForElement(r);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(t){let{parentElement:n}=t;for(;n&&n!==this.containerElement;){if(this.isBlockElement(n)&&this.blockElements.includes(n))return n;n=n.parentElement}return null}processTextNode(t){let n=t.data;var i;return Js(t.parentNode)||(n=Zr(n),qo((i=t.previousSibling)===null||i===void 0?void 0:i.textContent)&&(n=nu(n))),this.appendStringWithAttributes(n,this.getTextAttributes(t.parentNode))}processElement(t){let n;if(Ge(t)){if(n=Ys(t,"attachment"),Object.keys(n).length){const i=this.getTextAttributes(t);this.appendAttachmentWithAttributes(n,i),t.innerHTML=""}return this.processedElements.push(t)}switch(Ht(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes(`
`,this.getTextAttributes(t)),this.processedElements.push(t);case"img":n={url:t.getAttribute("src"),contentType:"image"};const i=(r=>{const s=r.getAttribute("width"),o=r.getAttribute("height"),c={};return s&&(c.width=parseInt(s,10)),o&&(c.height=parseInt(o,10)),c})(t);for(const r in i){const s=i[r];n[r]=s}return this.appendAttachmentWithAttributes(n,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(pi.tableRowSeparator);break;case"td":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(pi.tableCellSeparator)}}appendBlockForAttributesWithElement(t,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.blockElements.push(n);const r=function(){return{text:[],attributes:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},htmlAttributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}}}(t,i);return this.blocks.push(r),r}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(t,n){return this.appendPiece(lr(t,n))}appendAttachmentWithAttributes(t,n){return this.appendPiece(function(i){return{attachment:i,attributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},type:"attachment"}}(t,n))}appendPiece(t){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)}appendStringToTextAtIndex(t,n){const{text:i}=this.blocks[n],r=i[i.length-1];if((r==null?void 0:r.type)!=="string")return i.push(lr(t));r.string+=t}prependStringToTextAtIndex(t,n){const{text:i}=this.blocks[n],r=i[0];if((r==null?void 0:r.type)!=="string")return i.unshift(lr(t));r.string=t+r.string}getTextAttributes(t){let n;const i={};for(const r in Ye){const s=Ye[r];if(s.tagName&&Be(t,{matchingSelector:s.tagName,untilNode:this.containerElement}))i[r]=!0;else if(s.parser){if(n=s.parser(t),n){let o=!1;for(const c of this.findBlockElementAncestors(t))if(s.parser(c)===n){o=!0;break}o||(i[r]=n)}}else s.styleProperty&&(n=t.style[s.styleProperty],n&&(i[r]=n))}if(Ge(t)){const r=Ys(t,"attributes");for(const s in r)n=r[s],i[s]=n}return i}getBlockAttributes(t){const n=[];for(;t&&t!==this.containerElement;){for(const r in Wt){const s=Wt[r];var i;s.parse!==!1&&Ht(t)===s.tagName&&((i=s.test)!==null&&i!==void 0&&i.call(s,t)||!s.test)&&(n.push(r),s.listAttribute&&n.push(s.listAttribute))}t=t.parentNode}return n.reverse()}getBlockHTMLAttributes(t){const n={},i=Object.values(Wt).find(r=>r.tagName===Ht(t));return((i==null?void 0:i.htmlAttributes)||[]).forEach(r=>{t.hasAttribute(r)&&(n[r]=t.getAttribute(r))}),n}findBlockElementAncestors(t){const n=[];for(;t&&t!==this.containerElement;){const i=Ht(t);Nn().includes(i)&&n.push(t),t=t.parentNode}return n}isBlockElement(t){if((t==null?void 0:t.nodeType)===Node.ELEMENT_NODE&&!Ge(t)&&!Be(t,{matchingSelector:"td",untilNode:this.containerElement}))return Nn().includes(Ht(t))||window.getComputedStyle(t).display==="block"}isInsignificantTextNode(t){if((t==null?void 0:t.nodeType)!==Node.TEXT_NODE||!iu(t.data))return;const{parentNode:n,previousSibling:i,nextSibling:r}=t;return tu(n.previousSibling)&&!this.isBlockElement(n.previousSibling)||Js(n)?void 0:!i||this.isBlockElement(i)||!r||this.isBlockElement(r)}isExtraBR(t){return Ht(t)==="br"&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t}needsTableSeparator(t){if(pi.removeBlankTableCells){var n;const i=(n=t.previousSibling)===null||n===void 0?void 0:n.textContent;return i&&/\S/.test(i)}return t.previousSibling}translateBlockElementMarginsToNewlines(){const t=this.getMarginOfDefaultBlockElement();for(let n=0;n<this.blocks.length;n++){const i=this.getMarginOfBlockElementAtIndex(n);i&&(i.top>2*t.top&&this.prependStringToTextAtIndex(`
`,n),i.bottom>2*t.bottom&&this.appendStringToTextAtIndex(`
`,n))}}getMarginOfBlockElementAtIndex(t){const n=this.blockElements[t];if(n&&n.textContent&&!Nn().includes(Ht(n))&&!this.processedElements.includes(n))return Ks(n)}getMarginOfDefaultBlockElement(){const t=st(Wt.default.tagName);return this.containerElement.appendChild(t),Ks(t)}}const Js=function(e){const{whiteSpace:t}=window.getComputedStyle(e);return["pre","pre-wrap","pre-line"].includes(t)},tu=e=>e&&!qo(e.textContent),Ks=function(e){const t=window.getComputedStyle(e);if(t.display==="block")return{top:parseInt(t.marginTop),bottom:parseInt(t.marginBottom)}},eu=function(e){return Ht(e)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},nu=e=>e.replace(new RegExp("^".concat(Qr.source,"+")),""),iu=e=>new RegExp("^".concat(Qr.source,"*$")).test(e),qo=e=>/\s$/.test(e),ru=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],_r="data-trix-serialized-attributes",su="[".concat(_r,"]"),ou=new RegExp("<!--block-->","g"),au={"application/json":function(e){let t;if(e instanceof se)t=e;else{if(!(e instanceof HTMLElement))throw new Error("unserializable object");t=Vn.parse(e.innerHTML).getDocument()}return t.toSerializableDocument().toJSONString()},"text/html":function(e){let t;if(e instanceof se)t=Ri.render(e);else{if(!(e instanceof HTMLElement))throw new Error("unserializable object");t=e.cloneNode(!0)}return Array.from(t.querySelectorAll("[data-trix-serialize=false]")).forEach(n=>{Fe(n)}),ru.forEach(n=>{Array.from(t.querySelectorAll("[".concat(n,"]"))).forEach(i=>{i.removeAttribute(n)})}),Array.from(t.querySelectorAll(su)).forEach(n=>{try{const i=JSON.parse(n.getAttribute(_r));n.removeAttribute(_r);for(const r in i){const s=i[r];n.setAttribute(r,s)}}catch{}}),t.innerHTML.replace(ou,"")}};var lu=Object.freeze({__proto__:null});class xt extends Tt{constructor(t,n){super(...arguments),this.attachmentManager=t,this.attachment=n,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}}xt.proxyMethod("attachment.getAttribute"),xt.proxyMethod("attachment.hasAttribute"),xt.proxyMethod("attachment.setAttribute"),xt.proxyMethod("attachment.getAttributes"),xt.proxyMethod("attachment.setAttributes"),xt.proxyMethod("attachment.isPending"),xt.proxyMethod("attachment.isPreviewable"),xt.proxyMethod("attachment.getURL"),xt.proxyMethod("attachment.getHref"),xt.proxyMethod("attachment.getFilename"),xt.proxyMethod("attachment.getFilesize"),xt.proxyMethod("attachment.getFormattedFilesize"),xt.proxyMethod("attachment.getExtension"),xt.proxyMethod("attachment.getContentType"),xt.proxyMethod("attachment.getFile"),xt.proxyMethod("attachment.setFile"),xt.proxyMethod("attachment.releaseFile"),xt.proxyMethod("attachment.getUploadProgress"),xt.proxyMethod("attachment.setUploadProgress");class $o extends Tt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(t).forEach(n=>{this.manageAttachment(n)})}getAttachments(){const t=[];for(const n in this.managedAttachments){const i=this.managedAttachments[n];t.push(i)}return t}manageAttachment(t){return this.managedAttachments[t.id]||(this.managedAttachments[t.id]=new xt(this,t)),this.managedAttachments[t.id]}attachmentIsManaged(t){return t.id in this.managedAttachments}requestRemovalOfAttachment(t){var n,i;if(this.attachmentIsManaged(t))return(n=this.delegate)===null||n===void 0||(i=n.attachmentManagerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(n,t)}unmanageAttachment(t){const n=this.managedAttachments[t.id];return delete this.managedAttachments[t.id],n}}class Vo{constructor(t){this.composition=t,this.document=this.composition.document;const n=this.composition.getSelectedRange();this.startPosition=n[0],this.endPosition=n[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}}class Oe extends Tt{constructor(){super(...arguments),this.document=new se,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(t){var n,i;if(!t.isEqualTo(this.document))return this.document=t,this.refreshAttachments(),this.revision++,(n=this.delegate)===null||n===void 0||(i=n.compositionDidChangeDocument)===null||i===void 0?void 0:i.call(n,t)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(t){var n,i,r,s;let{document:o,selectedRange:c}=t;return(n=this.delegate)===null||n===void 0||(i=n.compositionWillLoadSnapshot)===null||i===void 0||i.call(n),this.setDocument(o??new se),this.setSelection(c??[0,0]),(r=this.delegate)===null||r===void 0||(s=r.compositionDidLoadSnapshot)===null||s===void 0?void 0:s.call(r)}insertText(t){let{updatePosition:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0};const i=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(t,i));const r=i[0],s=r+t.getLength();return n&&this.setSelection(s),this.notifyDelegateOfInsertionAtRange([r,s])}insertBlock(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new be;const n=new se([t]);return this.insertDocument(n)}insertDocument(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new se;const n=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(t,n));const i=n[0],r=i+t.getLength();return this.setSelection(r),this.notifyDelegateOfInsertionAtRange([i,r])}insertString(t,n){const i=this.getCurrentTextAttributes(),r=pe.textForStringWithAttributes(t,i);return this.insertText(r,n)}insertBlockBreak(){const t=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(t));const n=t[0],i=n+1;return this.setSelection(i),this.notifyDelegateOfInsertionAtRange([n,i])}insertLineBreak(){const t=new Vo(this);if(t.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(t.startPosition);if(t.shouldPrependListItem()){const n=new se([t.block.copyWithoutText()]);return this.insertDocument(n)}return t.shouldInsertBlockBreak()?this.insertBlockBreak():t.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():t.shouldBreakFormattedBlock()?this.breakFormattedBlock(t):this.insertString(`
`)}insertHTML(t){const n=Vn.parse(t,{purifyOptions:{SAFE_FOR_XML:!0}}).getDocument(),i=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(n,i));const r=i[0],s=r+n.getLength()-1;return this.setSelection(s),this.notifyDelegateOfInsertionAtRange([r,s])}replaceHTML(t){const n=Vn.parse(t).getDocument().copyUsingObjectsFromDocument(this.document),i=this.getLocationRange({strict:!1}),r=this.document.rangeFromLocationRange(i);return this.setDocument(n),this.setSelection(r)}insertFile(t){return this.insertFiles([t])}insertFiles(t){const n=[];return Array.from(t).forEach(i=>{var r;if((r=this.delegate)!==null&&r!==void 0&&r.compositionShouldAcceptFile(i)){const s=hn.attachmentForFile(i);n.push(s)}}),this.insertAttachments(n)}insertAttachment(t){return this.insertAttachments([t])}insertAttachments(t){let n=new pe;return Array.from(t).forEach(i=>{var r;const s=i.getType(),o=(r=Ur[s])===null||r===void 0?void 0:r.presentation,c=this.getCurrentTextAttributes();o&&(c.presentation=o);const l=pe.textForAttachmentWithAttributes(i,c);n=n.appendText(l)}),this.insertText(n)}shouldManageDeletingInDirection(t){const n=this.getLocationRange();if(Ce(n)){if(t==="backward"&&n[0].offset===0||this.shouldManageMovingCursorInDirection(t))return!0}else if(n[0].index!==n[1].index)return!0;return!1}deleteInDirection(t){let n,i,r,{length:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=this.getLocationRange();let c=this.getSelectedRange();const l=Ce(c);if(l?i=t==="backward"&&o[0].offset===0:r=o[0].index!==o[1].index,i&&this.canDecreaseBlockAttributeLevel()){const m=this.getBlock();if(m.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(c[0]),m.isEmpty())return!1}return l&&(c=this.getExpandedRangeInDirection(t,{length:s}),t==="backward"&&(n=this.getAttachmentAtRange(c))),n?(this.editAttachment(n),!1):(this.setDocument(this.document.removeTextAtRange(c)),this.setSelection(c[0]),!i&&!r&&void 0)}moveTextFromRange(t){const[n]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(t,n)),this.setSelection(n)}removeAttachment(t){const n=this.document.getRangeOfAttachment(t);if(n)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(n)),this.setSelection(n[0])}removeLastBlockAttribute(){const[t,n]=Array.from(this.getSelectedRange()),i=this.document.getBlockAtPosition(n);return this.removeCurrentAttribute(i.getLastAttribute()),this.setSelection(t)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(t){const n=this.currentAttributes[t];return n!=null&&n!==!1}toggleCurrentAttribute(t){const n=!this.currentAttributes[t];return n?this.setCurrentAttribute(t,n):this.removeCurrentAttribute(t)}canSetCurrentAttribute(t){return At(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)}canSetCurrentTextAttribute(t){const n=this.getSelectedDocument();if(n){for(const i of Array.from(n.getAttachments()))if(!i.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(t){const n=this.getBlock();if(n)return!n.isTerminalBlock()}setCurrentAttribute(t,n){return At(t)?this.setBlockAttribute(t,n):(this.setTextAttribute(t,n),this.currentAttributes[t]=n,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(t,n,i){var r;const s=this.document.getBlockAtPosition(t),o=(r=At(s.getLastAttribute()))===null||r===void 0?void 0:r.htmlAttributes;if(s&&o!=null&&o.includes(n)){const c=this.document.setHTMLAttributeAtPosition(t,n,i);this.setDocument(c)}}setTextAttribute(t,n){const i=this.getSelectedRange();if(!i)return;const[r,s]=Array.from(i);if(r!==s)return this.setDocument(this.document.addAttributeAtRange(t,n,i));if(t==="href"){const o=pe.textForStringWithAttributes(n,{href:n});return this.insertText(o)}}setBlockAttribute(t,n){const i=this.getSelectedRange();if(this.canSetCurrentAttribute(t))return this.setDocument(this.document.applyBlockAttributeAtRange(t,n,i)),this.setSelection(i)}removeCurrentAttribute(t){return At(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(t){const n=this.getSelectedRange();if(n)return this.setDocument(this.document.removeAttributeAtRange(t,n))}removeBlockAttribute(t){const n=this.getSelectedRange();if(n)return this.setDocument(this.document.removeAttributeAtRange(t,n))}canDecreaseNestingLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getNestingLevel())>0}canIncreaseNestingLevel(){var t;const n=this.getBlock();if(n){if((t=At(n.getLastNestableAttribute()))===null||t===void 0||!t.listAttribute)return n.getNestingLevel()>0;{const i=this.getPreviousBlock();if(i)return function(){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Je((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).slice(0,r.length),r)}(i.getListItemAttributes(),n.getListItemAttributes())}}}decreaseNestingLevel(){const t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))}increaseNestingLevel(){const t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var t;const n=(t=this.getBlock())===null||t===void 0?void 0:t.getLastAttribute();if(n)return this.removeCurrentAttribute(n)}decreaseListLevel(){let[t]=Array.from(this.getSelectedRange());const{index:n}=this.document.locationFromPosition(t);let i=n;const r=this.getBlock().getAttributeLevel();let s=this.document.getBlockAtIndex(i+1);for(;s&&s.isListItem()&&!(s.getAttributeLevel()<=r);)i++,s=this.document.getBlockAtIndex(i+1);t=this.document.positionFromLocation({index:n,offset:0});const o=this.document.positionFromLocation({index:i,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([t,o]))}updateCurrentAttributes(){const t=this.getSelectedRange({ignoreLock:!0});if(t){const n=this.document.getCommonAttributesAtRange(t);if(Array.from(wr()).forEach(i=>{n[i]||this.canSetCurrentAttribute(i)||(n[i]=!1)}),!dn(n,this.currentAttributes))return this.currentAttributes=n,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return So.call({},this.currentAttributes)}getCurrentTextAttributes(){const t={};for(const n in this.currentAttributes){const i=this.currentAttributes[n];i!==!1&&Rr(n)&&(t[n]=i)}return t}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(t){var n;const i=this.document.locationRangeFromRange(t);return(n=this.delegate)===null||n===void 0?void 0:n.compositionDidRequestChangingSelectionToLocationRange(i)}getSelectedRange(){const t=this.getLocationRange();if(t)return this.document.rangeFromLocationRange(t)}setSelectedRange(t){const n=this.document.locationRangeFromRange(t);return this.getSelectionManager().setLocationRange(n)}getPosition(){const t=this.getLocationRange();if(t)return this.document.positionFromLocation(t[0])}getLocationRange(t){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(t)||mt({index:0,offset:0})}withTargetLocationRange(t,n){let i;this.targetLocationRange=t;try{i=n()}finally{this.targetLocationRange=null}return i}withTargetRange(t,n){const i=this.document.locationRangeFromRange(t);return this.withTargetLocationRange(i,n)}withTargetDOMRange(t,n){const i=this.createLocationRangeFromDOMRange(t,{strict:!1});return this.withTargetLocationRange(i,n)}getExpandedRangeInDirection(t){let{length:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[i,r]=Array.from(this.getSelectedRange());return t==="backward"?n?i-=n:i=this.translateUTF16PositionFromOffset(i,-1):n?r+=n:r=this.translateUTF16PositionFromOffset(r,1),mt([i,r])}shouldManageMovingCursorInDirection(t){if(this.editingAttachment)return!0;const n=this.getExpandedRangeInDirection(t);return this.getAttachmentAtRange(n)!=null}moveCursorInDirection(t){let n,i;if(this.editingAttachment)i=this.document.getRangeOfAttachment(this.editingAttachment);else{const r=this.getSelectedRange();i=this.getExpandedRangeInDirection(t),n=!Ai(r,i)}if(t==="backward"?this.setSelectedRange(i[0]):this.setSelectedRange(i[1]),n){const r=this.getAttachmentAtRange(i);if(r)return this.editAttachment(r)}}expandSelectionInDirection(t){let{length:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getExpandedRangeInDirection(t,{length:n});return this.setSelectedRange(i)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(t){const n=this.getPosition(),i=this.document.getRangeOfCommonAttributeAtPosition(t,n);return this.setSelectedRange(i)}selectionContainsAttachments(){var t;return((t=this.getSelectedAttachments())===null||t===void 0?void 0:t.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(t){const n=this.document.locationFromPosition(t);if(n)return this.locationIsCursorTarget(n)}positionIsBlockBreak(t){var n;return(n=this.document.getPieceAtPosition(t))===null||n===void 0?void 0:n.isBlockBreak()}getSelectedDocument(){const t=this.getSelectedRange();if(t)return this.document.getDocumentAtRange(t)}getSelectedAttachments(){var t;return(t=this.getSelectedDocument())===null||t===void 0?void 0:t.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){const t=this.document.getAttachments(),{added:n,removed:i}=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const o=[],c=[],l=new Set;r.forEach(b=>{l.add(b)});const m=new Set;return s.forEach(b=>{m.add(b),l.has(b)||o.push(b)}),r.forEach(b=>{m.has(b)||c.push(b)}),{added:o,removed:c}}(this.attachments,t);return this.attachments=t,Array.from(i).forEach(r=>{var s,o;r.delegate=null,(s=this.delegate)===null||s===void 0||(o=s.compositionDidRemoveAttachment)===null||o===void 0||o.call(s,r)}),(()=>{const r=[];return Array.from(n).forEach(s=>{var o,c;s.delegate=this,r.push((o=this.delegate)===null||o===void 0||(c=o.compositionDidAddAttachment)===null||c===void 0?void 0:c.call(o,s))}),r})()}attachmentDidChangeAttributes(t){var n,i;return this.revision++,(n=this.delegate)===null||n===void 0||(i=n.compositionDidEditAttachment)===null||i===void 0?void 0:i.call(n,t)}attachmentDidChangePreviewURL(t){var n,i;return this.revision++,(n=this.delegate)===null||n===void 0||(i=n.compositionDidChangeAttachmentPreviewURL)===null||i===void 0?void 0:i.call(n,t)}editAttachment(t,n){var i,r;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,(i=this.delegate)===null||i===void 0||(r=i.compositionDidStartEditingAttachment)===null||r===void 0?void 0:r.call(i,this.editingAttachment,n)}stopEditingAttachment(){var t,n;this.editingAttachment&&((t=this.delegate)===null||t===void 0||(n=t.compositionDidStopEditingAttachment)===null||n===void 0||n.call(t,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(t,n){return this.setDocument(this.document.updateAttributesForAttachment(t,n))}removeAttributeForAttachment(t,n){return this.setDocument(this.document.removeAttributeForAttachment(t,n))}breakFormattedBlock(t){let{document:n}=t;const{block:i}=t;let r=t.startPosition,s=[r-1,r];i.getBlockBreakPosition()===t.startLocation.offset?(i.breaksOnReturn()&&t.nextCharacter===`
`?r+=1:n=n.removeTextAtRange(s),s=[r,r]):t.nextCharacter===`
`?t.previousCharacter===`
`?s=[r-1,r+1]:(s=[r,r+1],r+=1):t.startLocation.offset-1!=0&&(r+=1);const o=new se([i.removeLastAttribute().copyWithoutText()]);return this.setDocument(n.insertDocumentAtRange(o,s)),this.setSelection(r)}getPreviousBlock(){const t=this.getLocationRange();if(t){const{index:n}=t[0];if(n>0)return this.document.getBlockAtIndex(n-1)}}getBlock(){const t=this.getLocationRange();if(t)return this.document.getBlockAtIndex(t[0].index)}getAttachmentAtRange(t){const n=this.document.getDocumentAtRange(t);if(n.toString()==="".concat("",`
`))return n.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var t,n;return(t=this.delegate)===null||t===void 0||(n=t.compositionDidChangeCurrentAttributes)===null||n===void 0?void 0:n.call(t,this.currentAttributes)}notifyDelegateOfInsertionAtRange(t){var n,i;return(n=this.delegate)===null||n===void 0||(i=n.compositionDidPerformInsertionAtRange)===null||i===void 0?void 0:i.call(n,t)}translateUTF16PositionFromOffset(t,n){const i=this.document.toUTF16String(),r=i.offsetFromUCS2Offset(t);return i.offsetToUCS2Offset(r+n)}}Oe.proxyMethod("getSelectionManager().getPointRange"),Oe.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),Oe.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),Oe.proxyMethod("getSelectionManager().locationIsCursorTarget"),Oe.proxyMethod("getSelectionManager().selectionIsExpanded"),Oe.proxyMethod("delegate?.getSelectionManager");class Nr extends Tt{constructor(t){super(...arguments),this.composition=t,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(t){let{context:n,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.undoEntries.slice(-1)[0];if(!i||!cu(r,t,n)){const s=this.createEntry({description:t,context:n});this.undoEntries.push(s),this.redoEntries=[]}}undo(){const t=this.undoEntries.pop();if(t){const n=this.createEntry(t);return this.redoEntries.push(n),this.composition.loadSnapshot(t.snapshot)}}redo(){const t=this.redoEntries.pop();if(t){const n=this.createEntry(t);return this.undoEntries.push(n),this.composition.loadSnapshot(t.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:t,context:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:t==null?void 0:t.toString(),context:JSON.stringify(n),snapshot:this.composition.getSnapshot()}}}const cu=(e,t,n)=>(e==null?void 0:e.description)===(t==null?void 0:t.toString())&&(e==null?void 0:e.context)===JSON.stringify(n),cr="attachmentGallery";class Uo{constructor(t){this.document=t.document,this.selectedRange=t.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(t=>this.document=this.document.removeAttributeAtRange(cr,t))}applyBlockAttribute(){let t=0;this.findRangesOfPieces().forEach(n=>{n[1]-n[0]>1&&(n[0]+=t,n[1]+=t,this.document.getCharacterAtPosition(n[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(n[1]),n[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),n[1]++,t++),n[0]!==0&&this.document.getCharacterAtPosition(n[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(n[0]),n[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),n[0]++,t++),this.document=this.document.applyBlockAttributeAtRange(cr,!0,n))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(cr)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}}const Go=function(e){const t=new Uo(e);return t.perform(),t.getSnapshot()},uu=[Go];class Xo{constructor(t,n,i){this.insertFiles=this.insertFiles.bind(this),this.composition=t,this.selectionManager=n,this.element=i,this.undoManager=new Nr(this.composition),this.filters=uu.slice(0)}loadDocument(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})}loadHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=Vn.parse(t,{referenceElement:this.element}).getDocument();return this.loadDocument(n)}loadJSON(t){let{document:n,selectedRange:i}=t;return n=se.fromJSON(n),this.loadSnapshot({document:n,selectedRange:i})}loadSnapshot(t){return this.undoManager=new Nr(this.composition),this.composition.loadSnapshot(t)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(t){return this.composition.deleteInDirection(t)}insertAttachment(t){return this.composition.insertAttachment(t)}insertAttachments(t){return this.composition.insertAttachments(t)}insertDocument(t){return this.composition.insertDocument(t)}insertFile(t){return this.composition.insertFile(t)}insertFiles(t){return this.composition.insertFiles(t)}insertHTML(t){return this.composition.insertHTML(t)}insertString(t){return this.composition.insertString(t)}insertText(t){return this.composition.insertText(t)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(t){const n=this.getDocument().locationRangeFromRange([t,t+1]);return this.selectionManager.getClientRectAtLocationRange(n)}expandSelectionInDirection(t){return this.composition.expandSelectionInDirection(t)}moveCursorInDirection(t){return this.composition.moveCursorInDirection(t)}setSelectedRange(t){return this.composition.setSelectedRange(t)}activateAttribute(t){let n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this.composition.setCurrentAttribute(t,n)}attributeIsActive(t){return this.composition.hasCurrentAttribute(t)}canActivateAttribute(t){return this.composition.canSetCurrentAttribute(t)}deactivateAttribute(t){return this.composition.removeCurrentAttribute(t)}setHTMLAtributeAtPosition(t,n,i){this.composition.setHTMLAtributeAtPosition(t,n,i)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(t){let{context:n,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(t,{context:n,consolidatable:i})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}}class Yo{constructor(t){this.element=t}findLocationFromContainerAndOffset(t,n){let{strict:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},r=0,s=!1;const o={index:0,offset:0},c=this.findAttachmentElementParentForNode(t);c&&(t=c.parentNode,n=Xi(c));const l=xi(this.element,{usingFilter:Jo});for(;l.nextNode();){const m=l.currentNode;if(m===t&&Bn(t)){an(m)||(o.offset+=n);break}if(m.parentNode===t){if(r++===n)break}else if(!Ve(t,m)&&r>0)break;Ts(m,{strict:i})?(s&&o.index++,o.offset=0,s=!0):o.offset+=ur(m)}return o}findContainerAndOffsetFromLocation(t){let n,i;if(t.index===0&&t.offset===0){for(n=this.element,i=0;n.firstChild;)if(n=n.firstChild,Yi(n)){i=1;break}return[n,i]}let[r,s]=this.findNodeAndOffsetFromLocation(t);if(r){if(Bn(r))ur(r)===0?(n=r.parentNode.parentNode,i=Xi(r.parentNode),an(r,{name:"right"})&&i++):(n=r,i=t.offset-s);else{if(n=r.parentNode,!Ts(r.previousSibling)&&!Yi(n))for(;r===n.lastChild&&(r=n,n=n.parentNode,!Yi(n)););i=Xi(r),t.offset!==0&&i++}return[n,i]}}findNodeAndOffsetFromLocation(t){let n,i,r=0;for(const s of this.getSignificantNodesForIndex(t.index)){const o=ur(s);if(t.offset<=r+o)if(Bn(s)){if(n=s,i=r,t.offset===i&&an(n))break}else n||(n=s,i=r);if(r+=o,r>t.offset)break}return[n,i]}findAttachmentElementParentForNode(t){for(;t&&t!==this.element;){if(Ge(t))return t;t=t.parentNode}}getSignificantNodesForIndex(t){const n=[],i=xi(this.element,{usingFilter:du});let r=!1;for(;i.nextNode();){const o=i.currentNode;var s;if(on(o)){if(s!=null?s++:s=0,s===t)r=!0;else if(r)break}else r&&n.push(o)}return n}}const ur=function(e){return e.nodeType===Node.TEXT_NODE?an(e)?0:e.textContent.length:Ht(e)==="br"||Ge(e)?1:0},du=function(e){return hu(e)===NodeFilter.FILTER_ACCEPT?Jo(e):NodeFilter.FILTER_REJECT},hu=function(e){return Ao(e)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},Jo=function(e){return Ge(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT};class Ko{createDOMRangeFromPoint(t){let n,{x:i,y:r}=t;if(document.caretPositionFromPoint){const{offsetNode:s,offset:o}=document.caretPositionFromPoint(i,r);return n=document.createRange(),n.setStart(s,o),n}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(i,r);if(document.body.createTextRange){const s=Fn();try{const o=document.body.createTextRange();o.moveToPoint(i,r),o.select()}catch{}return n=Fn(),wo(s),n}}getClientRectsForDOMRange(t){const n=Array.from(t.getClientRects());return[n[0],n[n.length-1]]}}class $e extends Tt{constructor(t){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=t,this.locationMapper=new Yo(this.element),this.pointMapper=new Ko,this.lockCount=0,bt("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.strict===!1?this.createLocationRangeFromDOMRange(Fn()):t.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(t){if(this.lockedLocationRange)return;t=mt(t);const n=this.createDOMRangeFromLocationRange(t);n&&(wo(n),this.updateCurrentLocationRange(t))}setLocationRangeFromPointRange(t){t=mt(t);const n=this.getLocationAtPoint(t[0]),i=this.getLocationAtPoint(t[1]);this.setLocationRange([n,i])}getClientRectAtLocationRange(t){const n=this.createDOMRangeFromLocationRange(t);if(n)return this.getClientRectsForDOMRange(n)[1]}locationIsCursorTarget(t){const n=Array.from(this.findNodeAndOffsetFromLocation(t))[0];return an(n)}lock(){this.lockCount++==0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount==0){const{lockedLocationRange:t}=this;if(this.lockedLocationRange=null,t!=null)return this.setLocationRange(t)}}clearSelection(){var t;return(t=Po())===null||t===void 0?void 0:t.removeAllRanges()}selectionIsCollapsed(){var t;return((t=Fn())===null||t===void 0?void 0:t.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(t,n){if(t==null||!this.domRangeWithinElement(t))return;const i=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,n);if(!i)return;const r=t.collapsed?void 0:this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,n);return mt([i,r])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let t;this.paused=!0;const n=()=>{if(this.paused=!1,clearTimeout(i),Array.from(t).forEach(r=>{r.destroy()}),Ve(document,this.element))return this.selectionDidChange()},i=setTimeout(n,200);t=["mousemove","keydown"].map(r=>bt(r,{onElement:document,withCallback:n}))}selectionDidChange(){if(!this.paused&&!Xr(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(t){var n,i;if((t??(t=this.createLocationRangeFromDOMRange(Fn())))&&!Ai(t,this.currentLocationRange))return this.currentLocationRange=t,(n=this.delegate)===null||n===void 0||(i=n.locationRangeDidChange)===null||i===void 0?void 0:i.call(n,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(t){const n=this.findContainerAndOffsetFromLocation(t[0]),i=Ce(t)?n:this.findContainerAndOffsetFromLocation(t[1])||n;if(n!=null&&i!=null){const r=document.createRange();return r.setStart(...Array.from(n||[])),r.setEnd(...Array.from(i||[])),r}}getLocationAtPoint(t){const n=this.createDOMRangeFromPoint(t);var i;if(n)return(i=this.createLocationRangeFromDOMRange(n))===null||i===void 0?void 0:i[0]}domRangeWithinElement(t){return t.collapsed?Ve(this.element,t.startContainer):Ve(this.element,t.startContainer)&&Ve(this.element,t.endContainer)}}$e.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),$e.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),$e.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),$e.proxyMethod("pointMapper.createDOMRangeFromPoint"),$e.proxyMethod("pointMapper.getClientRectsForDOMRange");var Qo=Object.freeze({__proto__:null,Attachment:hn,AttachmentManager:$o,AttachmentPiece:ln,Block:be,Composition:Oe,Document:se,Editor:Xo,HTMLParser:Vn,HTMLSanitizer:wi,LineBreakInsertion:Vo,LocationMapper:Yo,ManagedAttachment:xt,Piece:tn,PointMapper:Ko,SelectionManager:$e,SplittableList:Ci,StringPiece:is,Text:pe,UndoManager:Nr}),fu=Object.freeze({__proto__:null,ObjectView:Ze,AttachmentView:es,BlockView:Fo,DocumentView:Ri,PieceView:No,PreviewableAttachmentView:_o,TextView:Bo});const{lang:dr,css:We,keyNames:mu}=Xn,hr=function(e){return function(){const t=e.apply(this,arguments);t.do(),this.undos||(this.undos=[]),this.undos.push(t.undo)}};class Zo extends Tt{constructor(t,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),qt(this,"makeElementMutable",hr(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),qt(this,"addToolbar",hr(()=>{const s=st({tagName:"div",className:We.attachmentToolbar,data:{trixMutable:!0},childNodes:st({tagName:"div",className:"trix-button-row",childNodes:st({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:st({tagName:"button",className:"trix-button trix-button--remove",textContent:dr.remove,attributes:{title:dr.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&s.appendChild(st({tagName:"div",className:We.attachmentMetadataContainer,childNodes:st({tagName:"span",className:We.attachmentMetadata,childNodes:[st({tagName:"span",className:We.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),st({tagName:"span",className:We.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),bt("click",{onElement:s,withCallback:this.didClickToolbar}),bt("click",{onElement:s,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),_n("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:s,attachment:this.attachment}}),{do:()=>this.element.appendChild(s),undo:()=>Fe(s)}})),qt(this,"installCaptionEditor",hr(()=>{const s=st({tagName:"textarea",className:We.attachmentCaptionEditor,attributes:{placeholder:dr.captionPlaceholder},data:{trixMutable:!0}});s.value=this.attachmentPiece.getCaption();const o=s.cloneNode();o.classList.add("trix-autoresize-clone"),o.tabIndex=-1;const c=function(){o.value=s.value,s.style.height=o.scrollHeight+"px"};bt("input",{onElement:s,withCallback:c}),bt("input",{onElement:s,withCallback:this.didInputCaption}),bt("keydown",{onElement:s,withCallback:this.didKeyDownCaption}),bt("change",{onElement:s,withCallback:this.didChangeCaption}),bt("blur",{onElement:s,withCallback:this.didBlurCaption});const l=this.element.querySelector("figcaption"),m=l.cloneNode();return{do:()=>{if(l.style.display="none",m.appendChild(s),m.appendChild(o),m.classList.add("".concat(We.attachmentCaption,"--editing")),l.parentElement.insertBefore(m,l),c(),this.options.editCaption)return Kr(()=>s.focus())},undo(){Fe(m),l.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=t,this.element=n,this.container=i,this.options=r,this.attachment=this.attachmentPiece.attachment,Ht(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var t;let n=this.undos.pop();for(this.savePendingCaption();n;)n(),n=this.undos.pop();(t=this.delegate)===null||t===void 0||t.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption!=null){const s=this.pendingCaption;var t,n,i,r;this.pendingCaption=null,s?(t=this.delegate)===null||t===void 0||(n=t.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||n===void 0||n.call(t,{caption:s},this.attachment):(i=this.delegate)===null||i===void 0||(r=i.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||r===void 0||r.call(i,"caption",this.attachment)}}didClickToolbar(t){return t.preventDefault(),t.stopPropagation()}didClickActionButton(t){var n;if(t.target.getAttribute("data-trix-action")==="remove")return(n=this.delegate)===null||n===void 0?void 0:n.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(t){var n,i;if(mu[t.keyCode]==="return")return t.preventDefault(),this.savePendingCaption(),(n=this.delegate)===null||n===void 0||(i=n.attachmentEditorDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(n,this.attachment)}didInputCaption(t){this.pendingCaption=t.target.value.replace(/\s/g," ").trim()}didChangeCaption(t){return this.savePendingCaption()}didBlurCaption(t){return this.savePendingCaption()}}class ta extends Tt{constructor(t,n){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=t,this.composition=n,this.documentView=new Ri(this.composition.document,{element:this.element}),bt("focus",{onElement:this.element,withCallback:this.didFocus}),bt("blur",{onElement:this.element,withCallback:this.didBlur}),bt("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),bt("mousedown",{onElement:this.element,matchingSelector:Ue,withCallback:this.didClickAttachment}),bt("click",{onElement:this.element,matchingSelector:"a".concat(Ue),preventDefault:!0})}didFocus(t){var n;const i=()=>{var r,s;if(!this.focused)return this.focused=!0,(r=this.delegate)===null||r===void 0||(s=r.compositionControllerDidFocus)===null||s===void 0?void 0:s.call(r)};return((n=this.blurPromise)===null||n===void 0?void 0:n.then(i))||i()}didBlur(t){this.blurPromise=new Promise(n=>Kr(()=>{var i,r;return Xr(this.element)||(this.focused=null,(i=this.delegate)===null||i===void 0||(r=i.compositionControllerDidBlur)===null||r===void 0||r.call(i)),this.blurPromise=null,n()}))}didClickAttachment(t,n){var i,r;const s=this.findAttachmentForElement(n),o=!!Be(t.target,{matchingSelector:"figcaption"});return(i=this.delegate)===null||i===void 0||(r=i.compositionControllerDidSelectAttachment)===null||r===void 0?void 0:r.call(i,s,{editCaption:o})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var t,n,i,r,s,o;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&((i=this.delegate)===null||i===void 0||(r=i.compositionControllerWillSyncDocumentView)===null||r===void 0||r.call(i),this.documentView.sync(),(s=this.delegate)===null||s===void 0||(o=s.compositionControllerDidSyncDocumentView)===null||o===void 0||o.call(s)),(t=this.delegate)===null||t===void 0||(n=t.compositionControllerDidRender)===null||n===void 0?void 0:n.call(t)}rerenderViewForObject(t){return this.invalidateViewForObject(t),this.render()}invalidateViewForObject(t){return this.documentView.invalidateViewForObject(t)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(t,n){var i;if(((i=this.attachmentEditor)===null||i===void 0?void 0:i.attachment)===t)return;const r=this.documentView.findElementForObject(t);if(!r)return;this.uninstallAttachmentEditor();const s=this.composition.document.getAttachmentPieceForAttachment(t);this.attachmentEditor=new Zo(s,r,this.element,n),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var t;return(t=this.attachmentEditor)===null||t===void 0?void 0:t.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(t,n){var i,r;return(i=this.delegate)===null||i===void 0||(r=i.compositionControllerWillUpdateAttachment)===null||r===void 0||r.call(i,n),this.composition.updateAttributesForAttachment(t,n)}attachmentEditorDidRequestRemovingAttributeForAttachment(t,n){var i,r;return(i=this.delegate)===null||i===void 0||(r=i.compositionControllerWillUpdateAttachment)===null||r===void 0||r.call(i,n),this.composition.removeAttributeForAttachment(t,n)}attachmentEditorDidRequestRemovalOfAttachment(t){var n,i;return(n=this.delegate)===null||n===void 0||(i=n.compositionControllerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(n,t)}attachmentEditorDidRequestDeselectingAttachment(t){var n,i;return(n=this.delegate)===null||n===void 0||(i=n.compositionControllerDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(n,t)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))}}class ea extends Tt{}const na="data-trix-mutable",pu="[".concat(na,"]"),gu={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};class ia extends Tt{constructor(t){super(t),this.didMutate=this.didMutate.bind(this),this.element=t,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,gu)}stop(){return this.observer.disconnect()}didMutate(t){var n,i;if(this.mutations.push(...Array.from(this.findSignificantMutations(t)||[])),this.mutations.length)return(n=this.delegate)===null||n===void 0||(i=n.elementDidMutate)===null||i===void 0||i.call(n,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(t){return t.filter(n=>this.mutationIsSignificant(n))}mutationIsSignificant(t){if(this.nodeIsMutable(t.target))return!1;for(const n of Array.from(this.nodesModifiedByMutation(t)))if(this.nodeIsSignificant(n))return!0;return!1}nodeIsSignificant(t){return t!==this.element&&!this.nodeIsMutable(t)&&!Ao(t)}nodeIsMutable(t){return Be(t,{matchingSelector:pu})}nodesModifiedByMutation(t){const n=[];switch(t.type){case"attributes":t.attributeName!==na&&n.push(t.target);break;case"characterData":n.push(t.target.parentNode),n.push(t.target);break;case"childList":n.push(...Array.from(t.addedNodes||[])),n.push(...Array.from(t.removedNodes||[]))}return n}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){const{additions:t,deletions:n}=this.getTextChangesFromCharacterData(),i=this.getTextChangesFromChildList();Array.from(i.additions).forEach(c=>{Array.from(t).includes(c)||t.push(c)}),n.push(...Array.from(i.deletions||[]));const r={},s=t.join("");s&&(r.textAdded=s);const o=n.join("");return o&&(r.textDeleted=o),r}getMutationsByType(t){return Array.from(this.mutations).filter(n=>n.type===t)}getTextChangesFromChildList(){let t,n;const i=[],r=[];Array.from(this.getMutationsByType("childList")).forEach(c=>{i.push(...Array.from(c.addedNodes||[])),r.push(...Array.from(c.removedNodes||[]))}),i.length===0&&r.length===1&&on(r[0])?(t=[],n=[`
`]):(t=Br(i),n=Br(r));const s=t.filter((c,l)=>c!==n[l]).map(Rn),o=n.filter((c,l)=>c!==t[l]).map(Rn);return{additions:s,deletions:o}}getTextChangesFromCharacterData(){let t,n;const i=this.getMutationsByType("characterData");if(i.length){const r=i[0],s=i[i.length-1],o=function(c,l){let m,b;return c=$n.box(c),(l=$n.box(l)).length<c.length?[b,m]=ws(c,l):[m,b]=ws(l,c),{added:m,removed:b}}(Rn(r.oldValue),Rn(s.target.data));t=o.added,n=o.removed}return{additions:t?[t]:[],deletions:n?[n]:[]}}}const Br=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];for(const n of Array.from(e))switch(n.nodeType){case Node.TEXT_NODE:t.push(n.data);break;case Node.ELEMENT_NODE:Ht(n)==="br"?t.push(`
`):t.push(...Array.from(Br(n.childNodes)||[]))}return t};class ra extends Ei{constructor(t){super(...arguments),this.file=t}perform(t){const n=new FileReader;return n.onerror=()=>t(!1),n.onload=()=>{n.onerror=null;try{n.abort()}catch{}return t(!0,this.file)},n.readAsArrayBuffer(this.file)}}class vu{constructor(t){this.element=t}shouldIgnore(t){return!!Gn.samsungAndroid&&(this.previousEvent=this.event,this.event=t,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&bu(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&this.event.inputType!=="insertText"&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var t;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&((t=this.event.data)===null||t===void 0?void 0:t.length)>50}isBeforeInputInsertText(){return this.event.type==="beforeinput"&&this.event.inputType==="insertText"}previousEventWasUnidentifiedKeydown(){var t,n;return((t=this.previousEvent)===null||t===void 0?void 0:t.type)==="keydown"&&((n=this.previousEvent)===null||n===void 0?void 0:n.key)==="Unidentified"}}const bu=(e,t)=>Qs(e)===Qs(t),yu=new RegExp("(".concat("","|").concat(Pi,"|").concat(_e,"|\\s)+"),"g"),Qs=e=>e.replace(yu," ").trim();class Di extends Tt{constructor(t){super(...arguments),this.element=t,this.mutationObserver=new ia(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new vu(this.element);for(const n in this.constructor.events)bt(n,{onElement:this.element,withCallback:this.handlerFor(n)})}elementDidMutate(t){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var t,n;return(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidRequestRender)===null||n===void 0?void 0:n.call(t)}requestReparse(){var t,n;return(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidRequestReparse)===null||n===void 0||n.call(t),this.requestRender()}attachFiles(t){const n=Array.from(t).map(i=>new ra(i));return Promise.all(n).then(i=>{this.handleInput(function(){var r,s;return(r=this.delegate)===null||r===void 0||r.inputControllerWillAttachFiles(),(s=this.responder)===null||s===void 0||s.insertFiles(i),this.requestRender()})})}handlerFor(t){return n=>{n.defaultPrevented||this.handleInput(()=>{if(!Xr(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(n))return;this.eventName=t,this.constructor.events[t].call(this,n)}})}}handleInput(t){try{var n;(n=this.delegate)===null||n===void 0||n.inputControllerWillHandleInput(),t.call(this)}finally{var i;(i=this.delegate)===null||i===void 0||i.inputControllerDidHandleInput()}}createLinkHTML(t,n){const i=document.createElement("a");return i.href=t,i.textContent=n||t,i.outerHTML}}var fr;qt(Di,"events",{});const{browser:Su,keyNames:sa}=Xn;let xu=0;class Ee extends Di{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(const n in t){const i=t[n];this.inputSummary[n]=i}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),Ke.reset()}elementDidMutate(t){var n,i;return this.isComposing()?(n=this.delegate)===null||n===void 0||(i=n.inputControllerDidAllowUnhandledInput)===null||i===void 0?void 0:i.call(n):this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(t){let{textAdded:n,textDeleted:i}=t;if(this.inputSummary.preferDocument)return!0;const r=n!=null?n===this.inputSummary.textAdded:!this.inputSummary.textAdded,s=i!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,o=[`
`,` 
`].includes(n)&&!r,c=i===`
`&&!s;if(o&&!c||c&&!o){const m=this.getSelectedRange();if(m){var l;const b=o?n.replace(/\n$/,"").length||-1:(n==null?void 0:n.length)||1;if((l=this.responder)!==null&&l!==void 0&&l.positionIsBlockBreak(m[1]+b))return!0}}return r&&s}mutationIsSignificant(t){var n;const i=Object.keys(t).length>0,r=((n=this.compositionInput)===null||n===void 0?void 0:n.getEndData())==="";return i||!r}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new De(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(t,n){var i;return((i=this.responder)===null||i===void 0?void 0:i.deleteInDirection(t))!==!1?this.setInputSummary({didDelete:!0}):n?(n.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(t){var n;if(!function(r){if(r==null||!r.setData)return!1;for(const s in Ls){const o=Ls[s];try{if(r.setData(s,o),!r.getData(s)===o)return!1}catch{return!1}}return!0}(t))return;const i=(n=this.responder)===null||n===void 0?void 0:n.getSelectedDocument().toSerializableDocument();return t.setData("application/x-trix-document",JSON.stringify(i)),t.setData("text/html",Ri.render(i).innerHTML),t.setData("text/plain",i.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(t){const n={};return Array.from((t==null?void 0:t.types)||[]).forEach(i=>{n[i]=!0}),n.Files||n["application/x-trix-document"]||n["text/html"]||n["text/plain"]}getPastedHTMLUsingHiddenElement(t){const n=this.getSelectedRange(),i={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},r=st({style:i,tagName:"div",editable:!0});return document.body.appendChild(r),r.focus(),requestAnimationFrame(()=>{const s=r.innerHTML;return Fe(r),this.setSelectedRange(n),t(s)})}}qt(Ee,"events",{keydown(e){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;const t=sa[e.keyCode];if(t){var n;let r=this.keys;["ctrl","alt","shift","meta"].forEach(s=>{var o;e["".concat(s,"Key")]&&(s==="ctrl"&&(s="control"),r=(o=r)===null||o===void 0?void 0:o[s])}),((n=r)===null||n===void 0?void 0:n[t])!=null&&(this.setInputSummary({keyName:t}),Ke.reset(),r[t].call(this,e))}if(ko(e)){const r=String.fromCharCode(e.keyCode).toLowerCase();if(r){var i;const s=["alt","shift"].map(o=>{if(e["".concat(o,"Key")])return o}).filter(o=>o);s.push(r),(i=this.delegate)!==null&&i!==void 0&&i.inputControllerDidReceiveKeyboardCommand(s)&&e.preventDefault()}}},keypress(e){if(this.inputSummary.eventName!=null||e.metaKey||e.ctrlKey&&!e.altKey)return;const t=Tu(e);var n,i;return t?((n=this.delegate)===null||n===void 0||n.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.insertString(t),this.setInputSummary({textAdded:t,didDelete:this.selectionIsExpanded()})):void 0},textInput(e){const{data:t}=e,{textAdded:n}=this.inputSummary;if(n&&n!==t&&n.toUpperCase()===t){var i;const r=this.getSelectedRange();return this.setSelectedRange([r[0],r[1]+n.length]),(i=this.responder)===null||i===void 0||i.insertString(t),this.setInputSummary({textAdded:t}),this.setSelectedRange(r)}},dragenter(e){e.preventDefault()},dragstart(e){var t,n;return this.serializeSelectionToDataTransfer(e.dataTransfer),this.draggedRange=this.getSelectedRange(),(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidStartDrag)===null||n===void 0?void 0:n.call(t)},dragover(e){if(this.draggedRange||this.canAcceptDataTransfer(e.dataTransfer)){e.preventDefault();const i={x:e.clientX,y:e.clientY};var t,n;if(!dn(i,this.draggingPoint))return this.draggingPoint=i,(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidReceiveDragOverPoint)===null||n===void 0?void 0:n.call(t,this.draggingPoint)}},dragend(e){var t,n;(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidCancelDrag)===null||n===void 0||n.call(t),this.draggedRange=null,this.draggingPoint=null},drop(e){var t,n;e.preventDefault();const i=(t=e.dataTransfer)===null||t===void 0?void 0:t.files,r=e.dataTransfer.getData("application/x-trix-document"),s={x:e.clientX,y:e.clientY};if((n=this.responder)===null||n===void 0||n.setLocationRangeFromPointRange(s),i!=null&&i.length)this.attachFiles(i);else if(this.draggedRange){var o,c;(o=this.delegate)===null||o===void 0||o.inputControllerWillMoveText(),(c=this.responder)===null||c===void 0||c.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(r){var l;const m=se.fromJSONString(r);(l=this.responder)===null||l===void 0||l.insertDocument(m),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(e){var t,n;if((t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(e.clipboardData)&&e.preventDefault(),(n=this.delegate)===null||n===void 0||n.inputControllerWillCutText(),this.deleteInDirection("backward"),e.defaultPrevented))return this.requestRender()},copy(e){var t;(t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(e.clipboardData)&&e.preventDefault()},paste(e){const t=e.clipboardData||e.testClipboardData,n={clipboard:t};if(!t||Cu(e))return void this.getPastedHTMLUsingHiddenElement(k=>{var L,R,N;return n.type="text/html",n.html=k,(L=this.delegate)===null||L===void 0||L.inputControllerWillPaste(n),(R=this.responder)===null||R===void 0||R.insertHTML(n.html),this.requestRender(),(N=this.delegate)===null||N===void 0?void 0:N.inputControllerDidPaste(n)});const i=t.getData("URL"),r=t.getData("text/html"),s=t.getData("public.url-name");if(i){var o,c,l;let k;n.type="text/html",k=s?Zr(s).trim():i,n.html=this.createLinkHTML(i,k),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(n),this.setInputSummary({textAdded:k,didDelete:this.selectionIsExpanded()}),(c=this.responder)===null||c===void 0||c.insertHTML(n.html),this.requestRender(),(l=this.delegate)===null||l===void 0||l.inputControllerDidPaste(n)}else if(Co(t)){var m,b,v;n.type="text/plain",n.string=t.getData("text/plain"),(m=this.delegate)===null||m===void 0||m.inputControllerWillPaste(n),this.setInputSummary({textAdded:n.string,didDelete:this.selectionIsExpanded()}),(b=this.responder)===null||b===void 0||b.insertString(n.string),this.requestRender(),(v=this.delegate)===null||v===void 0||v.inputControllerDidPaste(n)}else if(r){var y,d,f;n.type="text/html",n.html=r,(y=this.delegate)===null||y===void 0||y.inputControllerWillPaste(n),(d=this.responder)===null||d===void 0||d.insertHTML(n.html),this.requestRender(),(f=this.delegate)===null||f===void 0||f.inputControllerDidPaste(n)}else if(Array.from(t.types).includes("Files")){var g,A;const k=(g=t.items)===null||g===void 0||(g=g[0])===null||g===void 0||(A=g.getAsFile)===null||A===void 0?void 0:A.call(g);if(k){var p,S,E;const L=Au(k);!k.name&&L&&(k.name="pasted-file-".concat(++xu,".").concat(L)),n.type="File",n.file=k,(p=this.delegate)===null||p===void 0||p.inputControllerWillAttachFiles(),(S=this.responder)===null||S===void 0||S.insertFile(n.file),this.requestRender(),(E=this.delegate)===null||E===void 0||E.inputControllerDidPaste(n)}}e.preventDefault()},compositionstart(e){return this.getCompositionInput().start(e.data)},compositionupdate(e){return this.getCompositionInput().update(e.data)},compositionend(e){return this.getCompositionInput().end(e.data)},beforeinput(e){this.inputSummary.didInput=!0},input(e){return this.inputSummary.didInput=!0,e.stopPropagation()}}),qt(Ee,"keys",{backspace(e){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",e)},delete(e){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",e)},return(e){var t,n;return this.setInputSummary({preferDocument:!0}),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0?void 0:n.insertLineBreak()},tab(e){var t,n;(t=this.responder)!==null&&t!==void 0&&t.canIncreaseNestingLevel()&&((n=this.responder)===null||n===void 0||n.increaseNestingLevel(),this.requestRender(),e.preventDefault())},left(e){var t;if(this.selectionIsInCursorTarget())return e.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")},right(e){var t;if(this.selectionIsInCursorTarget())return e.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")},control:{d(e){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",e)},h(e){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",e)},o(e){var t,n;return e.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(e){var t,n;(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.insertString(`
`),this.requestRender(),e.preventDefault()},tab(e){var t,n;(t=this.responder)!==null&&t!==void 0&&t.canDecreaseNestingLevel()&&((n=this.responder)===null||n===void 0||n.decreaseNestingLevel(),this.requestRender(),e.preventDefault())},left(e){if(this.selectionIsInCursorTarget())return e.preventDefault(),this.expandSelectionInDirection("backward")},right(e){if(this.selectionIsInCursorTarget())return e.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(e){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}},meta:{backspace(e){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}}}),Ee.proxyMethod("responder?.getSelectedRange"),Ee.proxyMethod("responder?.setSelectedRange"),Ee.proxyMethod("responder?.expandSelectionInDirection"),Ee.proxyMethod("responder?.selectionIsInCursorTarget"),Ee.proxyMethod("responder?.selectionIsExpanded");const Au=e=>{var t;return(t=e.type)===null||t===void 0||(t=t.match(/\/(\w+)$/))===null||t===void 0?void 0:t[1]},Eu=!((fr=" ".codePointAt)===null||fr===void 0||!fr.call(" ",0)),Tu=function(e){if(e.key&&Eu&&e.key.codePointAt(0)===e.keyCode)return e.key;{let t;if(e.which===null?t=e.keyCode:e.which!==0&&e.charCode!==0&&(t=e.charCode),t!=null&&sa[t]!=="escape")return $n.fromCodepoints([t]).toString()}},Cu=function(e){const t=e.clipboardData;if(t){if(t.types.includes("text/html")){for(const n of t.types){const i=/^CorePasteboardFlavorType/.test(n),r=/^dyn\./.test(n)&&t.getData(n);if(i||r)return!0}return!1}{const n=t.types.includes("com.apple.webarchive"),i=t.types.includes("com.apple.flat-rtfd");return n||i}}};class De extends Tt{constructor(t){super(...arguments),this.inputController=t,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(t){if(this.data.start=t,this.isSignificant()){var n,i;this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded&&((i=this.responder)===null||i===void 0||i.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(n=this.responder)===null||n===void 0?void 0:n.getSelectedRange()}}update(t){if(this.data.update=t,this.isSignificant()){const n=this.selectPlaceholder();n&&(this.forgetPlaceholder(),this.range=n)}}end(t){return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.setSelectedRange(this.range),(r=this.responder)===null||r===void 0||r.insertString(this.data.end),(s=this.responder)===null||s===void 0?void 0:s.setSelectedRange(this.range[0]+this.data.end.length)):this.data.start!=null||this.data.update!=null?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var n,i,r,s}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return!Su.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var t,n;return((t=this.data.start)===null||t===void 0?void 0:t.length)===0&&((n=this.data.end)===null||n===void 0?void 0:n.length)>0&&this.range}}De.proxyMethod("inputController.setInputSummary"),De.proxyMethod("inputController.requestRender"),De.proxyMethod("inputController.requestReparse"),De.proxyMethod("responder?.selectionIsExpanded"),De.proxyMethod("responder?.insertPlaceholder"),De.proxyMethod("responder?.selectPlaceholder"),De.proxyMethod("responder?.forgetPlaceholder");class jn extends Di{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?(t=this.delegate)===null||t===void 0||(n=t.inputControllerDidAllowUnhandledInput)===null||n===void 0?void 0:n.call(t):void 0:this.reparse();var t,n}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var t,n;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||(n=this.delegate)===null||n===void 0||n.render(),(t=this.afterRender)===null||t===void 0||t.call(this),this.afterRender=null}reparse(){var t;return(t=this.delegate)===null||t===void 0?void 0:t.reparse()}insertString(){var t;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.insertString(n,i)})}toggleAttributeIfSupported(t){var n;if(wr().includes(t))return(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var i;return(i=this.responder)===null||i===void 0?void 0:i.toggleCurrentAttribute(t)})}activateAttributeIfSupported(t,n){var i;if(wr().includes(t))return(i=this.delegate)===null||i===void 0||i.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.setCurrentAttribute(t,n)})}deleteInDirection(t){let{recordUndoEntry:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};var i;n&&((i=this.delegate)===null||i===void 0||i.inputControllerWillPerformTyping());const r=()=>{var o;return(o=this.responder)===null||o===void 0?void 0:o.deleteInDirection(t)},s=this.getTargetDOMRange({minLength:this.composing?1:2});return s?this.withTargetDOMRange(s,r):r()}withTargetDOMRange(t,n){var i;return typeof t=="function"&&(n=t,t=this.getTargetDOMRange()),t?(i=this.responder)===null||i===void 0?void 0:i.withTargetDOMRange(t,n.bind(this)):(Ke.reset(),n.call(this))}getTargetDOMRange(){var t,n;let{minLength:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0};const r=(t=(n=this.event).getTargetRanges)===null||t===void 0?void 0:t.call(n);if(r&&r.length){const s=ku(r[0]);if(i===0||s.toString().length>=i)return s}}withEvent(t,n){let i;this.event=t;try{i=n.call(this)}finally{this.event=null}return i}}qt(jn,"events",{keydown(e){if(ko(e)){var t;const n=Pu(e);(t=this.delegate)!==null&&t!==void 0&&t.inputControllerDidReceiveKeyboardCommand(n)&&e.preventDefault()}else{let n=e.key;e.altKey&&(n+="+Alt"),e.shiftKey&&(n+="+Shift");const i=this.constructor.keys[n];if(i)return this.withEvent(e,i)}},paste(e){var t;let n;const i=(t=e.clipboardData)===null||t===void 0?void 0:t.getData("URL");return oa(e)?(e.preventDefault(),this.attachFiles(e.clipboardData.files)):Mu(e)?(e.preventDefault(),n={type:"text/plain",string:e.clipboardData.getData("text/plain")},(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(n),(s=this.responder)===null||s===void 0||s.insertString(n.string),this.render(),(o=this.delegate)===null||o===void 0?void 0:o.inputControllerDidPaste(n)):i?(e.preventDefault(),n={type:"text/html",html:this.createLinkHTML(i)},(c=this.delegate)===null||c===void 0||c.inputControllerWillPaste(n),(l=this.responder)===null||l===void 0||l.insertHTML(n.html),this.render(),(m=this.delegate)===null||m===void 0?void 0:m.inputControllerDidPaste(n)):void 0;var r,s,o,c,l,m},beforeinput(e){const t=this.constructor.inputTypes[e.inputType],n=(i=e,!(!/iPhone|iPad/.test(navigator.userAgent)||i.inputType&&i.inputType!=="insertParagraph"));var i;t&&(this.withEvent(e,t),n||this.scheduleRender()),n&&this.render()},input(e){Ke.reset()},dragstart(e){var t,n;(t=this.responder)!==null&&t!==void 0&&t.selectionContainsAttachments()&&(e.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(n=this.responder)===null||n===void 0?void 0:n.getSelectedRange(),point:pr(e)})},dragenter(e){mr(e)&&e.preventDefault()},dragover(e){if(this.dragging){e.preventDefault();const n=pr(e);var t;if(!dn(n,this.dragging.point))return this.dragging.point=n,(t=this.responder)===null||t===void 0?void 0:t.setLocationRangeFromPointRange(n)}else mr(e)&&e.preventDefault()},drop(e){var t,n;if(this.dragging)return e.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),(n=this.responder)===null||n===void 0||n.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(mr(e)){var i;e.preventDefault();const r=pr(e);return(i=this.responder)===null||i===void 0||i.setLocationRangeFromPointRange(r),this.attachFiles(e.dataTransfer.files)}},dragend(){var e;this.dragging&&((e=this.responder)===null||e===void 0||e.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(e){this.composing&&(this.composing=!1,Gn.recentAndroid||this.scheduleRender())}}),qt(jn,"keys",{ArrowLeft(){var e,t;if((e=this.responder)!==null&&e!==void 0&&e.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")},ArrowRight(){var e,t;if((e=this.responder)!==null&&e!==void 0&&e.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")},Backspace(){var e,t,n;if((e=this.responder)!==null&&e!==void 0&&e.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.deleteInDirection("backward"),this.render()},Tab(){var e,t;if((e=this.responder)!==null&&e!==void 0&&e.canIncreaseNestingLevel())return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.increaseNestingLevel(),this.render()},"Tab+Shift"(){var e,t;if((e=this.responder)!==null&&e!==void 0&&e.canDecreaseNestingLevel())return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.decreaseNestingLevel(),this.render()}}),qt(jn,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var e;this.deleteByDragRange=(e=this.responder)===null||e===void 0?void 0:e.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var e;if((e=this.responder)!==null&&e!==void 0&&e.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var e;if((e=this.responder)!==null&&e!==void 0&&e.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(const n in(e=this.responder)===null||e===void 0?void 0:e.getCurrentAttributes()){var e,t;(t=this.responder)===null||t===void 0||t.removeCurrentAttribute(n)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var e;return(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformRedo()},historyUndo(){var e;return(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){const e=this.deleteByDragRange;var t;if(e)return this.deleteByDragRange=null,(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var n;return(n=this.responder)===null||n===void 0?void 0:n.moveTextFromRange(e)})},insertFromPaste(){const{dataTransfer:e}=this.event,t={dataTransfer:e},n=e.getData("URL"),i=e.getData("text/html");if(n){var r;let l;this.event.preventDefault(),t.type="text/html";const m=e.getData("public.url-name");l=m?Zr(m).trim():n,t.html=this.createLinkHTML(n,l),(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var b;return(b=this.responder)===null||b===void 0?void 0:b.insertHTML(t.html)}),this.afterRender=()=>{var b;return(b=this.delegate)===null||b===void 0?void 0:b.inputControllerDidPaste(t)}}else if(Co(e)){var s;t.type="text/plain",t.string=e.getData("text/plain"),(s=this.delegate)===null||s===void 0||s.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertString(t.string)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}else if(Lu(this.event)){var o;t.type="File",t.file=e.files[0],(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertFile(t.file)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}else if(i){var c;this.event.preventDefault(),t.type="text/html",t.html=i,(c=this.delegate)===null||c===void 0||c.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertHTML(t.html)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.insertLineBreak()})},insertReplacementText(){const e=this.event.dataTransfer.getData("text/plain"),t=this.event.getTargetRanges()[0];this.withTargetDOMRange(t,()=>{this.insertString(e,{updatePosition:!1})})},insertText(){var e;return this.insertString(this.event.data||((e=this.event.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});const ku=function(e){const t=document.createRange();return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),t},mr=e=>{var t;return Array.from(((t=e.dataTransfer)===null||t===void 0?void 0:t.types)||[]).includes("Files")},Lu=e=>{var t;return((t=e.dataTransfer.files)===null||t===void 0?void 0:t[0])&&!oa(e)&&!(n=>{let{dataTransfer:i}=n;return i.types.includes("Files")&&i.types.includes("text/html")&&i.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(e)},oa=function(e){const t=e.clipboardData;if(t)return Array.from(t.types).filter(n=>n.match(/file/i)).length===t.types.length&&t.files.length>=1},Mu=function(e){const t=e.clipboardData;if(t)return t.types.includes("text/plain")&&t.types.length===1},Pu=function(e){const t=[];return e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),t.push(e.key),t},pr=e=>({x:e.clientX,y:e.clientY}),Fr="[data-trix-attribute]",zr="[data-trix-action]",wu="".concat(Fr,", ").concat(zr),Ii="[data-trix-dialog]",Ru="".concat(Ii,"[data-trix-active]"),Du="".concat(Ii," [data-trix-method]"),Zs="".concat(Ii," [data-trix-input]"),to=(e,t)=>(t||(t=sn(e)),e.querySelector("[data-trix-input][name='".concat(t,"']"))),eo=e=>e.getAttribute("data-trix-action"),sn=e=>e.getAttribute("data-trix-attribute")||e.getAttribute("data-trix-dialog-attribute");class aa extends Tt{constructor(t){super(t),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=t,this.attributes={},this.actions={},this.resetDialogInputs(),bt("mousedown",{onElement:this.element,matchingSelector:zr,withCallback:this.didClickActionButton}),bt("mousedown",{onElement:this.element,matchingSelector:Fr,withCallback:this.didClickAttributeButton}),bt("click",{onElement:this.element,matchingSelector:wu,preventDefault:!0}),bt("click",{onElement:this.element,matchingSelector:Du,withCallback:this.didClickDialogButton}),bt("keydown",{onElement:this.element,matchingSelector:Zs,withCallback:this.didKeyDownDialogInput})}didClickActionButton(t,n){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),t.preventDefault();const r=eo(n);return this.getDialog(r)?this.toggleDialog(r):(s=this.delegate)===null||s===void 0?void 0:s.toolbarDidInvokeAction(r,n);var s}didClickAttributeButton(t,n){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),t.preventDefault();const r=sn(n);var s;return this.getDialog(r)?this.toggleDialog(r):(s=this.delegate)===null||s===void 0||s.toolbarDidToggleAttribute(r),this.refreshAttributeButtons()}didClickDialogButton(t,n){const i=Be(n,{matchingSelector:Ii});return this[n.getAttribute("data-trix-method")].call(this,i)}didKeyDownDialogInput(t,n){if(t.keyCode===13){t.preventDefault();const i=n.getAttribute("name"),r=this.getDialog(i);this.setAttribute(r)}if(t.keyCode===27)return t.preventDefault(),this.hideDialog()}updateActions(t){return this.actions=t,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((t,n)=>{t.disabled=this.actions[n]===!1})}eachActionButton(t){return Array.from(this.element.querySelectorAll(zr)).map(n=>t(n,eo(n)))}updateAttributes(t){return this.attributes=t,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((t,n)=>(t.disabled=this.attributes[n]===!1,this.attributes[n]||this.dialogIsVisible(n)?(t.setAttribute("data-trix-active",""),t.classList.add("trix-active")):(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"))))}eachAttributeButton(t){return Array.from(this.element.querySelectorAll(Fr)).map(n=>t(n,sn(n)))}applyKeyboardCommand(t){const n=JSON.stringify(t.sort());for(const i of Array.from(this.element.querySelectorAll("[data-trix-key]"))){const r=i.getAttribute("data-trix-key").split("+");if(JSON.stringify(r.sort())===n)return _n("mousedown",{onElement:i}),!0}return!1}dialogIsVisible(t){const n=this.getDialog(t);if(n)return n.hasAttribute("data-trix-active")}toggleDialog(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)}showDialog(t){var n,i;this.hideDialog(),(n=this.delegate)===null||n===void 0||n.toolbarWillShowDialog();const r=this.getDialog(t);r.setAttribute("data-trix-active",""),r.classList.add("trix-active"),Array.from(r.querySelectorAll("input[disabled]")).forEach(o=>{o.removeAttribute("disabled")});const s=sn(r);if(s){const o=to(r,t);o&&(o.value=this.attributes[s]||"",o.select())}return(i=this.delegate)===null||i===void 0?void 0:i.toolbarDidShowDialog(t)}setAttribute(t){var n;const i=sn(t),r=to(t,i);return!r.willValidate||(r.setCustomValidity(""),r.checkValidity()&&this.isSafeAttribute(r))?((n=this.delegate)===null||n===void 0||n.toolbarDidUpdateAttribute(i,r.value),this.hideDialog()):(r.setCustomValidity("Invalid value"),r.setAttribute("data-trix-validate",""),r.classList.add("trix-validate"),r.focus())}isSafeAttribute(t){return!t.hasAttribute("data-trix-validate-href")||Ti.isValidAttribute("a","href",t.value)}removeAttribute(t){var n;const i=sn(t);return(n=this.delegate)===null||n===void 0||n.toolbarDidRemoveAttribute(i),this.hideDialog()}hideDialog(){const t=this.element.querySelector(Ru);var n;if(t)return t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),(n=this.delegate)===null||n===void 0?void 0:n.toolbarDidHideDialog((i=>i.getAttribute("data-trix-dialog"))(t))}resetDialogInputs(){Array.from(this.element.querySelectorAll(Zs)).forEach(t=>{t.setAttribute("disabled","disabled"),t.removeAttribute("data-trix-validate"),t.classList.remove("trix-validate")})}getDialog(t){return this.element.querySelector("[data-trix-dialog=".concat(t,"]"))}}class Hn extends ea{constructor(t){let{editorElement:n,document:i,html:r}=t;super(...arguments),this.editorElement=n,this.selectionManager=new $e(this.editorElement),this.selectionManager.delegate=this,this.composition=new Oe,this.composition.delegate=this,this.attachmentManager=new $o(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=Yr.getLevel()===2?new jn(this.editorElement):new Ee(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new ta(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new aa(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new Xo(this.composition,this.selectionManager,this.editorElement),i?this.editor.loadDocument(i):this.editor.loadHTML(r)}registerSelectionManager(){return Ke.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return Ke.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(t){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(t){this.pasting&&(this.pastedRange=t)}compositionShouldAcceptFile(t){return this.notifyEditorElement("file-accept",{file:t})}compositionDidAddAttachment(t){const n=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-add",{attachment:n})}compositionDidEditAttachment(t){this.compositionController.rerenderViewForObject(t);const n=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-edit",{attachment:n}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")}compositionDidRemoveAttachment(t){const n=this.attachmentManager.unmanageAttachment(t);return this.notifyEditorElement("attachment-remove",{attachment:n})}compositionDidStartEditingAttachment(t,n){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,n),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(t){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(t){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(t,n){return this.toolbarController.hideDialog(),this.composition.editAttachment(t,n)}compositionControllerDidRequestDeselectingAttachment(t){const n=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(t);return this.selectionManager.setLocationRange(n[1])}compositionControllerWillUpdateAttachment(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(t){return this.recordFormattingUndoEntry(t)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})}inputControllerDidPaste(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(t){return this.toolbarController.applyKeyboardCommand(t)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(t){return this.selectionManager.setLocationRangeFromPointRange(t)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!Ai(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(t,n){return this.invokeAction(t,n)}toolbarDidToggleAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.toggleCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(t,n){if(this.recordFormattingUndoEntry(t),this.composition.setCurrentAttribute(t,n),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.removeCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(t){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})}toolbarDidHideDialog(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(t){return!!this.actionIsExternal(t)||!((n=this.actions[t])===null||n===void 0||(n=n.test)===null||n===void 0||!n.call(this));var n}invokeAction(t,n){return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t,invokingElement:n}):(i=this.actions[t])===null||i===void 0||(i=i.perform)===null||i===void 0?void 0:i.call(this);var i}actionIsExternal(t){return/^x-./.test(t)}getCurrentActions(){const t={};for(const n in this.actions)t[n]=this.canInvokeAction(n);return t}updateCurrentActions(){const t=this.getCurrentActions();if(!dn(t,this.currentActions))return this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let t=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(r=>{const{document:s,selectedRange:o}=t;t=r.call(this.editor,t)||{},t.document||(t.document=s),t.selectedRange||(t.selectedRange=o)}),n=t,i=this.composition.getSnapshot(),!Ai(n.selectedRange,i.selectedRange)||!n.document.isEqualTo(i.document))return this.composition.loadSnapshot(t);var n,i}updateInputElement(){const t=function(n,i){const r=au[i];if(r)return r(n);throw new Error("unknown content type: ".concat(i))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setFormValue(t)}notifyEditorElement(t,n){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,n)}removeAttachment(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()}recordFormattingUndoEntry(t){const n=At(t),i=this.selectionManager.getLocationRange();if(n||!Ce(i))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return[this.getLocationContext(),this.getTimeContext(),...Array.from(n)]}getLocationContext(){const t=this.selectionManager.getLocationRange();return Ce(t)?t[0].index:t}getTimeContext(){return Lr.interval>0?Math.floor(new Date().getTime()/Lr.interval):0}isFocused(){var t;return this.editorElement===((t=this.editorElement.ownerDocument)===null||t===void 0?void 0:t.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}}qt(Hn,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return Yr.pickFiles(this.editor.insertFiles)}}}),Hn.proxyMethod("getSelectionManager().setLocationRange"),Hn.proxyMethod("getSelectionManager().getLocationRange");var Iu=Object.freeze({__proto__:null,AttachmentEditorController:Zo,CompositionController:ta,Controller:ea,EditorController:Hn,InputController:Di,Level0InputController:Ee,Level2InputController:jn,ToolbarController:aa}),Ou=Object.freeze({__proto__:null,MutationObserver:ia,SelectionChangeObserver:Mo}),_u=Object.freeze({__proto__:null,FileVerificationOperation:ra,ImagePreloadOperation:Ho});To("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);class la extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=Eo.getDefaultHTML())}}let Nu=0;const Bu=function(e){if(!e.hasAttribute("contenteditable"))return e.setAttribute("contenteditable",""),function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n.times=1,bt(t,n)}("focus",{onElement:e,withCallback:()=>Fu(e)})},Fu=function(e){return zu(e),ju()},zu=function(e){var t,n;if((t=(n=document).queryCommandSupported)!==null&&t!==void 0&&t.call(n,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),bt("mscontrolselect",{onElement:e,preventDefault:!0})},ju=function(e){var t,n;if((t=(n=document).queryCommandSupported)!==null&&t!==void 0&&t.call(n,"DefaultParagraphSeparator")){const{tagName:i}=Wt.default;if(["div","p"].includes(i))return document.execCommand("DefaultParagraphSeparator",!1,i)}},no=Gn.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};To("trix-editor",`%t {
    display: block;
}

%t:empty::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(Ue,` figcaption textarea {
    resize: none;
}

%t `).concat(Ue,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(Ue,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(no.display,` !important;
    width: `).concat(no.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));var Ae=new WeakMap,wn=new WeakSet;class Hu{constructor(t){var n,i;jo(n=this,i=wn),i.add(n),zn(this,Ae,{writable:!0,value:void 0}),this.element=t,ns(this,Ae,t.attachInternals())}connectedCallback(){fi(this,wn,mi).call(this)}disconnectedCallback(){}get labels(){return gt(this,Ae).labels}get disabled(){var t;return(t=this.element.inputElement)===null||t===void 0?void 0:t.disabled}set disabled(t){this.element.toggleAttribute("disabled",t)}get required(){return this.element.hasAttribute("required")}set required(t){this.element.toggleAttribute("required",t),fi(this,wn,mi).call(this)}get validity(){return gt(this,Ae).validity}get validationMessage(){return gt(this,Ae).validationMessage}get willValidate(){return gt(this,Ae).willValidate}setFormValue(t){fi(this,wn,mi).call(this)}checkValidity(){return gt(this,Ae).checkValidity()}reportValidity(){return gt(this,Ae).reportValidity()}setCustomValidity(t){fi(this,wn,mi).call(this,t)}}function mi(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{required:t,value:n}=this.element,i=t&&!n,r=!!e,s=st("input",{required:t}),o=e||s.validationMessage;gt(this,Ae).setValidity({valueMissing:i,customError:r},o)}var gr=new WeakMap,vr=new WeakMap,br=new WeakMap;let Wu=class{constructor(t){zn(this,gr,{writable:!0,value:void 0}),zn(this,vr,{writable:!0,value:n=>{n.defaultPrevented||n.target===this.element.form&&this.element.reset()}}),zn(this,br,{writable:!0,value:n=>{if(n.defaultPrevented||this.element.contains(n.target))return;const i=Be(n.target,{matchingSelector:"label"});i&&Array.from(this.labels).includes(i)&&this.element.focus()}}),this.element=t}connectedCallback(){ns(this,gr,function(t){if(t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby"))return;const n=function(){const i=Array.from(t.labels).map(s=>{if(!s.contains(t))return s.textContent}).filter(s=>s),r=i.join(" ");return r?t.setAttribute("aria-label",r):t.removeAttribute("aria-label")};return n(),bt("focus",{onElement:t,withCallback:n})}(this.element)),window.addEventListener("reset",gt(this,vr),!1),window.addEventListener("click",gt(this,br),!1)}disconnectedCallback(){var t;(t=gt(this,gr))===null||t===void 0||t.destroy(),window.removeEventListener("reset",gt(this,vr),!1),window.removeEventListener("click",gt(this,br),!1)}get labels(){const t=[];this.element.id&&this.element.ownerDocument&&t.push(...Array.from(this.element.ownerDocument.querySelectorAll("label[for='".concat(this.element.id,"']"))||[]));const n=Be(this.element,{matchingSelector:"label"});return n&&[this.element,null].includes(n.control)&&t.push(n),t}get disabled(){return console.warn("This browser does not support the [disabled] attribute for trix-editor elements."),!1}set disabled(t){console.warn("This browser does not support the [disabled] attribute for trix-editor elements.")}get required(){return console.warn("This browser does not support the [required] attribute for trix-editor elements."),!1}set required(t){console.warn("This browser does not support the [required] attribute for trix-editor elements.")}get validity(){return console.warn("This browser does not support the validity property for trix-editor elements."),null}get validationMessage(){return console.warn("This browser does not support the validationMessage property for trix-editor elements."),""}get willValidate(){return console.warn("This browser does not support the willValidate property for trix-editor elements."),!1}setFormValue(t){}checkValidity(){return console.warn("This browser does not support checkValidity() for trix-editor elements."),!0}reportValidity(){return console.warn("This browser does not support reportValidity() for trix-editor elements."),!0}setCustomValidity(t){console.warn("This browser does not support setCustomValidity(validationMessage) for trix-editor elements.")}};var Nt=new WeakMap;class ki extends HTMLElement{constructor(){super(),zn(this,Nt,{writable:!0,value:void 0}),ns(this,Nt,this.constructor.formAssociated?new Hu(this):new Wu(this))}get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++Nu),this.trixId)}get labels(){return gt(this,Nt).labels}get disabled(){return gt(this,Nt).disabled}set disabled(t){gt(this,Nt).disabled=t}get required(){return gt(this,Nt).required}set required(t){gt(this,Nt).required=t}get validity(){return gt(this,Nt).validity}get validationMessage(){return gt(this,Nt).validationMessage}get willValidate(){return gt(this,Nt).willValidate}get type(){return this.localName}get toolbarElement(){var t;if(this.hasAttribute("toolbar"))return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("toolbar"));if(this.parentNode){const n="trix-toolbar-".concat(this.trixId);return this.setAttribute("toolbar",n),this.internalToolbar=st("trix-toolbar",{id:n}),this.parentNode.insertBefore(this.internalToolbar,this),this.internalToolbar}}get form(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.form}get inputElement(){var t;if(this.hasAttribute("input"))return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("input"));if(this.parentNode){const n="trix-input-".concat(this.trixId);this.setAttribute("input",n);const i=st("input",{type:"hidden",id:n});return this.parentNode.insertBefore(i,this.nextElementSibling),i}}get editor(){var t;return(t=this.editorController)===null||t===void 0?void 0:t.editor}get name(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.name}get value(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.value}set value(t){var n;this.defaultValue=t,(n=this.editor)===null||n===void 0||n.loadHTML(this.defaultValue)}attributeChangedCallback(t,n,i){t==="connected"&&this.isConnected&&n!=null&&n!==i&&requestAnimationFrame(()=>this.reconnect())}notify(t,n){if(this.editorController)return _n("trix-".concat(t),{onElement:this,attributes:n})}setFormValue(t){this.inputElement&&(this.inputElement.value=t,gt(this,Nt).setFormValue(t))}connectedCallback(){this.hasAttribute("data-trix-internal")||(Bu(this),function(t){t.hasAttribute("role")||t.setAttribute("role","textbox")}(this),this.editorController||(_n("trix-before-initialize",{onElement:this}),this.editorController=new Hn({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>_n("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),gt(this,Nt).connectedCallback(),this.toggleAttribute("connected",!0),function(t){!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t&&t.focus()}(this))}disconnectedCallback(){var t;(t=this.editorController)===null||t===void 0||t.unregisterSelectionManager(),gt(this,Nt).disconnectedCallback(),this.toggleAttribute("connected",!1)}reconnect(){this.removeInternalToolbar(),this.disconnectedCallback(),this.connectedCallback()}removeInternalToolbar(){var t;(t=this.internalToolbar)===null||t===void 0||t.remove(),this.internalToolbar=null}checkValidity(){return gt(this,Nt).checkValidity()}reportValidity(){return gt(this,Nt).reportValidity()}setCustomValidity(t){gt(this,Nt).setCustomValidity(t)}formDisabledCallback(t){this.inputElement&&(this.inputElement.disabled=t),this.toggleAttribute("contenteditable",!t)}formResetCallback(){this.reset()}reset(){this.value=this.defaultValue}}qt(ki,"formAssociated","ElementInternals"in window),qt(ki,"observedAttributes",["connected"]);const ro={VERSION:ql,config:Xn,core:lu,models:Qo,views:fu,controllers:Iu,observers:Ou,operations:_u,elements:Object.freeze({__proto__:null,TrixEditorElement:ki,TrixToolbarElement:la}),filters:Object.freeze({__proto__:null,Filter:Uo,attachmentGalleryFilter:Go})};Object.assign(ro,Qo),window.Trix=ro,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",la),customElements.get("trix-editor")||customElements.define("trix-editor",ki)},0);function so(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function rs(e={},t={}){const n=["__proto__","constructor","prototype"];Object.keys(t).filter(i=>n.indexOf(i)<0).forEach(i=>{typeof e[i]>"u"?e[i]=t[i]:so(t[i])&&so(e[i])&&Object.keys(t[i]).length>0&&rs(e[i],t[i])})}const ca={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function kt(){const e=typeof document<"u"?document:{};return rs(e,ca),e}const qu={document:ca,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function vt(){const e=typeof window<"u"?window:{};return rs(e,qu),e}function Ie(e=""){return e.trim().split(" ").filter(t=>!!t.trim())}function $u(e){const t=e;Object.keys(t).forEach(n=>{try{t[n]=null}catch{}try{delete t[n]}catch{}})}function cn(e,t=0){return setTimeout(e,t)}function oe(){return Date.now()}function Vu(e){const t=vt();let n;return t.getComputedStyle&&(n=t.getComputedStyle(e,null)),!n&&e.currentStyle&&(n=e.currentStyle),n||(n=e.style),n}function jr(e,t="x"){const n=vt();let i,r,s;const o=Vu(e);return n.WebKitCSSMatrix?(r=o.transform||o.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(c=>c.replace(",",".")).join(", ")),s=new n.WebKitCSSMatrix(r==="none"?"":r)):(s=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),t==="x"&&(n.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),t==="y"&&(n.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function Dn(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function Uu(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function Zt(...e){const t=Object(e[0]),n=["__proto__","constructor","prototype"];for(let i=1;i<e.length;i+=1){const r=e[i];if(r!=null&&!Uu(r)){const s=Object.keys(Object(r)).filter(o=>n.indexOf(o)<0);for(let o=0,c=s.length;o<c;o+=1){const l=s[o],m=Object.getOwnPropertyDescriptor(r,l);m!==void 0&&m.enumerable&&(Dn(t[l])&&Dn(r[l])?r[l].__swiper__?t[l]=r[l]:Zt(t[l],r[l]):!Dn(t[l])&&Dn(r[l])?(t[l]={},r[l].__swiper__?t[l]=r[l]:Zt(t[l],r[l])):t[l]=r[l])}}}return t}function In(e,t,n){e.style.setProperty(t,n)}function ua({swiper:e,targetPosition:t,side:n}){const i=vt(),r=-e.translate;let s=null,o;const c=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const l=t>r?"next":"prev",m=(v,y)=>l==="next"&&v>=y||l==="prev"&&v<=y,b=()=>{o=new Date().getTime(),s===null&&(s=o);const v=Math.max(Math.min((o-s)/c,1),0),y=.5-Math.cos(v*Math.PI)/2;let d=r+y*(t-r);if(m(d,t)&&(d=t),e.wrapperEl.scrollTo({[n]:d}),m(d,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[n]:d})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(b)};b()}function en(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function It(e,t=""){const n=vt(),i=[...e.children];return n.HTMLSlotElement&&e instanceof HTMLSlotElement&&i.push(...e.assignedElements()),t?i.filter(r=>r.matches(t)):i}function Gu(e,t){const n=[t];for(;n.length>0;){const i=n.shift();if(e===i)return!0;n.push(...i.children,...i.shadowRoot?i.shadowRoot.children:[],...i.assignedElements?i.assignedElements():[])}}function Xu(e,t){const n=vt();let i=t.contains(e);return!i&&n.HTMLSlotElement&&t instanceof HTMLSlotElement&&(i=[...t.assignedElements()].includes(e),i||(i=Gu(e,t))),i}function Li(e){try{console.warn(e);return}catch{}}function te(e,t=[]){const n=document.createElement(e);return n.classList.add(...Array.isArray(t)?t:Ie(t)),n}function Mi(e){const t=vt(),n=kt(),i=e.getBoundingClientRect(),r=n.body,s=e.clientTop||r.clientTop||0,o=e.clientLeft||r.clientLeft||0,c=e===t?t.scrollY:e.scrollTop,l=e===t?t.scrollX:e.scrollLeft;return{top:i.top+c-s,left:i.left+l-o}}function Yu(e,t){const n=[];for(;e.previousElementSibling;){const i=e.previousElementSibling;t?i.matches(t)&&n.push(i):n.push(i),e=i}return n}function Ju(e,t){const n=[];for(;e.nextElementSibling;){const i=e.nextElementSibling;t?i.matches(t)&&n.push(i):n.push(i),e=i}return n}function Ne(e,t){return vt().getComputedStyle(e,null).getPropertyValue(t)}function Un(e){let t=e,n;if(t){for(n=0;(t=t.previousSibling)!==null;)t.nodeType===1&&(n+=1);return n}}function Xe(e,t){const n=[];let i=e.parentElement;for(;i;)t?i.matches(t)&&n.push(i):n.push(i),i=i.parentElement;return n}function Wn(e,t){function n(i){i.target===e&&(t.call(e,i),e.removeEventListener("transitionend",n))}t&&e.addEventListener("transitionend",n)}function Hr(e,t,n){const i=vt();return e[t==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(e,null).getPropertyValue(t==="width"?"margin-left":"margin-bottom"))}function at(e){return(Array.isArray(e)?e:[e]).filter(t=>!!t)}function Oi(e){return t=>Math.abs(t)>0&&e.browser&&e.browser.need3dFix&&Math.abs(t)%90===0?t+.001:t}function ye(e,t=""){typeof trustedTypes<"u"?e.innerHTML=trustedTypes.createPolicy("html",{createHTML:n=>n}).createHTML(t):e.innerHTML=t}let yr;function Ku(){const e=vt(),t=kt();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}function da(){return yr||(yr=Ku()),yr}let Sr;function Qu({userAgent:e}={}){const t=da(),n=vt(),i=n.navigator.platform,r=e||n.navigator.userAgent,s={ios:!1,android:!1},o=n.screen.width,c=n.screen.height,l=r.match(/(Android);?[\s\/]+([\d.]+)?/);let m=r.match(/(iPad)(?!\1).*OS\s([\d_]+)/);const b=r.match(/(iPod)(.*OS\s([\d_]+))?/),v=!m&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),y=i==="Win32";let d=i==="MacIntel";const f=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!m&&d&&t.touch&&f.indexOf(`${o}x${c}`)>=0&&(m=r.match(/(Version)\/([\d.]+)/),m||(m=[0,1,"13_0_0"]),d=!1),l&&!y&&(s.os="android",s.android=!0),(m||v||b)&&(s.os="ios",s.ios=!0),s}function ha(e={}){return Sr||(Sr=Qu(e)),Sr}let xr;function Zu(){const e=vt(),t=ha();let n=!1;function i(){const c=e.navigator.userAgent.toLowerCase();return c.indexOf("safari")>=0&&c.indexOf("chrome")<0&&c.indexOf("android")<0}if(i()){const c=String(e.navigator.userAgent);if(c.includes("Version/")){const[l,m]=c.split("Version/")[1].split(" ")[0].split(".").map(b=>Number(b));n=l<16||l===16&&m<2}}const r=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),s=i(),o=s||r&&t.ios;return{isSafari:n||s,needPerspectiveFix:n,need3dFix:o,isWebView:r}}function fa(){return xr||(xr=Zu()),xr}function td({swiper:e,on:t,emit:n}){const i=vt();let r=null,s=null;const o=()=>{!e||e.destroyed||!e.initialized||(n("beforeResize"),n("resize"))},c=()=>{!e||e.destroyed||!e.initialized||(r=new ResizeObserver(b=>{s=i.requestAnimationFrame(()=>{const{width:v,height:y}=e;let d=v,f=y;b.forEach(({contentBoxSize:g,contentRect:A,target:p})=>{p&&p!==e.el||(d=A?A.width:(g[0]||g).inlineSize,f=A?A.height:(g[0]||g).blockSize)}),(d!==v||f!==y)&&o()})}),r.observe(e.el))},l=()=>{s&&i.cancelAnimationFrame(s),r&&r.unobserve&&e.el&&(r.unobserve(e.el),r=null)},m=()=>{!e||e.destroyed||!e.initialized||n("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){c();return}i.addEventListener("resize",o),i.addEventListener("orientationchange",m)}),t("destroy",()=>{l(),i.removeEventListener("resize",o),i.removeEventListener("orientationchange",m)})}function ed({swiper:e,extendParams:t,on:n,emit:i}){const r=[],s=vt(),o=(m,b={})=>{const v=s.MutationObserver||s.WebkitMutationObserver,y=new v(d=>{if(e.__preventObserver__)return;if(d.length===1){i("observerUpdate",d[0]);return}const f=function(){i("observerUpdate",d[0])};s.requestAnimationFrame?s.requestAnimationFrame(f):s.setTimeout(f,0)});y.observe(m,{attributes:typeof b.attributes>"u"?!0:b.attributes,childList:e.isElement||(typeof b.childList>"u"?!0:b).childList,characterData:typeof b.characterData>"u"?!0:b.characterData}),r.push(y)},c=()=>{if(e.params.observer){if(e.params.observeParents){const m=Xe(e.hostEl);for(let b=0;b<m.length;b+=1)o(m[b])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},l=()=>{r.forEach(m=>{m.disconnect()}),r.splice(0,r.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),n("init",c),n("destroy",l)}var nd={on(e,t,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof t!="function")return i;const r=n?"unshift":"push";return e.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](t)}),i},once(e,t,n){const i=this;if(!i.eventsListeners||i.destroyed||typeof t!="function")return i;function r(...s){i.off(e,r),r.__emitterProxy&&delete r.__emitterProxy,t.apply(i,s)}return r.__emitterProxy=t,i.on(e,r,n)},onAny(e,t){const n=this;if(!n.eventsListeners||n.destroyed||typeof e!="function")return n;const i=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[i](e),n},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsAnyListeners)return t;const n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off(e,t){const n=this;return!n.eventsListeners||n.destroyed||!n.eventsListeners||e.split(" ").forEach(i=>{typeof t>"u"?n.eventsListeners[i]=[]:n.eventsListeners[i]&&n.eventsListeners[i].forEach((r,s)=>{(r===t||r.__emitterProxy&&r.__emitterProxy===t)&&n.eventsListeners[i].splice(s,1)})}),n},emit(...e){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let n,i,r;return typeof e[0]=="string"||Array.isArray(e[0])?(n=e[0],i=e.slice(1,e.length),r=t):(n=e[0].events,i=e[0].data,r=e[0].context||t),i.unshift(r),(Array.isArray(n)?n:n.split(" ")).forEach(o=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(c=>{c.apply(r,[o,...i])}),t.eventsListeners&&t.eventsListeners[o]&&t.eventsListeners[o].forEach(c=>{c.apply(r,i)})}),t}};function id(){const e=this;let t,n;const i=e.el;typeof e.params.width<"u"&&e.params.width!==null?t=e.params.width:t=i.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?n=e.params.height:n=i.clientHeight,!(t===0&&e.isHorizontal()||n===0&&e.isVertical())&&(t=t-parseInt(Ne(i,"padding-left")||0,10)-parseInt(Ne(i,"padding-right")||0,10),n=n-parseInt(Ne(i,"padding-top")||0,10)-parseInt(Ne(i,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(n)&&(n=0),Object.assign(e,{width:t,height:n,size:e.isHorizontal()?t:n}))}function rd(){const e=this;function t(D,w){return parseFloat(D.getPropertyValue(e.getDirectionLabel(w))||0)}const n=e.params,{wrapperEl:i,slidesEl:r,rtlTranslate:s,wrongRTL:o}=e,c=e.virtual&&n.virtual.enabled,l=c?e.virtual.slides.length:e.slides.length,m=It(r,`.${e.params.slideClass}, swiper-slide`),b=c?e.virtual.slides.length:m.length;let v=[];const y=[],d=[];let f=n.slidesOffsetBefore;typeof f=="function"&&(f=n.slidesOffsetBefore.call(e));let g=n.slidesOffsetAfter;typeof g=="function"&&(g=n.slidesOffsetAfter.call(e));const A=e.snapGrid.length,p=e.slidesGrid.length,S=e.size-f-g;let E=n.spaceBetween,k=-f,L=0,R=0;if(typeof S>"u")return;typeof E=="string"&&E.indexOf("%")>=0?E=parseFloat(E.replace("%",""))/100*S:typeof E=="string"&&(E=parseFloat(E)),e.virtualSize=-E-f-g,m.forEach(D=>{s?D.style.marginLeft="":D.style.marginRight="",D.style.marginBottom="",D.style.marginTop=""}),n.centeredSlides&&n.cssMode&&(In(i,"--swiper-centered-offset-before",""),In(i,"--swiper-centered-offset-after",""));const N=n.grid&&n.grid.rows>1&&e.grid;N?e.grid.initSlides(m):e.grid&&e.grid.unsetSlides();let M;const j=n.slidesPerView==="auto"&&n.breakpoints&&Object.keys(n.breakpoints).filter(D=>typeof n.breakpoints[D].slidesPerView<"u").length>0;for(let D=0;D<b;D+=1){M=0;const w=m[D];if(!(w&&(N&&e.grid.updateSlide(D,w,m),Ne(w,"display")==="none"))){if(c&&n.slidesPerView==="auto")n.virtual.slidesPerViewAutoSlideSize&&(M=n.virtual.slidesPerViewAutoSlideSize),M&&w&&(n.roundLengths&&(M=Math.floor(M)),w.style[e.getDirectionLabel("width")]=`${M}px`);else if(n.slidesPerView==="auto"){j&&(w.style[e.getDirectionLabel("width")]="");const P=getComputedStyle(w),O=w.style.transform,H=w.style.webkitTransform;if(O&&(w.style.transform="none"),H&&(w.style.webkitTransform="none"),n.roundLengths)M=e.isHorizontal()?Hr(w,"width"):Hr(w,"height");else{const G=t(P,"width"),_=t(P,"padding-left"),I=t(P,"padding-right"),F=t(P,"margin-left"),X=t(P,"margin-right"),K=P.getPropertyValue("box-sizing");if(K&&K==="border-box")M=G+F+X;else{const{clientWidth:dt,offsetWidth:rt}=w;M=G+_+I+F+X+(rt-dt)}}O&&(w.style.transform=O),H&&(w.style.webkitTransform=H),n.roundLengths&&(M=Math.floor(M))}else M=(S-(n.slidesPerView-1)*E)/n.slidesPerView,n.roundLengths&&(M=Math.floor(M)),w&&(w.style[e.getDirectionLabel("width")]=`${M}px`);w&&(w.swiperSlideSize=M),d.push(M),n.centeredSlides?(k=k+M/2+L/2+E,L===0&&D!==0&&(k=k-S/2-E),D===0&&(k=k-S/2-E),Math.abs(k)<1/1e3&&(k=0),n.roundLengths&&(k=Math.floor(k)),R%n.slidesPerGroup===0&&v.push(k),y.push(k)):(n.roundLengths&&(k=Math.floor(k)),(R-Math.min(e.params.slidesPerGroupSkip,R))%e.params.slidesPerGroup===0&&v.push(k),y.push(k),k=k+M+E),e.virtualSize+=M+E,L=M,R+=1}}if(e.virtualSize=Math.max(e.virtualSize,S)+g,s&&o&&(n.effect==="slide"||n.effect==="coverflow")&&(i.style.width=`${e.virtualSize+E}px`),n.setWrapperSize&&(i.style[e.getDirectionLabel("width")]=`${e.virtualSize+E}px`),N&&e.grid.updateWrapperSize(M,v),!n.centeredSlides){const D=[];for(let w=0;w<v.length;w+=1){let P=v[w];n.roundLengths&&(P=Math.floor(P)),v[w]<=e.virtualSize-S&&D.push(P)}v=D,Math.floor(e.virtualSize-S)-Math.floor(v[v.length-1])>1&&v.push(e.virtualSize-S)}if(c&&n.loop){const D=d[0]+E;if(n.slidesPerGroup>1){const w=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/n.slidesPerGroup),P=D*n.slidesPerGroup;for(let O=0;O<w;O+=1)v.push(v[v.length-1]+P)}for(let w=0;w<e.virtual.slidesBefore+e.virtual.slidesAfter;w+=1)n.slidesPerGroup===1&&v.push(v[v.length-1]+D),y.push(y[y.length-1]+D),e.virtualSize+=D}if(v.length===0&&(v=[0]),E!==0){const D=e.isHorizontal()&&s?"marginLeft":e.getDirectionLabel("marginRight");m.filter((w,P)=>!n.cssMode||n.loop?!0:P!==m.length-1).forEach(w=>{w.style[D]=`${E}px`})}if(n.centeredSlides&&n.centeredSlidesBounds){let D=0;d.forEach(P=>{D+=P+(E||0)}),D-=E;const w=D>S?D-S:0;v=v.map(P=>P<=0?-f:P>w?w+g:P)}if(n.centerInsufficientSlides){let D=0;d.forEach(P=>{D+=P+(E||0)}),D-=E;const w=(f||0)+(g||0);if(D+w<S){const P=(S-D-w)/2;v.forEach((O,H)=>{v[H]=O-P}),y.forEach((O,H)=>{y[H]=O+P})}}if(Object.assign(e,{slides:m,snapGrid:v,slidesGrid:y,slidesSizesGrid:d}),n.centeredSlides&&n.cssMode&&!n.centeredSlidesBounds){In(i,"--swiper-centered-offset-before",`${-v[0]}px`),In(i,"--swiper-centered-offset-after",`${e.size/2-d[d.length-1]/2}px`);const D=-e.snapGrid[0],w=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(P=>P+D),e.slidesGrid=e.slidesGrid.map(P=>P+w)}if(b!==l&&e.emit("slidesLengthChange"),v.length!==A&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),y.length!==p&&e.emit("slidesGridLengthChange"),n.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!c&&!n.cssMode&&(n.effect==="slide"||n.effect==="fade")){const D=`${n.containerModifierClass}backface-hidden`,w=e.el.classList.contains(D);b<=n.maxBackfaceHiddenSlides?w||e.el.classList.add(D):w&&e.el.classList.remove(D)}}function sd(e){const t=this,n=[],i=t.virtual&&t.params.virtual.enabled;let r=0,s;typeof e=="number"?t.setTransition(e):e===!0&&t.setTransition(t.params.speed);const o=c=>i?t.slides[t.getSlideIndexByData(c)]:t.slides[c];if(t.params.slidesPerView!=="auto"&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(c=>{n.push(c)});else for(s=0;s<Math.ceil(t.params.slidesPerView);s+=1){const c=t.activeIndex+s;if(c>t.slides.length&&!i)break;n.push(o(c))}else n.push(o(t.activeIndex));for(s=0;s<n.length;s+=1)if(typeof n[s]<"u"){const c=n[s].offsetHeight;r=c>r?c:r}(r||r===0)&&(t.wrapperEl.style.height=`${r}px`)}function od(){const e=this,t=e.slides,n=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let i=0;i<t.length;i+=1)t[i].swiperSlideOffset=(e.isHorizontal()?t[i].offsetLeft:t[i].offsetTop)-n-e.cssOverflowAdjustment()}const oo=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};function ad(e=this&&this.translate||0){const t=this,n=t.params,{slides:i,rtlTranslate:r,snapGrid:s}=t;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&t.updateSlidesOffset();let o=-e;r&&(o=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let c=n.spaceBetween;typeof c=="string"&&c.indexOf("%")>=0?c=parseFloat(c.replace("%",""))/100*t.size:typeof c=="string"&&(c=parseFloat(c));for(let l=0;l<i.length;l+=1){const m=i[l];let b=m.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(b-=i[0].swiperSlideOffset);const v=(o+(n.centeredSlides?t.minTranslate():0)-b)/(m.swiperSlideSize+c),y=(o-s[0]+(n.centeredSlides?t.minTranslate():0)-b)/(m.swiperSlideSize+c),d=-(o-b),f=d+t.slidesSizesGrid[l],g=d>=0&&d<=t.size-t.slidesSizesGrid[l],A=d>=0&&d<t.size-1||f>1&&f<=t.size||d<=0&&f>=t.size;A&&(t.visibleSlides.push(m),t.visibleSlidesIndexes.push(l)),oo(m,A,n.slideVisibleClass),oo(m,g,n.slideFullyVisibleClass),m.progress=r?-v:v,m.originalProgress=r?-y:y}}function ld(e){const t=this;if(typeof e>"u"){const b=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*b||0}const n=t.params,i=t.maxTranslate()-t.minTranslate();let{progress:r,isBeginning:s,isEnd:o,progressLoop:c}=t;const l=s,m=o;if(i===0)r=0,s=!0,o=!0;else{r=(e-t.minTranslate())/i;const b=Math.abs(e-t.minTranslate())<1,v=Math.abs(e-t.maxTranslate())<1;s=b||r<=0,o=v||r>=1,b&&(r=0),v&&(r=1)}if(n.loop){const b=t.getSlideIndexByData(0),v=t.getSlideIndexByData(t.slides.length-1),y=t.slidesGrid[b],d=t.slidesGrid[v],f=t.slidesGrid[t.slidesGrid.length-1],g=Math.abs(e);g>=y?c=(g-y)/f:c=(g+f-d)/f,c>1&&(c-=1)}Object.assign(t,{progress:r,progressLoop:c,isBeginning:s,isEnd:o}),(n.watchSlidesProgress||n.centeredSlides&&n.autoHeight)&&t.updateSlidesProgress(e),s&&!l&&t.emit("reachBeginning toEdge"),o&&!m&&t.emit("reachEnd toEdge"),(l&&!s||m&&!o)&&t.emit("fromEdge"),t.emit("progress",r)}const Ar=(e,t,n)=>{t&&!e.classList.contains(n)?e.classList.add(n):!t&&e.classList.contains(n)&&e.classList.remove(n)};function cd(){const e=this,{slides:t,params:n,slidesEl:i,activeIndex:r}=e,s=e.virtual&&n.virtual.enabled,o=e.grid&&n.grid&&n.grid.rows>1,c=v=>It(i,`.${n.slideClass}${v}, swiper-slide${v}`)[0];let l,m,b;if(s)if(n.loop){let v=r-e.virtual.slidesBefore;v<0&&(v=e.virtual.slides.length+v),v>=e.virtual.slides.length&&(v-=e.virtual.slides.length),l=c(`[data-swiper-slide-index="${v}"]`)}else l=c(`[data-swiper-slide-index="${r}"]`);else o?(l=t.find(v=>v.column===r),b=t.find(v=>v.column===r+1),m=t.find(v=>v.column===r-1)):l=t[r];l&&(o||(b=Ju(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!b&&(b=t[0]),m=Yu(l,`.${n.slideClass}, swiper-slide`)[0],n.loop&&!m===0&&(m=t[t.length-1]))),t.forEach(v=>{Ar(v,v===l,n.slideActiveClass),Ar(v,v===b,n.slideNextClass),Ar(v,v===m,n.slidePrevClass)}),e.emitSlidesClasses()}const bi=(e,t)=>{if(!e||e.destroyed||!e.params)return;const n=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,i=t.closest(n());if(i){let r=i.querySelector(`.${e.params.lazyPreloaderClass}`);!r&&e.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},Er=(e,t)=>{if(!e.slides[t])return;const n=e.slides[t].querySelector('[loading="lazy"]');n&&n.removeAttribute("loading")},Wr=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const n=e.slides.length;if(!n||!t||t<0)return;t=Math.min(t,n);const i=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),r=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const o=r,c=[o-t];c.push(...Array.from({length:t}).map((l,m)=>o+i+m)),e.slides.forEach((l,m)=>{c.includes(l.column)&&Er(e,m)});return}const s=r+i-1;if(e.params.rewind||e.params.loop)for(let o=r-t;o<=s+t;o+=1){const c=(o%n+n)%n;(c<r||c>s)&&Er(e,c)}else for(let o=Math.max(r-t,0);o<=Math.min(s+t,n-1);o+=1)o!==r&&(o>s||o<r)&&Er(e,o)};function ud(e){const{slidesGrid:t,params:n}=e,i=e.rtlTranslate?e.translate:-e.translate;let r;for(let s=0;s<t.length;s+=1)typeof t[s+1]<"u"?i>=t[s]&&i<t[s+1]-(t[s+1]-t[s])/2?r=s:i>=t[s]&&i<t[s+1]&&(r=s+1):i>=t[s]&&(r=s);return n.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function dd(e){const t=this,n=t.rtlTranslate?t.translate:-t.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:o,snapIndex:c}=t;let l=e,m;const b=d=>{let f=d-t.virtual.slidesBefore;return f<0&&(f=t.virtual.slides.length+f),f>=t.virtual.slides.length&&(f-=t.virtual.slides.length),f};if(typeof l>"u"&&(l=ud(t)),i.indexOf(n)>=0)m=i.indexOf(n);else{const d=Math.min(r.slidesPerGroupSkip,l);m=d+Math.floor((l-d)/r.slidesPerGroup)}if(m>=i.length&&(m=i.length-1),l===s&&!t.params.loop){m!==c&&(t.snapIndex=m,t.emit("snapIndexChange"));return}if(l===s&&t.params.loop&&t.virtual&&t.params.virtual.enabled){t.realIndex=b(l);return}const v=t.grid&&r.grid&&r.grid.rows>1;let y;if(t.virtual&&r.virtual.enabled&&r.loop)y=b(l);else if(v){const d=t.slides.find(g=>g.column===l);let f=parseInt(d.getAttribute("data-swiper-slide-index"),10);Number.isNaN(f)&&(f=Math.max(t.slides.indexOf(d),0)),y=Math.floor(f/r.grid.rows)}else if(t.slides[l]){const d=t.slides[l].getAttribute("data-swiper-slide-index");d?y=parseInt(d,10):y=l}else y=l;Object.assign(t,{previousSnapIndex:c,snapIndex:m,previousRealIndex:o,realIndex:y,previousIndex:s,activeIndex:l}),t.initialized&&Wr(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(o!==y&&t.emit("realIndexChange"),t.emit("slideChange"))}function hd(e,t){const n=this,i=n.params;let r=e.closest(`.${i.slideClass}, swiper-slide`);!r&&n.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(c=>{!r&&c.matches&&c.matches(`.${i.slideClass}, swiper-slide`)&&(r=c)});let s=!1,o;if(r){for(let c=0;c<n.slides.length;c+=1)if(n.slides[c]===r){s=!0,o=c;break}}if(r&&s)n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):n.clickedIndex=o;else{n.clickedSlide=void 0,n.clickedIndex=void 0;return}i.slideToClickedSlide&&n.clickedIndex!==void 0&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}var fd={updateSize:id,updateSlides:rd,updateAutoHeight:sd,updateSlidesOffset:od,updateSlidesProgress:ad,updateProgress:ld,updateSlidesClasses:cd,updateActiveIndex:dd,updateClickedSlide:hd};function md(e=this.isHorizontal()?"x":"y"){const t=this,{params:n,rtlTranslate:i,translate:r,wrapperEl:s}=t;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;let o=jr(s,e);return o+=t.cssOverflowAdjustment(),i&&(o=-o),o||0}function pd(e,t){const n=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:o}=n;let c=0,l=0;const m=0;n.isHorizontal()?c=i?-e:e:l=e,r.roundLengths&&(c=Math.floor(c),l=Math.floor(l)),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?c:l,r.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-c:-l:r.virtualTranslate||(n.isHorizontal()?c-=n.cssOverflowAdjustment():l-=n.cssOverflowAdjustment(),s.style.transform=`translate3d(${c}px, ${l}px, ${m}px)`);let b;const v=n.maxTranslate()-n.minTranslate();v===0?b=0:b=(e-n.minTranslate())/v,b!==o&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)}function gd(){return-this.snapGrid[0]}function vd(){return-this.snapGrid[this.snapGrid.length-1]}function bd(e=0,t=this.params.speed,n=!0,i=!0,r){const s=this,{params:o,wrapperEl:c}=s;if(s.animating&&o.preventInteractionOnTransition)return!1;const l=s.minTranslate(),m=s.maxTranslate();let b;if(i&&e>l?b=l:i&&e<m?b=m:b=e,s.updateProgress(b),o.cssMode){const v=s.isHorizontal();if(t===0)c[v?"scrollLeft":"scrollTop"]=-b;else{if(!s.support.smoothScroll)return ua({swiper:s,targetPosition:-b,side:v?"left":"top"}),!0;c.scrollTo({[v?"left":"top"]:-b,behavior:"smooth"})}return!0}return t===0?(s.setTransition(0),s.setTranslate(b),n&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionEnd"))):(s.setTransition(t),s.setTranslate(b),n&&(s.emit("beforeTransitionStart",t,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(y){!s||s.destroyed||y.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,s.animating=!1,n&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var yd={getTranslate:md,setTranslate:pd,minTranslate:gd,maxTranslate:vd,translateTo:bd};function Sd(e,t){const n=this;n.params.cssMode||(n.wrapperEl.style.transitionDuration=`${e}ms`,n.wrapperEl.style.transitionDelay=e===0?"0ms":""),n.emit("setTransition",e,t)}function ma({swiper:e,runCallbacks:t,direction:n,step:i}){const{activeIndex:r,previousIndex:s}=e;let o=n;o||(r>s?o="next":r<s?o="prev":o="reset"),e.emit(`transition${i}`),t&&o==="reset"?e.emit(`slideResetTransition${i}`):t&&r!==s&&(e.emit(`slideChangeTransition${i}`),o==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`))}function xd(e=!0,t){const n=this,{params:i}=n;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),ma({swiper:n,runCallbacks:e,direction:t,step:"Start"}))}function Ad(e=!0,t){const n=this,{params:i}=n;n.animating=!1,!i.cssMode&&(n.setTransition(0),ma({swiper:n,runCallbacks:e,direction:t,step:"End"}))}var Ed={setTransition:Sd,transitionStart:xd,transitionEnd:Ad};function Td(e=0,t,n=!0,i,r){typeof e=="string"&&(e=parseInt(e,10));const s=this;let o=e;o<0&&(o=0);const{params:c,snapGrid:l,slidesGrid:m,previousIndex:b,activeIndex:v,rtlTranslate:y,wrapperEl:d,enabled:f}=s;if(!f&&!i&&!r||s.destroyed||s.animating&&c.preventInteractionOnTransition)return!1;typeof t>"u"&&(t=s.params.speed);const g=Math.min(s.params.slidesPerGroupSkip,o);let A=g+Math.floor((o-g)/s.params.slidesPerGroup);A>=l.length&&(A=l.length-1);const p=-l[A];if(c.normalizeSlideIndex)for(let N=0;N<m.length;N+=1){const M=-Math.floor(p*100),j=Math.floor(m[N]*100),D=Math.floor(m[N+1]*100);typeof m[N+1]<"u"?M>=j&&M<D-(D-j)/2?o=N:M>=j&&M<D&&(o=N+1):M>=j&&(o=N)}if(s.initialized&&o!==v&&(!s.allowSlideNext&&(y?p>s.translate&&p>s.minTranslate():p<s.translate&&p<s.minTranslate())||!s.allowSlidePrev&&p>s.translate&&p>s.maxTranslate()&&(v||0)!==o))return!1;o!==(b||0)&&n&&s.emit("beforeSlideChangeStart"),s.updateProgress(p);let S;o>v?S="next":o<v?S="prev":S="reset";const E=s.virtual&&s.params.virtual.enabled;if(!(E&&r)&&(y&&-p===s.translate||!y&&p===s.translate))return s.updateActiveIndex(o),c.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),c.effect!=="slide"&&s.setTranslate(p),S!=="reset"&&(s.transitionStart(n,S),s.transitionEnd(n,S)),!1;if(c.cssMode){const N=s.isHorizontal(),M=y?p:-p;if(t===0)E&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),E&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{d[N?"scrollLeft":"scrollTop"]=M})):d[N?"scrollLeft":"scrollTop"]=M,E&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1});else{if(!s.support.smoothScroll)return ua({swiper:s,targetPosition:M,side:N?"left":"top"}),!0;d.scrollTo({[N?"left":"top"]:M,behavior:"smooth"})}return!0}const R=fa().isSafari;return E&&!r&&R&&s.isElement&&s.virtual.update(!1,!1,o),s.setTransition(t),s.setTranslate(p),s.updateActiveIndex(o),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,i),s.transitionStart(n,S),t===0?s.transitionEnd(n,S):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(M){!s||s.destroyed||M.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,S))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function Cd(e=0,t,n=!0,i){typeof e=="string"&&(e=parseInt(e,10));const r=this;if(r.destroyed)return;typeof t>"u"&&(t=r.params.speed);const s=r.grid&&r.params.grid&&r.params.grid.rows>1;let o=e;if(r.params.loop)if(r.virtual&&r.params.virtual.enabled)o=o+r.virtual.slidesBefore;else{let c;if(s){const g=o*r.params.grid.rows;c=r.slides.find(A=>A.getAttribute("data-swiper-slide-index")*1===g).column}else c=r.getSlideIndexByData(o);const l=s?Math.ceil(r.slides.length/r.params.grid.rows):r.slides.length,{centeredSlides:m,slidesOffsetBefore:b,slidesOffsetAfter:v}=r.params,y=m||!!b||!!v;let d=r.params.slidesPerView;d==="auto"?d=r.slidesPerViewDynamic():(d=Math.ceil(parseFloat(r.params.slidesPerView,10)),y&&d%2===0&&(d=d+1));let f=l-c<d;if(y&&(f=f||c<Math.ceil(d/2)),i&&y&&r.params.slidesPerView!=="auto"&&!s&&(f=!1),f){const g=y?c<r.activeIndex?"prev":"next":c-r.activeIndex-1<r.params.slidesPerView?"next":"prev";r.loopFix({direction:g,slideTo:!0,activeSlideIndex:g==="next"?c+1:c-l+1,slideRealIndex:g==="next"?r.realIndex:void 0})}if(s){const g=o*r.params.grid.rows;o=r.slides.find(A=>A.getAttribute("data-swiper-slide-index")*1===g).column}else o=r.getSlideIndexByData(o)}return requestAnimationFrame(()=>{r.slideTo(o,t,n,i)}),r}function kd(e,t=!0,n){const i=this,{enabled:r,params:s,animating:o}=i;if(!r||i.destroyed)return i;typeof e>"u"&&(e=i.params.speed);let c=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(c=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:c,m=i.virtual&&s.virtual.enabled;if(s.loop){if(o&&!m&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,e,t,n)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,e,t,n):i.slideTo(i.activeIndex+l,e,t,n)}function Ld(e,t=!0,n){const i=this,{params:r,snapGrid:s,slidesGrid:o,rtlTranslate:c,enabled:l,animating:m}=i;if(!l||i.destroyed)return i;typeof e>"u"&&(e=i.params.speed);const b=i.virtual&&r.virtual.enabled;if(r.loop){if(m&&!b&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const v=c?i.translate:-i.translate;function y(S){return S<0?-Math.floor(Math.abs(S)):Math.floor(S)}const d=y(v),f=s.map(S=>y(S)),g=r.freeMode&&r.freeMode.enabled;let A=s[f.indexOf(d)-1];if(typeof A>"u"&&(r.cssMode||g)){let S;s.forEach((E,k)=>{d>=E&&(S=k)}),typeof S<"u"&&(A=g?s[S]:s[S>0?S-1:S])}let p=0;if(typeof A<"u"&&(p=o.indexOf(A),p<0&&(p=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(p=p-i.slidesPerViewDynamic("previous",!0)+1,p=Math.max(p,0))),r.rewind&&i.isBeginning){const S=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(S,e,t,n)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(p,e,t,n)}),!0;return i.slideTo(p,e,t,n)}function Md(e,t=!0,n){const i=this;if(!i.destroyed)return typeof e>"u"&&(e=i.params.speed),i.slideTo(i.activeIndex,e,t,n)}function Pd(e,t=!0,n,i=.5){const r=this;if(r.destroyed)return;typeof e>"u"&&(e=r.params.speed);let s=r.activeIndex;const o=Math.min(r.params.slidesPerGroupSkip,s),c=o+Math.floor((s-o)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[c]){const m=r.snapGrid[c],b=r.snapGrid[c+1];l-m>(b-m)*i&&(s+=r.params.slidesPerGroup)}else{const m=r.snapGrid[c-1],b=r.snapGrid[c];l-m<=(b-m)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,e,t,n)}function wd(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:n}=e,i=t.slidesPerView==="auto"?e.slidesPerViewDynamic():t.slidesPerView;let r=e.getSlideIndexWhenGrid(e.clickedIndex),s;const o=e.isElement?"swiper-slide":`.${t.slideClass}`,c=e.grid&&e.params.grid&&e.params.grid.rows>1;if(t.loop){if(e.animating)return;s=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?e.slideToLoop(s):r>(c?(e.slides.length-i)/2-(e.params.grid.rows-1):e.slides.length-i)?(e.loopFix(),r=e.getSlideIndex(It(n,`${o}[data-swiper-slide-index="${s}"]`)[0]),cn(()=>{e.slideTo(r)})):e.slideTo(r)}else e.slideTo(r)}var Rd={slideTo:Td,slideToLoop:Cd,slideNext:kd,slidePrev:Ld,slideReset:Md,slideToClosest:Pd,slideToClickedSlide:wd};function Dd(e,t){const n=this,{params:i,slidesEl:r}=n;if(!i.loop||n.virtual&&n.params.virtual.enabled)return;const s=()=>{It(r,`.${i.slideClass}, swiper-slide`).forEach((f,g)=>{f.setAttribute("data-swiper-slide-index",g)})},o=()=>{const d=It(r,`.${i.slideBlankClass}`);d.forEach(f=>{f.remove()}),d.length>0&&(n.recalcSlides(),n.updateSlides())},c=n.grid&&i.grid&&i.grid.rows>1;i.loopAddBlankSlides&&(i.slidesPerGroup>1||c)&&o();const l=i.slidesPerGroup*(c?i.grid.rows:1),m=n.slides.length%l!==0,b=c&&n.slides.length%i.grid.rows!==0,v=d=>{for(let f=0;f<d;f+=1){const g=n.isElement?te("swiper-slide",[i.slideBlankClass]):te("div",[i.slideClass,i.slideBlankClass]);n.slidesEl.append(g)}};if(m){if(i.loopAddBlankSlides){const d=l-n.slides.length%l;v(d),n.recalcSlides(),n.updateSlides()}else Li("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(b){if(i.loopAddBlankSlides){const d=i.grid.rows-n.slides.length%i.grid.rows;v(d),n.recalcSlides(),n.updateSlides()}else Li("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();const y=i.centeredSlides||!!i.slidesOffsetBefore||!!i.slidesOffsetAfter;n.loopFix({slideRealIndex:e,direction:y?void 0:"next",initial:t})}function Id({slideRealIndex:e,slideTo:t=!0,direction:n,setTranslate:i,activeSlideIndex:r,initial:s,byController:o,byMousewheel:c}={}){const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:m,allowSlidePrev:b,allowSlideNext:v,slidesEl:y,params:d}=l,{centeredSlides:f,slidesOffsetBefore:g,slidesOffsetAfter:A,initialSlide:p}=d,S=f||!!g||!!A;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&d.virtual.enabled){t&&(!S&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):S&&l.snapIndex<d.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=b,l.allowSlideNext=v,l.emit("loopFix");return}let E=d.slidesPerView;E==="auto"?E=l.slidesPerViewDynamic():(E=Math.ceil(parseFloat(d.slidesPerView,10)),S&&E%2===0&&(E=E+1));const k=d.slidesPerGroupAuto?E:d.slidesPerGroup;let L=S?Math.max(k,Math.ceil(E/2)):k;L%k!==0&&(L+=k-L%k),L+=d.loopAdditionalSlides,l.loopedSlides=L;const R=l.grid&&d.grid&&d.grid.rows>1;m.length<E+L||l.params.effect==="cards"&&m.length<E+L*2?Li("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):R&&d.grid.fill==="row"&&Li("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const N=[],M=[],j=R?Math.ceil(m.length/d.grid.rows):m.length,D=s&&j-p<E&&!S;let w=D?p:l.activeIndex;typeof r>"u"?r=l.getSlideIndex(m.find(F=>F.classList.contains(d.slideActiveClass))):w=r;const P=n==="next"||!n,O=n==="prev"||!n;let H=0,G=0;const I=(R?m[r].column:r)+(S&&typeof i>"u"?-E/2+.5:0);if(I<L){H=Math.max(L-I,k);for(let F=0;F<L-I;F+=1){const X=F-Math.floor(F/j)*j;if(R){const K=j-X-1;for(let dt=m.length-1;dt>=0;dt-=1)m[dt].column===K&&N.push(dt)}else N.push(j-X-1)}}else if(I+E>j-L){G=Math.max(I-(j-L*2),k),D&&(G=Math.max(G,E-j+p+1));for(let F=0;F<G;F+=1){const X=F-Math.floor(F/j)*j;R?m.forEach((K,dt)=>{K.column===X&&M.push(dt)}):M.push(X)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),l.params.effect==="cards"&&m.length<E+L*2&&(M.includes(r)&&M.splice(M.indexOf(r),1),N.includes(r)&&N.splice(N.indexOf(r),1)),O&&N.forEach(F=>{m[F].swiperLoopMoveDOM=!0,y.prepend(m[F]),m[F].swiperLoopMoveDOM=!1}),P&&M.forEach(F=>{m[F].swiperLoopMoveDOM=!0,y.append(m[F]),m[F].swiperLoopMoveDOM=!1}),l.recalcSlides(),d.slidesPerView==="auto"?l.updateSlides():R&&(N.length>0&&O||M.length>0&&P)&&l.slides.forEach((F,X)=>{l.grid.updateSlide(X,F,l.slides)}),d.watchSlidesProgress&&l.updateSlidesOffset(),t){if(N.length>0&&O){if(typeof e>"u"){const F=l.slidesGrid[w],K=l.slidesGrid[w+H]-F;c?l.setTranslate(l.translate-K):(l.slideTo(w+Math.ceil(H),0,!1,!0),i&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-K,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-K))}else if(i){const F=R?N.length/d.grid.rows:N.length;l.slideTo(l.activeIndex+F,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(M.length>0&&P)if(typeof e>"u"){const F=l.slidesGrid[w],K=l.slidesGrid[w-G]-F;c?l.setTranslate(l.translate-K):(l.slideTo(w-G,0,!1,!0),i&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-K,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-K))}else{const F=R?M.length/d.grid.rows:M.length;l.slideTo(l.activeIndex-F,0,!1,!0)}}if(l.allowSlidePrev=b,l.allowSlideNext=v,l.controller&&l.controller.control&&!o){const F={slideRealIndex:e,direction:n,setTranslate:i,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(X=>{!X.destroyed&&X.params.loop&&X.loopFix({...F,slideTo:X.params.slidesPerView===d.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...F,slideTo:l.controller.control.params.slidesPerView===d.slidesPerView?t:!1})}l.emit("loopFix")}function Od(){const e=this,{params:t,slidesEl:n}=e;if(!t.loop||!n||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const i=[];e.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),e.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{n.append(r)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}var _d={loopCreate:Dd,loopFix:Id,loopDestroy:Od};function Nd(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const n=t.params.touchEventsTarget==="container"?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),n.style.cursor="move",n.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})}function Bd(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}var Fd={setGrabCursor:Nd,unsetGrabCursor:Bd};function zd(e,t=this){function n(i){if(!i||i===kt()||i===vt())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(e);return!r&&!i.getRootNode?null:r||n(i.getRootNode().host)}return n(t)}function ao(e,t,n){const i=vt(),{params:r}=e,s=r.edgeSwipeDetection,o=r.edgeSwipeThreshold;return s&&(n<=o||n>=i.innerWidth-o)?s==="prevent"?(t.preventDefault(),!0):!1:!0}function jd(e){const t=this,n=kt();let i=e;i.originalEvent&&(i=i.originalEvent);const r=t.touchEventsData;if(i.type==="pointerdown"){if(r.pointerId!==null&&r.pointerId!==i.pointerId)return;r.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(r.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){ao(t,i,i.targetTouches[0].pageX);return}const{params:s,touches:o,enabled:c}=t;if(!c||!s.simulateTouch&&i.pointerType==="mouse"||t.animating&&s.preventInteractionOnTransition)return;!t.animating&&s.cssMode&&s.loop&&t.loopFix();let l=i.target;if(s.touchEventsTarget==="wrapper"&&!Xu(l,t.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||r.isTouched&&r.isMoved)return;const m=!!s.noSwipingClass&&s.noSwipingClass!=="",b=i.composedPath?i.composedPath():i.path;m&&i.target&&i.target.shadowRoot&&b&&(l=b[0]);const v=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,y=!!(i.target&&i.target.shadowRoot);if(s.noSwiping&&(y?zd(v,l):l.closest(v))){t.allowClick=!0;return}if(s.swipeHandler&&!l.closest(s.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;const d=o.currentX,f=o.currentY;if(!ao(t,i,d))return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=d,o.startY=f,r.touchStartTime=oe(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let g=!0;l.matches(r.focusableElements)&&(g=!1,l.nodeName==="SELECT"&&(r.isTouched=!1)),n.activeElement&&n.activeElement.matches(r.focusableElements)&&n.activeElement!==l&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!l.matches(r.focusableElements))&&n.activeElement.blur();const A=g&&t.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||A)&&!l.isContentEditable&&i.preventDefault(),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.animating&&!s.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",i)}function Hd(e){const t=kt(),n=this,i=n.touchEventsData,{params:r,touches:s,rtlTranslate:o,enabled:c}=n;if(!c||!r.simulateTouch&&e.pointerType==="mouse")return;let l=e;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let m;if(l.type==="touchmove"){if(m=[...l.changedTouches].find(L=>L.identifier===i.touchId),!m||m.identifier!==i.touchId)return}else m=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",l);return}const b=m.pageX,v=m.pageY;if(l.preventedByNestedSwiper){s.startX=b,s.startY=v;return}if(!n.allowTouchMove){l.target.matches(i.focusableElements)||(n.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:b,startY:v,currentX:b,currentY:v}),i.touchStartTime=oe());return}if(r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(v<s.startY&&n.translate<=n.maxTranslate()||v>s.startY&&n.translate>=n.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else{if(o&&(b>s.startX&&-n.translate<=n.maxTranslate()||b<s.startX&&-n.translate>=n.minTranslate()))return;if(!o&&(b<s.startX&&n.translate<=n.maxTranslate()||b>s.startX&&n.translate>=n.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==l.target&&l.pointerType!=="mouse"&&t.activeElement.blur(),t.activeElement&&l.target===t.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,n.allowClick=!1;return}i.allowTouchCallbacks&&n.emit("touchMove",l),s.previousX=s.currentX,s.previousY=s.currentY,s.currentX=b,s.currentY=v;const y=s.currentX-s.startX,d=s.currentY-s.startY;if(n.params.threshold&&Math.sqrt(y**2+d**2)<n.params.threshold)return;if(typeof i.isScrolling>"u"){let L;n.isHorizontal()&&s.currentY===s.startY||n.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:y*y+d*d>=25&&(L=Math.atan2(Math.abs(d),Math.abs(y))*180/Math.PI,i.isScrolling=n.isHorizontal()?L>r.touchAngle:90-L>r.touchAngle)}if(i.isScrolling&&n.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;n.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let f=n.isHorizontal()?y:d,g=n.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(f=Math.abs(f)*(o?1:-1),g=Math.abs(g)*(o?1:-1)),s.diff=f,f*=r.touchRatio,o&&(f=-f,g=-g);const A=n.touchesDirection;n.swipeDirection=f>0?"prev":"next",n.touchesDirection=g>0?"prev":"next";const p=n.params.loop&&!r.cssMode,S=n.touchesDirection==="next"&&n.allowSlideNext||n.touchesDirection==="prev"&&n.allowSlidePrev;if(!i.isMoved){if(p&&S&&n.loopFix({direction:n.swipeDirection}),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating){const L=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});n.wrapperEl.dispatchEvent(L)}i.allowMomentumBounce=!1,r.grabCursor&&(n.allowSlideNext===!0||n.allowSlidePrev===!0)&&n.setGrabCursor(!0),n.emit("sliderFirstMove",l)}if(new Date().getTime(),r._loopSwapReset!==!1&&i.isMoved&&i.allowThresholdMove&&A!==n.touchesDirection&&p&&S&&Math.abs(f)>=1){Object.assign(s,{startX:b,startY:v,currentX:b,currentY:v,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}n.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=f+i.startTranslate;let E=!0,k=r.resistanceRatio;if(r.touchReleaseOnEdges&&(k=0),f>0?(p&&S&&i.allowThresholdMove&&i.currentTranslate>(r.centeredSlides?n.minTranslate()-n.slidesSizesGrid[n.activeIndex+1]-(r.slidesPerView!=="auto"&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.activeIndex+1]+n.params.spaceBetween:0)-n.params.spaceBetween:n.minTranslate())&&n.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>n.minTranslate()&&(E=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+(-n.minTranslate()+i.startTranslate+f)**k))):f<0&&(p&&S&&i.allowThresholdMove&&i.currentTranslate<(r.centeredSlides?n.maxTranslate()+n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween+(r.slidesPerView!=="auto"&&n.slides.length-r.slidesPerView>=2?n.slidesSizesGrid[n.slidesSizesGrid.length-1]+n.params.spaceBetween:0):n.maxTranslate())&&n.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:n.slides.length-(r.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<n.maxTranslate()&&(E=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-(n.maxTranslate()-i.startTranslate-f)**k))),E&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&n.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&n.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&!n.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(f)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=n.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}function Wd(e){const t=this,n=t.touchEventsData;let i=e;i.originalEvent&&(i=i.originalEvent);let r;if(i.type==="touchend"||i.type==="touchcancel"){if(r=[...i.changedTouches].find(L=>L.identifier===n.touchId),!r||r.identifier!==n.touchId)return}else{if(n.touchId!==null||i.pointerId!==n.pointerId)return;r=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(t.browser.isSafari||t.browser.isWebView)))return;n.pointerId=null,n.touchId=null;const{params:o,touches:c,rtlTranslate:l,slidesGrid:m,enabled:b}=t;if(!b||!o.simulateTouch&&i.pointerType==="mouse")return;if(n.allowTouchCallbacks&&t.emit("touchEnd",i),n.allowTouchCallbacks=!1,!n.isTouched){n.isMoved&&o.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,n.startMoving=!1;return}o.grabCursor&&n.isMoved&&n.isTouched&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!1);const v=oe(),y=v-n.touchStartTime;if(t.allowClick){const L=i.path||i.composedPath&&i.composedPath();t.updateClickedSlide(L&&L[0]||i.target,L),t.emit("tap click",i),y<300&&v-n.lastClickTime<300&&t.emit("doubleTap doubleClick",i)}if(n.lastClickTime=oe(),cn(()=>{t.destroyed||(t.allowClick=!0)}),!n.isTouched||!n.isMoved||!t.swipeDirection||c.diff===0&&!n.loopSwapReset||n.currentTranslate===n.startTranslate&&!n.loopSwapReset){n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;return}n.isTouched=!1,n.isMoved=!1,n.startMoving=!1;let d;if(o.followFinger?d=l?t.translate:-t.translate:d=-n.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){t.freeMode.onTouchEnd({currentPos:d});return}const f=d>=-t.maxTranslate()&&!t.params.loop;let g=0,A=t.slidesSizesGrid[0];for(let L=0;L<m.length;L+=L<o.slidesPerGroupSkip?1:o.slidesPerGroup){const R=L<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof m[L+R]<"u"?(f||d>=m[L]&&d<m[L+R])&&(g=L,A=m[L+R]-m[L]):(f||d>=m[L])&&(g=L,A=m[m.length-1]-m[m.length-2])}let p=null,S=null;o.rewind&&(t.isBeginning?S=o.virtual&&o.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(p=0));const E=(d-m[g])/A,k=g<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(y>o.longSwipesMs){if(!o.longSwipes){t.slideTo(t.activeIndex);return}t.swipeDirection==="next"&&(E>=o.longSwipesRatio?t.slideTo(o.rewind&&t.isEnd?p:g+k):t.slideTo(g)),t.swipeDirection==="prev"&&(E>1-o.longSwipesRatio?t.slideTo(g+k):S!==null&&E<0&&Math.abs(E)>o.longSwipesRatio?t.slideTo(S):t.slideTo(g))}else{if(!o.shortSwipes){t.slideTo(t.activeIndex);return}t.navigation&&(i.target===t.navigation.nextEl||i.target===t.navigation.prevEl)?i.target===t.navigation.nextEl?t.slideTo(g+k):t.slideTo(g):(t.swipeDirection==="next"&&t.slideTo(p!==null?p:g+k),t.swipeDirection==="prev"&&t.slideTo(S!==null?S:g))}}function lo(){const e=this,{params:t,el:n}=e;if(n&&n.offsetWidth===0)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=e,o=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const c=o&&t.loop;(t.slidesPerView==="auto"||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!c?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!o?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=r,e.allowSlideNext=i,e.params.watchOverflow&&s!==e.snapGrid&&e.checkOverflow()}function qd(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function $d(){const e=this,{wrapperEl:t,rtlTranslate:n,enabled:i}=e;if(!i)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let r;const s=e.maxTranslate()-e.minTranslate();s===0?r=0:r=(e.translate-e.minTranslate())/s,r!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Vd(e){const t=this;bi(t,e.target),!(t.params.cssMode||t.params.slidesPerView!=="auto"&&!t.params.autoHeight)&&t.update()}function Ud(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const pa=(e,t)=>{const n=kt(),{params:i,el:r,wrapperEl:s,device:o}=e,c=!!i.nested,l=t==="on"?"addEventListener":"removeEventListener",m=t;!r||typeof r=="string"||(n[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:c}),r[l]("touchstart",e.onTouchStart,{passive:!1}),r[l]("pointerdown",e.onTouchStart,{passive:!1}),n[l]("touchmove",e.onTouchMove,{passive:!1,capture:c}),n[l]("pointermove",e.onTouchMove,{passive:!1,capture:c}),n[l]("touchend",e.onTouchEnd,{passive:!0}),n[l]("pointerup",e.onTouchEnd,{passive:!0}),n[l]("pointercancel",e.onTouchEnd,{passive:!0}),n[l]("touchcancel",e.onTouchEnd,{passive:!0}),n[l]("pointerout",e.onTouchEnd,{passive:!0}),n[l]("pointerleave",e.onTouchEnd,{passive:!0}),n[l]("contextmenu",e.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",e.onClick,!0),i.cssMode&&s[l]("scroll",e.onScroll),i.updateOnWindowResize?e[m](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",lo,!0):e[m]("observerUpdate",lo,!0),r[l]("load",e.onLoad,{capture:!0}))};function Gd(){const e=this,{params:t}=e;e.onTouchStart=jd.bind(e),e.onTouchMove=Hd.bind(e),e.onTouchEnd=Wd.bind(e),e.onDocumentTouchStart=Ud.bind(e),t.cssMode&&(e.onScroll=$d.bind(e)),e.onClick=qd.bind(e),e.onLoad=Vd.bind(e),pa(e,"on")}function Xd(){pa(this,"off")}var Yd={attachEvents:Gd,detachEvents:Xd};const co=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;function Jd(){const e=this,{realIndex:t,initialized:n,params:i,el:r}=e,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const o=kt(),c=i.breakpointsBase==="window"||!i.breakpointsBase?i.breakpointsBase:"container",l=["window","container"].includes(i.breakpointsBase)||!i.breakpointsBase?e.el:o.querySelector(i.breakpointsBase),m=e.getBreakpoint(s,c,l);if(!m||e.currentBreakpoint===m)return;const v=(m in s?s[m]:void 0)||e.originalParams,y=co(e,i),d=co(e,v),f=e.params.grabCursor,g=v.grabCursor,A=i.enabled;y&&!d?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),e.emitContainerClasses()):!y&&d&&(r.classList.add(`${i.containerModifierClass}grid`),(v.grid.fill&&v.grid.fill==="column"||!v.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),e.emitContainerClasses()),f&&!g?e.unsetGrabCursor():!f&&g&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(R=>{if(typeof v[R]>"u")return;const N=i[R]&&i[R].enabled,M=v[R]&&v[R].enabled;N&&!M&&e[R].disable(),!N&&M&&e[R].enable()});const p=v.direction&&v.direction!==i.direction,S=i.loop&&(v.slidesPerView!==i.slidesPerView||p),E=i.loop;p&&n&&e.changeDirection(),Zt(e.params,v);const k=e.params.enabled,L=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),A&&!k?e.disable():!A&&k&&e.enable(),e.currentBreakpoint=m,e.emit("_beforeBreakpoint",v),n&&(S?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!E&&L?(e.loopCreate(t),e.updateSlides()):E&&!L&&e.loopDestroy()),e.emit("breakpoint",v)}function Kd(e,t="window",n){if(!e||t==="container"&&!n)return;let i=!1;const r=vt(),s=t==="window"?r.innerHeight:n.clientHeight,o=Object.keys(e).map(c=>{if(typeof c=="string"&&c.indexOf("@")===0){const l=parseFloat(c.substr(1));return{value:s*l,point:c}}return{value:c,point:c}});o.sort((c,l)=>parseInt(c.value,10)-parseInt(l.value,10));for(let c=0;c<o.length;c+=1){const{point:l,value:m}=o[c];t==="window"?r.matchMedia(`(min-width: ${m}px)`).matches&&(i=l):m<=n.clientWidth&&(i=l)}return i||"max"}var Qd={setBreakpoint:Jd,getBreakpoint:Kd};function Zd(e,t){const n=[];return e.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&n.push(t+r)}):typeof i=="string"&&n.push(t+i)}),n}function th(){const e=this,{classNames:t,params:n,rtl:i,el:r,device:s}=e,o=Zd(["initialized",n.direction,{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&n.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push(...o),r.classList.add(...t),e.emitContainerClasses()}function eh(){const e=this,{el:t,classNames:n}=e;!t||typeof t=="string"||(t.classList.remove(...n),e.emitContainerClasses())}var nh={addClasses:th,removeClasses:eh};function ih(){const e=this,{isLocked:t,params:n}=e,{slidesOffsetBefore:i}=n;if(i){const r=e.slides.length-1,s=e.slidesGrid[r]+e.slidesSizesGrid[r]+i*2;e.isLocked=e.size>s}else e.isLocked=e.snapGrid.length===1;n.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),n.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}var rh={checkOverflow:ih},uo={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function sh(e,t){return function(i={}){const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){Zt(t,i);return}if(e[r]===!0&&(e[r]={enabled:!0}),r==="navigation"&&e[r]&&e[r].enabled&&!e[r].prevEl&&!e[r].nextEl&&(e[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&e[r]&&e[r].enabled&&!e[r].el&&(e[r].auto=!0),!(r in e&&"enabled"in s)){Zt(t,i);return}typeof e[r]=="object"&&!("enabled"in e[r])&&(e[r].enabled=!0),e[r]||(e[r]={enabled:!1}),Zt(t,i)}}const Tr={eventsEmitter:nd,update:fd,translate:yd,transition:Ed,slide:Rd,loop:_d,grabCursor:Fd,events:Yd,breakpoints:Qd,checkOverflow:rh,classes:nh},Cr={};class Qt{constructor(...t){let n,i;t.length===1&&t[0].constructor&&Object.prototype.toString.call(t[0]).slice(8,-1)==="Object"?i=t[0]:[n,i]=t,i||(i={}),i=Zt({},i),n&&!i.el&&(i.el=n);const r=kt();if(i.el&&typeof i.el=="string"&&r.querySelectorAll(i.el).length>1){const l=[];return r.querySelectorAll(i.el).forEach(m=>{const b=Zt({},i,{el:m});l.push(new Qt(b))}),l}const s=this;s.__swiper__=!0,s.support=da(),s.device=ha({userAgent:i.userAgent}),s.browser=fa(),s.eventsListeners={},s.eventsAnyListeners=[],s.modules=[...s.__modules__],i.modules&&Array.isArray(i.modules)&&s.modules.push(...i.modules);const o={};s.modules.forEach(l=>{l({params:i,swiper:s,extendParams:sh(i,o),on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),emit:s.emit.bind(s)})});const c=Zt({},uo,o);return s.params=Zt({},c,Cr,i),s.originalParams=Zt({},s.params),s.passedParams=Zt({},i),s.params&&s.params.on&&Object.keys(s.params.on).forEach(l=>{s.on(l,s.params.on[l])}),s.params&&s.params.onAny&&s.onAny(s.params.onAny),Object.assign(s,{enabled:s.params.enabled,el:n,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return s.params.direction==="horizontal"},isVertical(){return s.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:s.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:s.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),s.emit("_swiper"),s.params.init&&s.init(),s}getDirectionLabel(t){return this.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}getSlideIndex(t){const{slidesEl:n,params:i}=this,r=It(n,`.${i.slideClass}, swiper-slide`),s=Un(r[0]);return Un(t)-s}getSlideIndexByData(t){return this.getSlideIndex(this.slides.find(n=>n.getAttribute("data-swiper-slide-index")*1===t))}getSlideIndexWhenGrid(t){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?t=Math.floor(t/this.params.grid.rows):this.params.grid.fill==="row"&&(t=t%Math.ceil(this.slides.length/this.params.grid.rows))),t}recalcSlides(){const t=this,{slidesEl:n,params:i}=t;t.slides=It(n,`.${i.slideClass}, swiper-slide`)}enable(){const t=this;t.enabled||(t.enabled=!0,t.params.grabCursor&&t.setGrabCursor(),t.emit("enable"))}disable(){const t=this;t.enabled&&(t.enabled=!1,t.params.grabCursor&&t.unsetGrabCursor(),t.emit("disable"))}setProgress(t,n){const i=this;t=Math.min(Math.max(t,0),1);const r=i.minTranslate(),o=(i.maxTranslate()-r)*t+r;i.translateTo(o,typeof n>"u"?0:n),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=t.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(t.params.containerModifierClass)===0);t.emit("_containerClasses",n.join(" "))}getSlideClasses(t){const n=this;return n.destroyed?"":t.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(n.params.slideClass)===0).join(" ")}emitSlidesClasses(){const t=this;if(!t.params._emitClasses||!t.el)return;const n=[];t.slides.forEach(i=>{const r=t.getSlideClasses(i);n.push({slideEl:i,classNames:r}),t.emit("_slideClass",i,r)}),t.emit("_slideClasses",n)}slidesPerViewDynamic(t="current",n=!1){const i=this,{params:r,slides:s,slidesGrid:o,slidesSizesGrid:c,size:l,activeIndex:m}=i;let b=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let v=s[m]?Math.ceil(s[m].swiperSlideSize):0,y;for(let d=m+1;d<s.length;d+=1)s[d]&&!y&&(v+=Math.ceil(s[d].swiperSlideSize),b+=1,v>l&&(y=!0));for(let d=m-1;d>=0;d-=1)s[d]&&!y&&(v+=s[d].swiperSlideSize,b+=1,v>l&&(y=!0))}else if(t==="current")for(let v=m+1;v<s.length;v+=1)(n?o[v]+c[v]-o[m]<l:o[v]-o[m]<l)&&(b+=1);else for(let v=m-1;v>=0;v-=1)o[m]-o[v]<l&&(b+=1);return b}update(){const t=this;if(!t||t.destroyed)return;const{snapGrid:n,params:i}=t;i.breakpoints&&t.setBreakpoint(),[...t.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&bi(t,o)}),t.updateSize(),t.updateSlides(),t.updateProgress(),t.updateSlidesClasses();function r(){const o=t.rtlTranslate?t.translate*-1:t.translate,c=Math.min(Math.max(o,t.maxTranslate()),t.minTranslate());t.setTranslate(c),t.updateActiveIndex(),t.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&t.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&t.isEnd&&!i.centeredSlides){const o=t.virtual&&i.virtual.enabled?t.virtual.slides:t.slides;s=t.slideTo(o.length-1,0,!1,!0)}else s=t.slideTo(t.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&n!==t.snapGrid&&t.checkOverflow(),t.emit("update")}changeDirection(t,n=!0){const i=this,r=i.params.direction;return t||(t=r==="horizontal"?"vertical":"horizontal"),t===r||t!=="horizontal"&&t!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${t}`),i.emitContainerClasses(),i.params.direction=t,i.slides.forEach(s=>{t==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),n&&i.update()),i}changeLanguageDirection(t){const n=this;n.rtl&&t==="rtl"||!n.rtl&&t==="ltr"||(n.rtl=t==="rtl",n.rtlTranslate=n.params.direction==="horizontal"&&n.rtl,n.rtl?(n.el.classList.add(`${n.params.containerModifierClass}rtl`),n.el.dir="rtl"):(n.el.classList.remove(`${n.params.containerModifierClass}rtl`),n.el.dir="ltr"),n.update())}mount(t){const n=this;if(n.mounted)return!0;let i=t||n.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=n,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===n.params.swiperElementNodeName.toUpperCase()&&(n.isElement=!0);const r=()=>`.${(n.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):It(i,r())[0];return!o&&n.params.createElements&&(o=te("div",n.params.wrapperClass),i.append(o),It(i,`.${n.params.slideClass}`).forEach(c=>{o.append(c)})),Object.assign(n,{el:i,wrapperEl:o,slidesEl:n.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:n.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Ne(i,"direction")==="rtl",rtlTranslate:n.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Ne(i,"direction")==="rtl"),wrongRTL:Ne(o,"display")==="-webkit-box"}),!0}init(t){const n=this;if(n.initialized||n.mount(t)===!1)return n;n.emit("beforeInit"),n.params.breakpoints&&n.setBreakpoint(),n.addClasses(),n.updateSize(),n.updateSlides(),n.params.watchOverflow&&n.checkOverflow(),n.params.grabCursor&&n.enabled&&n.setGrabCursor(),n.params.loop&&n.virtual&&n.params.virtual.enabled?n.slideTo(n.params.initialSlide+n.virtual.slidesBefore,0,n.params.runCallbacksOnInit,!1,!0):n.slideTo(n.params.initialSlide,0,n.params.runCallbacksOnInit,!1,!0),n.params.loop&&n.loopCreate(void 0,!0),n.attachEvents();const r=[...n.el.querySelectorAll('[loading="lazy"]')];return n.isElement&&r.push(...n.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?bi(n,s):s.addEventListener("load",o=>{bi(n,o.target)})}),Wr(n),n.initialized=!0,Wr(n),n.emit("init"),n.emit("afterInit"),n}destroy(t=!0,n=!0){const i=this,{params:r,el:s,wrapperEl:o,slides:c}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),n&&(i.removeClasses(),s&&typeof s!="string"&&s.removeAttribute("style"),o&&o.removeAttribute("style"),c&&c.length&&c.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideFullyVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),t!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),$u(i)),i.destroyed=!0),null}static extendDefaults(t){Zt(Cr,t)}static get extendedDefaults(){return Cr}static get defaults(){return uo}static installModule(t){Qt.prototype.__modules__||(Qt.prototype.__modules__=[]);const n=Qt.prototype.__modules__;typeof t=="function"&&n.indexOf(t)<0&&n.push(t)}static use(t){return Array.isArray(t)?(t.forEach(n=>Qt.installModule(n)),Qt):(Qt.installModule(t),Qt)}}Object.keys(Tr).forEach(e=>{Object.keys(Tr[e]).forEach(t=>{Qt.prototype[t]=Tr[e][t]})});Qt.use([td,ed]);function oh({swiper:e,extendParams:t,on:n,emit:i}){t({virtual:{enabled:!1,slides:[],cache:!0,slidesPerViewAutoSlideSize:320,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let r;const s=kt();e.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const o=s.createElement("div");function c(d,f){const g=e.params.virtual;if(g.cache&&e.virtual.cache[f])return e.virtual.cache[f];let A;return g.renderSlide?(A=g.renderSlide.call(e,d,f),typeof A=="string"&&(ye(o,A),A=o.children[0])):e.isElement?A=te("swiper-slide"):A=te("div",e.params.slideClass),A.setAttribute("data-swiper-slide-index",f),g.renderSlide||ye(A,d),g.cache&&(e.virtual.cache[f]=A),A}function l(d,f,g){const{slidesPerGroup:A,centeredSlides:p,slidesPerView:S,loop:E,initialSlide:k}=e.params;if(f&&!E&&k>0)return;const{addSlidesBefore:L,addSlidesAfter:R,slidesPerViewAutoSlideSize:N}=e.params.virtual,{from:M,to:j,slides:D,slidesGrid:w,offset:P}=e.virtual;e.params.cssMode||e.updateActiveIndex();const O=typeof g>"u"?e.activeIndex||0:g;let H;e.rtlTranslate?H="right":H=e.isHorizontal()?"left":"top";let G;if(S==="auto")if(N){let U=e.size;U||(U=e.isHorizontal()?e.el.getBoundingClientRect().width:e.el.getBoundingClientRect().height),G=Math.max(1,Math.ceil(U/N))}else G=1;else G=S;let _,I;p?(_=Math.floor(G/2)+A+R,I=Math.floor(G/2)+A+L):(_=G+(A-1)+R,I=(E?G:A)+L);let F=O-I,X=O+_;E||(F=Math.max(F,0),X=Math.min(X,D.length-1));let K=(e.slidesGrid[F]||0)-(e.slidesGrid[0]||0);E&&O>=I?(F-=I,p||(K+=e.slidesGrid[0])):E&&O<I&&(F=-I,p&&(K+=e.slidesGrid[0])),Object.assign(e.virtual,{from:F,to:X,offset:K,slidesGrid:e.slidesGrid,slidesBefore:I,slidesAfter:_});function dt(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),i("virtualUpdate")}if(M===F&&j===X&&!d){e.slidesGrid!==w&&K!==P&&e.slides.forEach(U=>{U.style[H]=`${K-Math.abs(e.cssOverflowAdjustment())}px`}),e.updateProgress(),i("virtualUpdate");return}if(e.params.virtual.renderExternal){e.params.virtual.renderExternal.call(e,{offset:K,from:F,to:X,slides:function(){const Q=[];for(let ht=F;ht<=X;ht+=1)Q.push(D[ht]);return Q}()}),e.params.virtual.renderExternalUpdate?dt():i("virtualUpdate");return}const rt=[],Ct=[],z=U=>{let Q=U;return U<0?Q=D.length+U:Q>=D.length&&(Q=Q-D.length),Q};if(d)e.slides.filter(U=>U.matches(`.${e.params.slideClass}, swiper-slide`)).forEach(U=>{U.remove()});else for(let U=M;U<=j;U+=1)if(U<F||U>X){const Q=z(U);e.slides.filter(ht=>ht.matches(`.${e.params.slideClass}[data-swiper-slide-index="${Q}"], swiper-slide[data-swiper-slide-index="${Q}"]`)).forEach(ht=>{ht.remove()})}const $=E?-D.length:0,W=E?D.length*2:D.length;for(let U=$;U<W;U+=1)if(U>=F&&U<=X){const Q=z(U);typeof j>"u"||d?Ct.push(Q):(U>j&&Ct.push(Q),U<M&&rt.push(Q))}if(Ct.forEach(U=>{e.slidesEl.append(c(D[U],U))}),E)for(let U=rt.length-1;U>=0;U-=1){const Q=rt[U];e.slidesEl.prepend(c(D[Q],Q))}else rt.sort((U,Q)=>Q-U),rt.forEach(U=>{e.slidesEl.prepend(c(D[U],U))});It(e.slidesEl,".swiper-slide, swiper-slide").forEach(U=>{U.style[H]=`${K-Math.abs(e.cssOverflowAdjustment())}px`}),dt()}function m(d){if(typeof d=="object"&&"length"in d)for(let f=0;f<d.length;f+=1)d[f]&&e.virtual.slides.push(d[f]);else e.virtual.slides.push(d);l(!0)}function b(d){const f=e.activeIndex;let g=f+1,A=1;if(Array.isArray(d)){for(let p=0;p<d.length;p+=1)d[p]&&e.virtual.slides.unshift(d[p]);g=f+d.length,A=d.length}else e.virtual.slides.unshift(d);if(e.params.virtual.cache){const p=e.virtual.cache,S={};Object.keys(p).forEach(E=>{const k=p[E],L=k.getAttribute("data-swiper-slide-index");L&&k.setAttribute("data-swiper-slide-index",parseInt(L,10)+A),S[parseInt(E,10)+A]=k}),e.virtual.cache=S}l(!0),e.slideTo(g,0)}function v(d){if(typeof d>"u"||d===null)return;let f=e.activeIndex;if(Array.isArray(d))for(let g=d.length-1;g>=0;g-=1)e.params.virtual.cache&&(delete e.virtual.cache[d[g]],Object.keys(e.virtual.cache).forEach(A=>{A>d&&(e.virtual.cache[A-1]=e.virtual.cache[A],e.virtual.cache[A-1].setAttribute("data-swiper-slide-index",A-1),delete e.virtual.cache[A])})),e.virtual.slides.splice(d[g],1),d[g]<f&&(f-=1),f=Math.max(f,0);else e.params.virtual.cache&&(delete e.virtual.cache[d],Object.keys(e.virtual.cache).forEach(g=>{g>d&&(e.virtual.cache[g-1]=e.virtual.cache[g],e.virtual.cache[g-1].setAttribute("data-swiper-slide-index",g-1),delete e.virtual.cache[g])})),e.virtual.slides.splice(d,1),d<f&&(f-=1),f=Math.max(f,0);l(!0),e.slideTo(f,0)}function y(){e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),l(!0),e.slideTo(0,0)}n("beforeInit",()=>{if(!e.params.virtual.enabled)return;let d;if(typeof e.passedParams.virtual.slides>"u"){const f=[...e.slidesEl.children].filter(g=>g.matches(`.${e.params.slideClass}, swiper-slide`));f&&f.length&&(e.virtual.slides=[...f],d=!0,f.forEach((g,A)=>{g.setAttribute("data-swiper-slide-index",A),e.virtual.cache[A]=g,g.remove()}))}d||(e.virtual.slides=e.params.virtual.slides),e.classNames.push(`${e.params.containerModifierClass}virtual`),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0,l(!1,!0)}),n("setTranslate",()=>{e.params.virtual.enabled&&(e.params.cssMode&&!e._immediateVirtual?(clearTimeout(r),r=setTimeout(()=>{l()},100)):l())}),n("init update resize",()=>{e.params.virtual.enabled&&e.params.cssMode&&In(e.wrapperEl,"--swiper-virtual-size",`${e.virtualSize}px`)}),Object.assign(e.virtual,{appendSlide:m,prependSlide:b,removeSlide:v,removeAllSlides:y,update:l})}function ah({swiper:e,extendParams:t,on:n,emit:i}){const r=kt(),s=vt();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function o(m){if(!e.enabled)return;const{rtlTranslate:b}=e;let v=m;v.originalEvent&&(v=v.originalEvent);const y=v.keyCode||v.charCode,d=e.params.keyboard.pageUpDown,f=d&&y===33,g=d&&y===34,A=y===37,p=y===39,S=y===38,E=y===40;if(!e.allowSlideNext&&(e.isHorizontal()&&p||e.isVertical()&&E||g)||!e.allowSlidePrev&&(e.isHorizontal()&&A||e.isVertical()&&S||f))return!1;if(!(v.shiftKey||v.altKey||v.ctrlKey||v.metaKey)&&!(r.activeElement&&(r.activeElement.isContentEditable||r.activeElement.nodeName&&(r.activeElement.nodeName.toLowerCase()==="input"||r.activeElement.nodeName.toLowerCase()==="textarea")))){if(e.params.keyboard.onlyInViewport&&(f||g||A||p||S||E)){let k=!1;if(Xe(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&Xe(e.el,`.${e.params.slideActiveClass}`).length===0)return;const L=e.el,R=L.clientWidth,N=L.clientHeight,M=s.innerWidth,j=s.innerHeight,D=Mi(L);b&&(D.left-=L.scrollLeft);const w=[[D.left,D.top],[D.left+R,D.top],[D.left,D.top+N],[D.left+R,D.top+N]];for(let P=0;P<w.length;P+=1){const O=w[P];if(O[0]>=0&&O[0]<=M&&O[1]>=0&&O[1]<=j){if(O[0]===0&&O[1]===0)continue;k=!0}}if(!k)return}e.isHorizontal()?((f||g||A||p)&&(v.preventDefault?v.preventDefault():v.returnValue=!1),((g||p)&&!b||(f||A)&&b)&&e.slideNext(),((f||A)&&!b||(g||p)&&b)&&e.slidePrev()):((f||g||S||E)&&(v.preventDefault?v.preventDefault():v.returnValue=!1),(g||E)&&e.slideNext(),(f||S)&&e.slidePrev()),i("keyPress",y)}}function c(){e.keyboard.enabled||(r.addEventListener("keydown",o),e.keyboard.enabled=!0)}function l(){e.keyboard.enabled&&(r.removeEventListener("keydown",o),e.keyboard.enabled=!1)}n("init",()=>{e.params.keyboard.enabled&&c()}),n("destroy",()=>{e.keyboard.enabled&&l()}),Object.assign(e.keyboard,{enable:c,disable:l})}function lh({swiper:e,extendParams:t,on:n,emit:i}){const r=vt();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let s,o=oe(),c;const l=[];function m(S){let R=0,N=0,M=0,j=0;return"detail"in S&&(N=S.detail),"wheelDelta"in S&&(N=-S.wheelDelta/120),"wheelDeltaY"in S&&(N=-S.wheelDeltaY/120),"wheelDeltaX"in S&&(R=-S.wheelDeltaX/120),"axis"in S&&S.axis===S.HORIZONTAL_AXIS&&(R=N,N=0),M=R*10,j=N*10,"deltaY"in S&&(j=S.deltaY),"deltaX"in S&&(M=S.deltaX),S.shiftKey&&!M&&(M=j,j=0),(M||j)&&S.deltaMode&&(S.deltaMode===1?(M*=40,j*=40):(M*=800,j*=800)),M&&!R&&(R=M<1?-1:1),j&&!N&&(N=j<1?-1:1),{spinX:R,spinY:N,pixelX:M,pixelY:j}}function b(){e.enabled&&(e.mouseEntered=!0)}function v(){e.enabled&&(e.mouseEntered=!1)}function y(S){return e.params.mousewheel.thresholdDelta&&S.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&oe()-o<e.params.mousewheel.thresholdTime?!1:S.delta>=6&&oe()-o<60?!0:(S.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),i("scroll",S.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),i("scroll",S.raw)),o=new r.Date().getTime(),!1)}function d(S){const E=e.params.mousewheel;if(S.direction<0){if(e.isEnd&&!e.params.loop&&E.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&E.releaseOnEdges)return!0;return!1}function f(S){let E=S,k=!0;if(!e.enabled||S.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const L=e.params.mousewheel;e.params.cssMode&&E.preventDefault();let R=e.el;e.params.mousewheel.eventsTarget!=="container"&&(R=document.querySelector(e.params.mousewheel.eventsTarget));const N=R&&R.contains(E.target);if(!e.mouseEntered&&!N&&!L.releaseOnEdges)return!0;E.originalEvent&&(E=E.originalEvent);let M=0;const j=e.rtlTranslate?-1:1,D=m(E);if(L.forceToAxis)if(e.isHorizontal())if(Math.abs(D.pixelX)>Math.abs(D.pixelY))M=-D.pixelX*j;else return!0;else if(Math.abs(D.pixelY)>Math.abs(D.pixelX))M=-D.pixelY;else return!0;else M=Math.abs(D.pixelX)>Math.abs(D.pixelY)?-D.pixelX*j:-D.pixelY;if(M===0)return!0;L.invert&&(M=-M);let w=e.getTranslate()+M*L.sensitivity;if(w>=e.minTranslate()&&(w=e.minTranslate()),w<=e.maxTranslate()&&(w=e.maxTranslate()),k=e.params.loop?!0:!(w===e.minTranslate()||w===e.maxTranslate()),k&&e.params.nested&&E.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const P={time:oe(),delta:Math.abs(M),direction:Math.sign(M),raw:S};l.length>=2&&l.shift();const O=l.length?l[l.length-1]:void 0;if(l.push(P),O?(P.direction!==O.direction||P.delta>O.delta||P.time>O.time+150)&&y(P):y(P),d(P))return!0}else{const P={time:oe(),delta:Math.abs(M),direction:Math.sign(M)},O=c&&P.time<c.time+500&&P.delta<=c.delta&&P.direction===c.direction;if(!O){c=void 0;let H=e.getTranslate()+M*L.sensitivity;const G=e.isBeginning,_=e.isEnd;if(H>=e.minTranslate()&&(H=e.minTranslate()),H<=e.maxTranslate()&&(H=e.maxTranslate()),e.setTransition(0),e.setTranslate(H),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!G&&e.isBeginning||!_&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:P.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(s),s=void 0,l.length>=15&&l.shift();const I=l.length?l[l.length-1]:void 0,F=l[0];if(l.push(P),I&&(P.delta>I.delta||P.direction!==I.direction))l.splice(0);else if(l.length>=15&&P.time-F.time<500&&F.delta-P.delta>=1&&P.delta<=6){const X=M>0?.8:.2;c=P,l.splice(0),s=cn(()=>{e.destroyed||!e.params||e.slideToClosest(e.params.speed,!0,void 0,X)},0)}s||(s=cn(()=>{if(e.destroyed||!e.params)return;const X=.5;c=P,l.splice(0),e.slideToClosest(e.params.speed,!0,void 0,X)},500))}if(O||i("scroll",E),e.params.autoplay&&e.params.autoplay.disableOnInteraction&&e.autoplay.stop(),L.releaseOnEdges&&(H===e.minTranslate()||H===e.maxTranslate()))return!0}}return E.preventDefault?E.preventDefault():E.returnValue=!1,!1}function g(S){let E=e.el;e.params.mousewheel.eventsTarget!=="container"&&(E=document.querySelector(e.params.mousewheel.eventsTarget)),E[S]("mouseenter",b),E[S]("mouseleave",v),E[S]("wheel",f)}function A(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",f),!0):e.mousewheel.enabled?!1:(g("addEventListener"),e.mousewheel.enabled=!0,!0)}function p(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,f),!0):e.mousewheel.enabled?(g("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}n("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&p(),e.params.mousewheel.enabled&&A()}),n("destroy",()=>{e.params.cssMode&&A(),e.mousewheel.enabled&&p()}),Object.assign(e.mousewheel,{enable:A,disable:p})}function ss(e,t,n,i){return e.params.createElements&&Object.keys(i).forEach(r=>{if(!n[r]&&n.auto===!0){let s=It(e.el,`.${i[r]}`)[0];s||(s=te("div",i[r]),s.className=i[r],e.el.append(s)),n[r]=s,t[r]=s}}),n}const ch='<svg class="swiper-navigation-icon" width="11" height="20" viewBox="0 0 11 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.38296 20.0762C0.111788 19.805 0.111788 19.3654 0.38296 19.0942L9.19758 10.2796L0.38296 1.46497C0.111788 1.19379 0.111788 0.754138 0.38296 0.482966C0.654131 0.211794 1.09379 0.211794 1.36496 0.482966L10.4341 9.55214C10.8359 9.9539 10.8359 10.6053 10.4341 11.007L1.36496 20.0762C1.09379 20.3474 0.654131 20.3474 0.38296 20.0762Z" fill="currentColor"/></svg>';function uh({swiper:e,extendParams:t,on:n,emit:i}){t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function r(d){let f;return d&&typeof d=="string"&&e.isElement&&(f=e.el.querySelector(d)||e.hostEl.querySelector(d),f)?f:(d&&(typeof d=="string"&&(f=[...document.querySelectorAll(d)]),e.params.uniqueNavElements&&typeof d=="string"&&f&&f.length>1&&e.el.querySelectorAll(d).length===1?f=e.el.querySelector(d):f&&f.length===1&&(f=f[0])),d&&!f?d:f)}function s(d,f){const g=e.params.navigation;d=at(d),d.forEach(A=>{A&&(A.classList[f?"add":"remove"](...g.disabledClass.split(" ")),A.tagName==="BUTTON"&&(A.disabled=f),e.params.watchOverflow&&e.enabled&&A.classList[e.isLocked?"add":"remove"](g.lockClass))})}function o(){const{nextEl:d,prevEl:f}=e.navigation;if(e.params.loop){s(f,!1),s(d,!1);return}s(f,e.isBeginning&&!e.params.rewind),s(d,e.isEnd&&!e.params.rewind)}function c(d){d.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function l(d){d.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function m(){const d=e.params.navigation;if(e.params.navigation=ss(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(d.nextEl||d.prevEl))return;let f=r(d.nextEl),g=r(d.prevEl);Object.assign(e.navigation,{nextEl:f,prevEl:g}),f=at(f),g=at(g);const A=(p,S)=>{p&&(p.matches(".swiper-button-next,.swiper-button-prev")&&!p.querySelector("svg")&&ye(p,ch),p.addEventListener("click",S==="next"?l:c)),!e.enabled&&p&&p.classList.add(...d.lockClass.split(" "))};f.forEach(p=>A(p,"next")),g.forEach(p=>A(p,"prev"))}function b(){let{nextEl:d,prevEl:f}=e.navigation;d=at(d),f=at(f);const g=(A,p)=>{A.removeEventListener("click",p==="next"?l:c),A.classList.remove(...e.params.navigation.disabledClass.split(" "))};d.forEach(A=>g(A,"next")),f.forEach(A=>g(A,"prev"))}n("init",()=>{e.params.navigation.enabled===!1?y():(m(),o())}),n("toEdge fromEdge lock unlock",()=>{o()}),n("destroy",()=>{b()}),n("enable disable",()=>{let{nextEl:d,prevEl:f}=e.navigation;if(d=at(d),f=at(f),e.enabled){o();return}[...d,...f].filter(g=>!!g).forEach(g=>g.classList.add(e.params.navigation.lockClass))}),n("click",(d,f)=>{let{nextEl:g,prevEl:A}=e.navigation;g=at(g),A=at(A);const p=f.target;let S=A.includes(p)||g.includes(p);if(e.isElement&&!S){const E=f.path||f.composedPath&&f.composedPath();E&&(S=E.find(k=>g.includes(k)||A.includes(k)))}if(e.params.navigation.hideOnClick&&!S){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===p||e.pagination.el.contains(p)))return;let E;g.length?E=g[0].classList.contains(e.params.navigation.hiddenClass):A.length&&(E=A[0].classList.contains(e.params.navigation.hiddenClass)),i(E===!0?"navigationShow":"navigationHide"),[...g,...A].filter(k=>!!k).forEach(k=>k.classList.toggle(e.params.navigation.hiddenClass))}});const v=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),m(),o()},y=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),b()};Object.assign(e.navigation,{enable:v,disable:y,update:o,init:m,destroy:b})}function Te(e=""){return`.${e.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function dh({swiper:e,extendParams:t,on:n,emit:i}){const r="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:p=>p,formatFractionTotal:p=>p,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let s,o=0;function c(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function l(p,S){const{bulletActiveClass:E}=e.params.pagination;p&&(p=p[`${S==="prev"?"previous":"next"}ElementSibling`],p&&(p.classList.add(`${E}-${S}`),p=p[`${S==="prev"?"previous":"next"}ElementSibling`],p&&p.classList.add(`${E}-${S}-${S}`)))}function m(p,S,E){if(p=p%E,S=S%E,S===p+1)return"next";if(S===p-1)return"previous"}function b(p){const S=p.target.closest(Te(e.params.pagination.bulletClass));if(!S)return;p.preventDefault();const E=Un(S)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===E)return;const k=m(e.realIndex,E,e.slides.length);k==="next"?e.slideNext():k==="previous"?e.slidePrev():e.slideToLoop(E)}else e.slideTo(E)}function v(){const p=e.rtl,S=e.params.pagination;if(c())return;let E=e.pagination.el;E=at(E);let k,L;const R=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,N=e.params.loop?Math.ceil(R/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(L=e.previousRealIndex||0,k=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(k=e.snapIndex,L=e.previousSnapIndex):(L=e.previousIndex||0,k=e.activeIndex||0),S.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const M=e.pagination.bullets;let j,D,w;if(S.dynamicBullets&&(s=Hr(M[0],e.isHorizontal()?"width":"height"),E.forEach(P=>{P.style[e.isHorizontal()?"width":"height"]=`${s*(S.dynamicMainBullets+4)}px`}),S.dynamicMainBullets>1&&L!==void 0&&(o+=k-(L||0),o>S.dynamicMainBullets-1?o=S.dynamicMainBullets-1:o<0&&(o=0)),j=Math.max(k-o,0),D=j+(Math.min(M.length,S.dynamicMainBullets)-1),w=(D+j)/2),M.forEach(P=>{const O=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(H=>`${S.bulletActiveClass}${H}`)].map(H=>typeof H=="string"&&H.includes(" ")?H.split(" "):H).flat();P.classList.remove(...O)}),E.length>1)M.forEach(P=>{const O=Un(P);O===k?P.classList.add(...S.bulletActiveClass.split(" ")):e.isElement&&P.setAttribute("part","bullet"),S.dynamicBullets&&(O>=j&&O<=D&&P.classList.add(...`${S.bulletActiveClass}-main`.split(" ")),O===j&&l(P,"prev"),O===D&&l(P,"next"))});else{const P=M[k];if(P&&P.classList.add(...S.bulletActiveClass.split(" ")),e.isElement&&M.forEach((O,H)=>{O.setAttribute("part",H===k?"bullet-active":"bullet")}),S.dynamicBullets){const O=M[j],H=M[D];for(let G=j;G<=D;G+=1)M[G]&&M[G].classList.add(...`${S.bulletActiveClass}-main`.split(" "));l(O,"prev"),l(H,"next")}}if(S.dynamicBullets){const P=Math.min(M.length,S.dynamicMainBullets+4),O=(s*P-s)/2-w*s,H=p?"right":"left";M.forEach(G=>{G.style[e.isHorizontal()?H:"top"]=`${O}px`})}}E.forEach((M,j)=>{if(S.type==="fraction"&&(M.querySelectorAll(Te(S.currentClass)).forEach(D=>{D.textContent=S.formatFractionCurrent(k+1)}),M.querySelectorAll(Te(S.totalClass)).forEach(D=>{D.textContent=S.formatFractionTotal(N)})),S.type==="progressbar"){let D;S.progressbarOpposite?D=e.isHorizontal()?"vertical":"horizontal":D=e.isHorizontal()?"horizontal":"vertical";const w=(k+1)/N;let P=1,O=1;D==="horizontal"?P=w:O=w,M.querySelectorAll(Te(S.progressbarFillClass)).forEach(H=>{H.style.transform=`translate3d(0,0,0) scaleX(${P}) scaleY(${O})`,H.style.transitionDuration=`${e.params.speed}ms`})}S.type==="custom"&&S.renderCustom?(ye(M,S.renderCustom(e,k+1,N)),j===0&&i("paginationRender",M)):(j===0&&i("paginationRender",M),i("paginationUpdate",M)),e.params.watchOverflow&&e.enabled&&M.classList[e.isLocked?"add":"remove"](S.lockClass)})}function y(){const p=e.params.pagination;if(c())return;const S=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let E=e.pagination.el;E=at(E);let k="";if(p.type==="bullets"){let L=e.params.loop?Math.ceil(S/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&L>S&&(L=S);for(let R=0;R<L;R+=1)p.renderBullet?k+=p.renderBullet.call(e,R,p.bulletClass):k+=`<${p.bulletElement} ${e.isElement?'part="bullet"':""} class="${p.bulletClass}"></${p.bulletElement}>`}p.type==="fraction"&&(p.renderFraction?k=p.renderFraction.call(e,p.currentClass,p.totalClass):k=`<span class="${p.currentClass}"></span> / <span class="${p.totalClass}"></span>`),p.type==="progressbar"&&(p.renderProgressbar?k=p.renderProgressbar.call(e,p.progressbarFillClass):k=`<span class="${p.progressbarFillClass}"></span>`),e.pagination.bullets=[],E.forEach(L=>{p.type!=="custom"&&ye(L,k||""),p.type==="bullets"&&e.pagination.bullets.push(...L.querySelectorAll(Te(p.bulletClass)))}),p.type!=="custom"&&i("paginationRender",E[0])}function d(){e.params.pagination=ss(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const p=e.params.pagination;if(!p.el)return;let S;typeof p.el=="string"&&e.isElement&&(S=e.el.querySelector(p.el)),!S&&typeof p.el=="string"&&(S=[...document.querySelectorAll(p.el)]),S||(S=p.el),!(!S||S.length===0)&&(e.params.uniqueNavElements&&typeof p.el=="string"&&Array.isArray(S)&&S.length>1&&(S=[...e.el.querySelectorAll(p.el)],S.length>1&&(S=S.find(E=>Xe(E,".swiper")[0]===e.el))),Array.isArray(S)&&S.length===1&&(S=S[0]),Object.assign(e.pagination,{el:S}),S=at(S),S.forEach(E=>{p.type==="bullets"&&p.clickable&&E.classList.add(...(p.clickableClass||"").split(" ")),E.classList.add(p.modifierClass+p.type),E.classList.add(e.isHorizontal()?p.horizontalClass:p.verticalClass),p.type==="bullets"&&p.dynamicBullets&&(E.classList.add(`${p.modifierClass}${p.type}-dynamic`),o=0,p.dynamicMainBullets<1&&(p.dynamicMainBullets=1)),p.type==="progressbar"&&p.progressbarOpposite&&E.classList.add(p.progressbarOppositeClass),p.clickable&&E.addEventListener("click",b),e.enabled||E.classList.add(p.lockClass)}))}function f(){const p=e.params.pagination;if(c())return;let S=e.pagination.el;S&&(S=at(S),S.forEach(E=>{E.classList.remove(p.hiddenClass),E.classList.remove(p.modifierClass+p.type),E.classList.remove(e.isHorizontal()?p.horizontalClass:p.verticalClass),p.clickable&&(E.classList.remove(...(p.clickableClass||"").split(" ")),E.removeEventListener("click",b))})),e.pagination.bullets&&e.pagination.bullets.forEach(E=>E.classList.remove(...p.bulletActiveClass.split(" ")))}n("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const p=e.params.pagination;let{el:S}=e.pagination;S=at(S),S.forEach(E=>{E.classList.remove(p.horizontalClass,p.verticalClass),E.classList.add(e.isHorizontal()?p.horizontalClass:p.verticalClass)})}),n("init",()=>{e.params.pagination.enabled===!1?A():(d(),y(),v())}),n("activeIndexChange",()=>{typeof e.snapIndex>"u"&&v()}),n("snapIndexChange",()=>{v()}),n("snapGridLengthChange",()=>{y(),v()}),n("destroy",()=>{f()}),n("enable disable",()=>{let{el:p}=e.pagination;p&&(p=at(p),p.forEach(S=>S.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),n("lock unlock",()=>{v()}),n("click",(p,S)=>{const E=S.target,k=at(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&k&&k.length>0&&!E.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&E===e.navigation.nextEl||e.navigation.prevEl&&E===e.navigation.prevEl))return;const L=k[0].classList.contains(e.params.pagination.hiddenClass);i(L===!0?"paginationShow":"paginationHide"),k.forEach(R=>R.classList.toggle(e.params.pagination.hiddenClass))}});const g=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:p}=e.pagination;p&&(p=at(p),p.forEach(S=>S.classList.remove(e.params.pagination.paginationDisabledClass))),d(),y(),v()},A=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:p}=e.pagination;p&&(p=at(p),p.forEach(S=>S.classList.add(e.params.pagination.paginationDisabledClass))),f()};Object.assign(e.pagination,{enable:g,disable:A,render:y,update:v,init:d,destroy:f})}function hh({swiper:e,extendParams:t,on:n,emit:i}){const r=kt();let s=!1,o=null,c=null,l,m,b,v;t({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),e.scrollbar={el:null,dragEl:null};function y(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:w,rtlTranslate:P}=e,{dragEl:O,el:H}=w,G=e.params.scrollbar,_=e.params.loop?e.progressLoop:e.progress;let I=m,F=(b-m)*_;P?(F=-F,F>0?(I=m-F,F=0):-F+m>b&&(I=b+F)):F<0?(I=m+F,F=0):F+m>b&&(I=b-F),e.isHorizontal()?(O.style.transform=`translate3d(${F}px, 0, 0)`,O.style.width=`${I}px`):(O.style.transform=`translate3d(0px, ${F}px, 0)`,O.style.height=`${I}px`),G.hide&&(clearTimeout(o),H.style.opacity=1,o=setTimeout(()=>{H.style.opacity=0,H.style.transitionDuration="400ms"},1e3))}function d(w){!e.params.scrollbar.el||!e.scrollbar.el||(e.scrollbar.dragEl.style.transitionDuration=`${w}ms`)}function f(){if(!e.params.scrollbar.el||!e.scrollbar.el)return;const{scrollbar:w}=e,{dragEl:P,el:O}=w;P.style.width="",P.style.height="",b=e.isHorizontal()?O.offsetWidth:O.offsetHeight,v=e.size/(e.virtualSize+e.params.slidesOffsetBefore-(e.params.centeredSlides?e.snapGrid[0]:0)),e.params.scrollbar.dragSize==="auto"?m=b*v:m=parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?P.style.width=`${m}px`:P.style.height=`${m}px`,v>=1?O.style.display="none":O.style.display="",e.params.scrollbar.hide&&(O.style.opacity=0),e.params.watchOverflow&&e.enabled&&w.el.classList[e.isLocked?"add":"remove"](e.params.scrollbar.lockClass)}function g(w){return e.isHorizontal()?w.clientX:w.clientY}function A(w){const{scrollbar:P,rtlTranslate:O}=e,{el:H}=P;let G;G=(g(w)-Mi(H)[e.isHorizontal()?"left":"top"]-(l!==null?l:m/2))/(b-m),G=Math.max(Math.min(G,1),0),O&&(G=1-G);const _=e.minTranslate()+(e.maxTranslate()-e.minTranslate())*G;e.updateProgress(_),e.setTranslate(_),e.updateActiveIndex(),e.updateSlidesClasses()}function p(w){const P=e.params.scrollbar,{scrollbar:O,wrapperEl:H}=e,{el:G,dragEl:_}=O;s=!0,l=w.target===_?g(w)-w.target.getBoundingClientRect()[e.isHorizontal()?"left":"top"]:null,w.preventDefault(),w.stopPropagation(),H.style.transitionDuration="100ms",_.style.transitionDuration="100ms",A(w),clearTimeout(c),G.style.transitionDuration="0ms",P.hide&&(G.style.opacity=1),e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="none"),i("scrollbarDragStart",w)}function S(w){const{scrollbar:P,wrapperEl:O}=e,{el:H,dragEl:G}=P;s&&(w.preventDefault&&w.cancelable?w.preventDefault():w.returnValue=!1,A(w),O.style.transitionDuration="0ms",H.style.transitionDuration="0ms",G.style.transitionDuration="0ms",i("scrollbarDragMove",w))}function E(w){const P=e.params.scrollbar,{scrollbar:O,wrapperEl:H}=e,{el:G}=O;s&&(s=!1,e.params.cssMode&&(e.wrapperEl.style["scroll-snap-type"]="",H.style.transitionDuration=""),P.hide&&(clearTimeout(c),c=cn(()=>{G.style.opacity=0,G.style.transitionDuration="400ms"},1e3)),i("scrollbarDragEnd",w),P.snapOnRelease&&e.slideToClosest())}function k(w){const{scrollbar:P,params:O}=e,H=P.el;if(!H)return;const G=H,_=O.passiveListeners?{passive:!1,capture:!1}:!1,I=O.passiveListeners?{passive:!0,capture:!1}:!1;if(!G)return;const F=w==="on"?"addEventListener":"removeEventListener";G[F]("pointerdown",p,_),r[F]("pointermove",S,_),r[F]("pointerup",E,I)}function L(){!e.params.scrollbar.el||!e.scrollbar.el||k("on")}function R(){!e.params.scrollbar.el||!e.scrollbar.el||k("off")}function N(){const{scrollbar:w,el:P}=e;e.params.scrollbar=ss(e,e.originalParams.scrollbar,e.params.scrollbar,{el:"swiper-scrollbar"});const O=e.params.scrollbar;if(!O.el)return;let H;if(typeof O.el=="string"&&e.isElement&&(H=e.el.querySelector(O.el)),!H&&typeof O.el=="string"){if(H=r.querySelectorAll(O.el),!H.length)return}else H||(H=O.el);e.params.uniqueNavElements&&typeof O.el=="string"&&H.length>1&&P.querySelectorAll(O.el).length===1&&(H=P.querySelector(O.el)),H.length>0&&(H=H[0]),H.classList.add(e.isHorizontal()?O.horizontalClass:O.verticalClass);let G;H&&(G=H.querySelector(Te(e.params.scrollbar.dragClass)),G||(G=te("div",e.params.scrollbar.dragClass),H.append(G))),Object.assign(w,{el:H,dragEl:G}),O.draggable&&L(),H&&H.classList[e.enabled?"remove":"add"](...Ie(e.params.scrollbar.lockClass))}function M(){const w=e.params.scrollbar,P=e.scrollbar.el;P&&P.classList.remove(...Ie(e.isHorizontal()?w.horizontalClass:w.verticalClass)),R()}n("changeDirection",()=>{if(!e.scrollbar||!e.scrollbar.el)return;const w=e.params.scrollbar;let{el:P}=e.scrollbar;P=at(P),P.forEach(O=>{O.classList.remove(w.horizontalClass,w.verticalClass),O.classList.add(e.isHorizontal()?w.horizontalClass:w.verticalClass)})}),n("init",()=>{e.params.scrollbar.enabled===!1?D():(N(),f(),y())}),n("update resize observerUpdate lock unlock changeDirection",()=>{f()}),n("setTranslate",()=>{y()}),n("setTransition",(w,P)=>{d(P)}),n("enable disable",()=>{const{el:w}=e.scrollbar;w&&w.classList[e.enabled?"remove":"add"](...Ie(e.params.scrollbar.lockClass))}),n("destroy",()=>{M()});const j=()=>{e.el.classList.remove(...Ie(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.remove(...Ie(e.params.scrollbar.scrollbarDisabledClass)),N(),f(),y()},D=()=>{e.el.classList.add(...Ie(e.params.scrollbar.scrollbarDisabledClass)),e.scrollbar.el&&e.scrollbar.el.classList.add(...Ie(e.params.scrollbar.scrollbarDisabledClass)),M()};Object.assign(e.scrollbar,{enable:j,disable:D,updateSize:f,setTranslate:y,init:N,destroy:M})}function fh({swiper:e,extendParams:t,on:n}){t({parallax:{enabled:!1}});const i="[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]",r=(c,l)=>{const{rtl:m}=e,b=m?-1:1,v=c.getAttribute("data-swiper-parallax")||"0";let y=c.getAttribute("data-swiper-parallax-x"),d=c.getAttribute("data-swiper-parallax-y");const f=c.getAttribute("data-swiper-parallax-scale"),g=c.getAttribute("data-swiper-parallax-opacity"),A=c.getAttribute("data-swiper-parallax-rotate");if(y||d?(y=y||"0",d=d||"0"):e.isHorizontal()?(y=v,d="0"):(d=v,y="0"),y.indexOf("%")>=0?y=`${parseInt(y,10)*l*b}%`:y=`${y*l*b}px`,d.indexOf("%")>=0?d=`${parseInt(d,10)*l}%`:d=`${d*l}px`,typeof g<"u"&&g!==null){const S=g-(g-1)*(1-Math.abs(l));c.style.opacity=S}let p=`translate3d(${y}, ${d}, 0px)`;if(typeof f<"u"&&f!==null){const S=f-(f-1)*(1-Math.abs(l));p+=` scale(${S})`}if(A&&typeof A<"u"&&A!==null){const S=A*l*-1;p+=` rotate(${S}deg)`}c.style.transform=p},s=()=>{const{el:c,slides:l,progress:m,snapGrid:b,isElement:v}=e,y=It(c,i);e.isElement&&y.push(...It(e.hostEl,i)),y.forEach(d=>{r(d,m)}),l.forEach((d,f)=>{let g=d.progress;e.params.slidesPerGroup>1&&e.params.slidesPerView!=="auto"&&(g+=Math.ceil(f/2)-m*(b.length-1)),g=Math.min(Math.max(g,-1),1),d.querySelectorAll(`${i}, [data-swiper-parallax-rotate]`).forEach(A=>{r(A,g)})})},o=(c=e.params.speed)=>{const{el:l,hostEl:m}=e,b=[...l.querySelectorAll(i)];e.isElement&&b.push(...m.querySelectorAll(i)),b.forEach(v=>{let y=parseInt(v.getAttribute("data-swiper-parallax-duration"),10)||c;c===0&&(y=0),v.style.transitionDuration=`${y}ms`})};n("beforeInit",()=>{e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)}),n("init",()=>{e.params.parallax.enabled&&s()}),n("setTranslate",()=>{e.params.parallax.enabled&&s()}),n("setTransition",(c,l)=>{e.params.parallax.enabled&&o(l)})}function mh({swiper:e,extendParams:t,on:n,emit:i}){const r=vt();t({zoom:{enabled:!1,limitToOriginalSize:!1,maxRatio:3,minRatio:1,panOnMouseMove:!1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}}),e.zoom={enabled:!1};let s=1,o=!1,c=!1,l={x:0,y:0};const m=-3;let b,v;const y=[],d={originX:0,originY:0,slideEl:void 0,slideWidth:void 0,slideHeight:void 0,imageEl:void 0,imageWrapEl:void 0,maxRatio:3},f={isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},g={x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0};let A=1;Object.defineProperty(e.zoom,"scale",{get(){return A},set(z){if(A!==z){const $=d.imageEl,W=d.slideEl;i("zoomChange",z,$,W)}A=z}});function p(){if(y.length<2)return 1;const z=y[0].pageX,$=y[0].pageY,W=y[1].pageX,U=y[1].pageY;return Math.sqrt((W-z)**2+(U-$)**2)}function S(){const z=e.params.zoom,$=d.imageWrapEl.getAttribute("data-swiper-zoom")||z.maxRatio;if(z.limitToOriginalSize&&d.imageEl&&d.imageEl.naturalWidth){const W=d.imageEl.naturalWidth/d.imageEl.offsetWidth;return Math.min(W,$)}return $}function E(){if(y.length<2)return{x:null,y:null};const z=d.imageEl.getBoundingClientRect();return[(y[0].pageX+(y[1].pageX-y[0].pageX)/2-z.x-r.scrollX)/s,(y[0].pageY+(y[1].pageY-y[0].pageY)/2-z.y-r.scrollY)/s]}function k(){return e.isElement?"swiper-slide":`.${e.params.slideClass}`}function L(z){const $=k();return!!(z.target.matches($)||e.slides.filter(W=>W.contains(z.target)).length>0)}function R(z){const $=`.${e.params.zoom.containerClass}`;return!!(z.target.matches($)||[...e.hostEl.querySelectorAll($)].filter(W=>W.contains(z.target)).length>0)}function N(z){if(z.pointerType==="mouse"&&y.splice(0,y.length),!L(z))return;const $=e.params.zoom;if(b=!1,v=!1,y.push(z),!(y.length<2)){if(b=!0,d.scaleStart=p(),!d.slideEl){d.slideEl=z.target.closest(`.${e.params.slideClass}, swiper-slide`),d.slideEl||(d.slideEl=e.slides[e.activeIndex]);let W=d.slideEl.querySelector(`.${$.containerClass}`);if(W&&(W=W.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=W,W?d.imageWrapEl=Xe(d.imageEl,`.${$.containerClass}`)[0]:d.imageWrapEl=void 0,!d.imageWrapEl){d.imageEl=void 0;return}d.maxRatio=S()}if(d.imageEl){const[W,U]=E();d.originX=W,d.originY=U,d.imageEl.style.transitionDuration="0ms"}o=!0}}function M(z){if(!L(z))return;const $=e.params.zoom,W=e.zoom,U=y.findIndex(Q=>Q.pointerId===z.pointerId);U>=0&&(y[U]=z),!(y.length<2)&&(v=!0,d.scaleMove=p(),d.imageEl&&(W.scale=d.scaleMove/d.scaleStart*s,W.scale>d.maxRatio&&(W.scale=d.maxRatio-1+(W.scale-d.maxRatio+1)**.5),W.scale<$.minRatio&&(W.scale=$.minRatio+1-($.minRatio-W.scale+1)**.5),d.imageEl.style.transform=`translate3d(0,0,0) scale(${W.scale})`))}function j(z){if(!L(z)||z.pointerType==="mouse"&&z.type==="pointerout")return;const $=e.params.zoom,W=e.zoom,U=y.findIndex(Q=>Q.pointerId===z.pointerId);U>=0&&y.splice(U,1),!(!b||!v)&&(b=!1,v=!1,d.imageEl&&(W.scale=Math.max(Math.min(W.scale,d.maxRatio),$.minRatio),d.imageEl.style.transitionDuration=`${e.params.speed}ms`,d.imageEl.style.transform=`translate3d(0,0,0) scale(${W.scale})`,s=W.scale,o=!1,W.scale>1&&d.slideEl?d.slideEl.classList.add(`${$.zoomedSlideClass}`):W.scale<=1&&d.slideEl&&d.slideEl.classList.remove(`${$.zoomedSlideClass}`),W.scale===1&&(d.originX=0,d.originY=0,d.slideEl=void 0)))}let D;function w(){e.touchEventsData.preventTouchMoveFromPointerMove=!1}function P(){clearTimeout(D),e.touchEventsData.preventTouchMoveFromPointerMove=!0,D=setTimeout(()=>{e.destroyed||w()})}function O(z){const $=e.device;if(!d.imageEl||f.isTouched)return;$.android&&z.cancelable&&z.preventDefault(),f.isTouched=!0;const W=y.length>0?y[0]:z;f.touchesStart.x=W.pageX,f.touchesStart.y=W.pageY}function H(z){const W=z.pointerType==="mouse"&&e.params.zoom.panOnMouseMove;if(!L(z)||!R(z))return;const U=e.zoom;if(!d.imageEl)return;if(!f.isTouched||!d.slideEl){W&&I(z);return}if(W){I(z);return}f.isMoved||(f.width=d.imageEl.offsetWidth||d.imageEl.clientWidth,f.height=d.imageEl.offsetHeight||d.imageEl.clientHeight,f.startX=jr(d.imageWrapEl,"x")||0,f.startY=jr(d.imageWrapEl,"y")||0,d.slideWidth=d.slideEl.offsetWidth,d.slideHeight=d.slideEl.offsetHeight,d.imageWrapEl.style.transitionDuration="0ms");const Q=f.width*U.scale,ht=f.height*U.scale;if(f.minX=Math.min(d.slideWidth/2-Q/2,0),f.maxX=-f.minX,f.minY=Math.min(d.slideHeight/2-ht/2,0),f.maxY=-f.minY,f.touchesCurrent.x=y.length>0?y[0].pageX:z.pageX,f.touchesCurrent.y=y.length>0?y[0].pageY:z.pageY,Math.max(Math.abs(f.touchesCurrent.x-f.touchesStart.x),Math.abs(f.touchesCurrent.y-f.touchesStart.y))>5&&(e.allowClick=!1),!f.isMoved&&!o){if(e.isHorizontal()&&(Math.floor(f.minX)===Math.floor(f.startX)&&f.touchesCurrent.x<f.touchesStart.x||Math.floor(f.maxX)===Math.floor(f.startX)&&f.touchesCurrent.x>f.touchesStart.x)){f.isTouched=!1,w();return}if(!e.isHorizontal()&&(Math.floor(f.minY)===Math.floor(f.startY)&&f.touchesCurrent.y<f.touchesStart.y||Math.floor(f.maxY)===Math.floor(f.startY)&&f.touchesCurrent.y>f.touchesStart.y)){f.isTouched=!1,w();return}}z.cancelable&&z.preventDefault(),z.stopPropagation(),P(),f.isMoved=!0;const Ut=(U.scale-s)/(d.maxRatio-e.params.zoom.minRatio),{originX:Pt,originY:pt}=d;f.currentX=f.touchesCurrent.x-f.touchesStart.x+f.startX+Ut*(f.width-Pt*2),f.currentY=f.touchesCurrent.y-f.touchesStart.y+f.startY+Ut*(f.height-pt*2),f.currentX<f.minX&&(f.currentX=f.minX+1-(f.minX-f.currentX+1)**.8),f.currentX>f.maxX&&(f.currentX=f.maxX-1+(f.currentX-f.maxX+1)**.8),f.currentY<f.minY&&(f.currentY=f.minY+1-(f.minY-f.currentY+1)**.8),f.currentY>f.maxY&&(f.currentY=f.maxY-1+(f.currentY-f.maxY+1)**.8),g.prevPositionX||(g.prevPositionX=f.touchesCurrent.x),g.prevPositionY||(g.prevPositionY=f.touchesCurrent.y),g.prevTime||(g.prevTime=Date.now()),g.x=(f.touchesCurrent.x-g.prevPositionX)/(Date.now()-g.prevTime)/2,g.y=(f.touchesCurrent.y-g.prevPositionY)/(Date.now()-g.prevTime)/2,Math.abs(f.touchesCurrent.x-g.prevPositionX)<2&&(g.x=0),Math.abs(f.touchesCurrent.y-g.prevPositionY)<2&&(g.y=0),g.prevPositionX=f.touchesCurrent.x,g.prevPositionY=f.touchesCurrent.y,g.prevTime=Date.now(),d.imageWrapEl.style.transform=`translate3d(${f.currentX}px, ${f.currentY}px,0)`}function G(){const z=e.zoom;if(y.length=0,!d.imageEl)return;if(!f.isTouched||!f.isMoved){f.isTouched=!1,f.isMoved=!1;return}f.isTouched=!1,f.isMoved=!1;let $=300,W=300;const U=g.x*$,Q=f.currentX+U,ht=g.y*W,Bt=f.currentY+ht;g.x!==0&&($=Math.abs((Q-f.currentX)/g.x)),g.y!==0&&(W=Math.abs((Bt-f.currentY)/g.y));const Ut=Math.max($,W);f.currentX=Q,f.currentY=Bt;const Pt=f.width*z.scale,pt=f.height*z.scale;f.minX=Math.min(d.slideWidth/2-Pt/2,0),f.maxX=-f.minX,f.minY=Math.min(d.slideHeight/2-pt/2,0),f.maxY=-f.minY,f.currentX=Math.max(Math.min(f.currentX,f.maxX),f.minX),f.currentY=Math.max(Math.min(f.currentY,f.maxY),f.minY),d.imageWrapEl.style.transitionDuration=`${Ut}ms`,d.imageWrapEl.style.transform=`translate3d(${f.currentX}px, ${f.currentY}px,0)`}function _(){const z=e.zoom;d.slideEl&&e.activeIndex!==e.slides.indexOf(d.slideEl)&&(d.imageEl&&(d.imageEl.style.transform="translate3d(0,0,0) scale(1)"),d.imageWrapEl&&(d.imageWrapEl.style.transform="translate3d(0,0,0)"),d.slideEl.classList.remove(`${e.params.zoom.zoomedSlideClass}`),z.scale=1,s=1,d.slideEl=void 0,d.imageEl=void 0,d.imageWrapEl=void 0,d.originX=0,d.originY=0)}function I(z){if(s<=1||!d.imageWrapEl||!L(z)||!R(z))return;const $=r.getComputedStyle(d.imageWrapEl).transform,W=new r.DOMMatrix($);if(!c){c=!0,l.x=z.clientX,l.y=z.clientY,f.startX=W.e,f.startY=W.f,f.width=d.imageEl.offsetWidth||d.imageEl.clientWidth,f.height=d.imageEl.offsetHeight||d.imageEl.clientHeight,d.slideWidth=d.slideEl.offsetWidth,d.slideHeight=d.slideEl.offsetHeight;return}const U=(z.clientX-l.x)*m,Q=(z.clientY-l.y)*m,ht=f.width*s,Bt=f.height*s,Ut=d.slideWidth,Pt=d.slideHeight,pt=Math.min(Ut/2-ht/2,0),wt=-pt,Ot=Math.min(Pt/2-Bt/2,0),le=-Ot,ne=Math.max(Math.min(f.startX+U,wt),pt),_t=Math.max(Math.min(f.startY+Q,le),Ot);d.imageWrapEl.style.transitionDuration="0ms",d.imageWrapEl.style.transform=`translate3d(${ne}px, ${_t}px, 0)`,l.x=z.clientX,l.y=z.clientY,f.startX=ne,f.startY=_t,f.currentX=ne,f.currentY=_t}function F(z){const $=e.zoom,W=e.params.zoom;if(!d.slideEl){z&&z.target&&(d.slideEl=z.target.closest(`.${e.params.slideClass}, swiper-slide`)),d.slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?d.slideEl=It(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:d.slideEl=e.slides[e.activeIndex]);let ge=d.slideEl.querySelector(`.${W.containerClass}`);ge&&(ge=ge.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=ge,ge?d.imageWrapEl=Xe(d.imageEl,`.${W.containerClass}`)[0]:d.imageWrapEl=void 0}if(!d.imageEl||!d.imageWrapEl)return;e.params.cssMode&&(e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.touchAction="none"),d.slideEl.classList.add(`${W.zoomedSlideClass}`);let U,Q,ht,Bt,Ut,Pt,pt,wt,Ot,le,ne,_t,ce,ue,ke,Le,ie,de;typeof f.touchesStart.x>"u"&&z?(U=z.pageX,Q=z.pageY):(U=f.touchesStart.x,Q=f.touchesStart.y);const lt=s,Ft=typeof z=="number"?z:null;s===1&&Ft&&(U=void 0,Q=void 0,f.touchesStart.x=void 0,f.touchesStart.y=void 0);const ze=S();$.scale=Ft||ze,s=Ft||ze,z&&!(s===1&&Ft)?(ie=d.slideEl.offsetWidth,de=d.slideEl.offsetHeight,ht=Mi(d.slideEl).left+r.scrollX,Bt=Mi(d.slideEl).top+r.scrollY,Ut=ht+ie/2-U,Pt=Bt+de/2-Q,Ot=d.imageEl.offsetWidth||d.imageEl.clientWidth,le=d.imageEl.offsetHeight||d.imageEl.clientHeight,ne=Ot*$.scale,_t=le*$.scale,ce=Math.min(ie/2-ne/2,0),ue=Math.min(de/2-_t/2,0),ke=-ce,Le=-ue,lt>0&&Ft&&typeof f.currentX=="number"&&typeof f.currentY=="number"?(pt=f.currentX*$.scale/lt,wt=f.currentY*$.scale/lt):(pt=Ut*$.scale,wt=Pt*$.scale),pt<ce&&(pt=ce),pt>ke&&(pt=ke),wt<ue&&(wt=ue),wt>Le&&(wt=Le)):(pt=0,wt=0),Ft&&$.scale===1&&(d.originX=0,d.originY=0),f.currentX=pt,f.currentY=wt,d.imageWrapEl.style.transitionDuration="300ms",d.imageWrapEl.style.transform=`translate3d(${pt}px, ${wt}px,0)`,d.imageEl.style.transitionDuration="300ms",d.imageEl.style.transform=`translate3d(0,0,0) scale(${$.scale})`}function X(){const z=e.zoom,$=e.params.zoom;if(!d.slideEl){e.params.virtual&&e.params.virtual.enabled&&e.virtual?d.slideEl=It(e.slidesEl,`.${e.params.slideActiveClass}`)[0]:d.slideEl=e.slides[e.activeIndex];let W=d.slideEl.querySelector(`.${$.containerClass}`);W&&(W=W.querySelectorAll("picture, img, svg, canvas, .swiper-zoom-target")[0]),d.imageEl=W,W?d.imageWrapEl=Xe(d.imageEl,`.${$.containerClass}`)[0]:d.imageWrapEl=void 0}!d.imageEl||!d.imageWrapEl||(e.params.cssMode&&(e.wrapperEl.style.overflow="",e.wrapperEl.style.touchAction=""),z.scale=1,s=1,f.currentX=void 0,f.currentY=void 0,f.touchesStart.x=void 0,f.touchesStart.y=void 0,d.imageWrapEl.style.transitionDuration="300ms",d.imageWrapEl.style.transform="translate3d(0,0,0)",d.imageEl.style.transitionDuration="300ms",d.imageEl.style.transform="translate3d(0,0,0) scale(1)",d.slideEl.classList.remove(`${$.zoomedSlideClass}`),d.slideEl=void 0,d.originX=0,d.originY=0,e.params.zoom.panOnMouseMove&&(l={x:0,y:0},c&&(c=!1,f.startX=0,f.startY=0)))}function K(z){const $=e.zoom;$.scale&&$.scale!==1?X():F(z)}function dt(){const z=e.params.passiveListeners?{passive:!0,capture:!1}:!1,$=e.params.passiveListeners?{passive:!1,capture:!0}:!0;return{passiveListener:z,activeListenerWithCapture:$}}function rt(){const z=e.zoom;if(z.enabled)return;z.enabled=!0;const{passiveListener:$,activeListenerWithCapture:W}=dt();e.wrapperEl.addEventListener("pointerdown",N,$),e.wrapperEl.addEventListener("pointermove",M,W),["pointerup","pointercancel","pointerout"].forEach(U=>{e.wrapperEl.addEventListener(U,j,$)}),e.wrapperEl.addEventListener("pointermove",H,W)}function Ct(){const z=e.zoom;if(!z.enabled)return;z.enabled=!1;const{passiveListener:$,activeListenerWithCapture:W}=dt();e.wrapperEl.removeEventListener("pointerdown",N,$),e.wrapperEl.removeEventListener("pointermove",M,W),["pointerup","pointercancel","pointerout"].forEach(U=>{e.wrapperEl.removeEventListener(U,j,$)}),e.wrapperEl.removeEventListener("pointermove",H,W)}n("init",()=>{e.params.zoom.enabled&&rt()}),n("destroy",()=>{Ct()}),n("touchStart",(z,$)=>{e.zoom.enabled&&O($)}),n("touchEnd",(z,$)=>{e.zoom.enabled&&G()}),n("doubleTap",(z,$)=>{!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&K($)}),n("transitionEnd",()=>{e.zoom.enabled&&e.params.zoom.enabled&&_()}),n("slideChange",()=>{e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&_()}),Object.assign(e.zoom,{enable:rt,disable:Ct,in:F,out:X,toggle:K})}function ph({swiper:e,extendParams:t,on:n}){t({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function i(l,m){const b=function(){let f,g,A;return(p,S)=>{for(g=-1,f=p.length;f-g>1;)A=f+g>>1,p[A]<=S?g=A:f=A;return f}}();this.x=l,this.y=m,this.lastIndex=l.length-1;let v,y;return this.interpolate=function(f){return f?(y=b(this.x,f),v=y-1,(f-this.x[v])*(this.y[y]-this.y[v])/(this.x[y]-this.x[v])+this.y[v]):0},this}function r(l){e.controller.spline=e.params.loop?new i(e.slidesGrid,l.slidesGrid):new i(e.snapGrid,l.snapGrid)}function s(l,m){const b=e.controller.control;let v,y;const d=e.constructor;function f(g){if(g.destroyed)return;const A=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(r(g),y=-e.controller.spline.interpolate(-A)),(!y||e.params.controller.by==="container")&&(v=(g.maxTranslate()-g.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(v)||!Number.isFinite(v))&&(v=1),y=(A-e.minTranslate())*v+g.minTranslate()),e.params.controller.inverse&&(y=g.maxTranslate()-y),g.updateProgress(y),g.setTranslate(y,e),g.updateActiveIndex(),g.updateSlidesClasses()}if(Array.isArray(b))for(let g=0;g<b.length;g+=1)b[g]!==m&&b[g]instanceof d&&f(b[g]);else b instanceof d&&m!==b&&f(b)}function o(l,m){const b=e.constructor,v=e.controller.control;let y;function d(f){f.destroyed||(f.setTransition(l,e),l!==0&&(f.transitionStart(),f.params.autoHeight&&cn(()=>{f.updateAutoHeight()}),Wn(f.wrapperEl,()=>{v&&f.transitionEnd()})))}if(Array.isArray(v))for(y=0;y<v.length;y+=1)v[y]!==m&&v[y]instanceof b&&d(v[y]);else v instanceof b&&m!==v&&d(v)}function c(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}n("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){(typeof e.params.controller.control=="string"?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(m=>{if(e.controller.control||(e.controller.control=[]),m&&m.swiper)e.controller.control.push(m.swiper);else if(m){const b=`${e.params.eventsPrefix}init`,v=y=>{e.controller.control.push(y.detail[0]),e.update(),m.removeEventListener(b,v)};m.addEventListener(b,v)}});return}e.controller.control=e.params.controller.control}),n("update",()=>{c()}),n("resize",()=>{c()}),n("observerUpdate",()=>{c()}),n("setTranslate",(l,m,b)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(m,b)}),n("setTransition",(l,m,b)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(m,b)}),Object.assign(e.controller,{setTranslate:s,setTransition:o})}function gh({swiper:e,extendParams:t,on:n}){t({a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,containerRole:null,itemRoleDescriptionMessage:null,slideRole:"group",id:null,scrollOnFocus:!0,wrapperLiveRegion:!0}}),e.a11y={clicked:!1};let i=null,r,s,o=new Date().getTime();function c(_){const I=i;I.length!==0&&ye(I,_)}function l(_=16){const I=()=>Math.round(16*Math.random()).toString(16);return"x".repeat(_).replace(/x/g,I)}function m(_){_=at(_),_.forEach(I=>{I.setAttribute("tabIndex","0")})}function b(_){_=at(_),_.forEach(I=>{I.setAttribute("tabIndex","-1")})}function v(_,I){_=at(_),_.forEach(F=>{F.setAttribute("role",I)})}function y(_,I){_=at(_),_.forEach(F=>{F.setAttribute("aria-roledescription",I)})}function d(_,I){_=at(_),_.forEach(F=>{F.setAttribute("aria-controls",I)})}function f(_,I){_=at(_),_.forEach(F=>{F.setAttribute("aria-label",I)})}function g(_,I){_=at(_),_.forEach(F=>{F.setAttribute("id",I)})}function A(_,I){_=at(_),_.forEach(F=>{F.setAttribute("aria-live",I)})}function p(_){_=at(_),_.forEach(I=>{I.setAttribute("aria-disabled",!0)})}function S(_){_=at(_),_.forEach(I=>{I.setAttribute("aria-disabled",!1)})}function E(_){if(_.keyCode!==13&&_.keyCode!==32)return;const I=e.params.a11y,F=_.target;if(!(e.pagination&&e.pagination.el&&(F===e.pagination.el||e.pagination.el.contains(_.target))&&!_.target.matches(Te(e.params.pagination.bulletClass)))){if(e.navigation&&e.navigation.prevEl&&e.navigation.nextEl){const X=at(e.navigation.prevEl);at(e.navigation.nextEl).includes(F)&&(e.isEnd&&!e.params.loop||e.slideNext(),e.isEnd?c(I.lastSlideMessage):c(I.nextSlideMessage)),X.includes(F)&&(e.isBeginning&&!e.params.loop||e.slidePrev(),e.isBeginning?c(I.firstSlideMessage):c(I.prevSlideMessage))}e.pagination&&F.matches(Te(e.params.pagination.bulletClass))&&F.click()}}function k(){if(e.params.loop||e.params.rewind||!e.navigation)return;const{nextEl:_,prevEl:I}=e.navigation;I&&(e.isBeginning?(p(I),b(I)):(S(I),m(I))),_&&(e.isEnd?(p(_),b(_)):(S(_),m(_)))}function L(){return e.pagination&&e.pagination.bullets&&e.pagination.bullets.length}function R(){return L()&&e.params.pagination.clickable}function N(){const _=e.params.a11y;L()&&e.pagination.bullets.forEach(I=>{e.params.pagination.clickable&&(m(I),e.params.pagination.renderBullet||(v(I,"button"),f(I,_.paginationBulletMessage.replace(/\{\{index\}\}/,Un(I)+1)))),I.matches(Te(e.params.pagination.bulletActiveClass))?I.setAttribute("aria-current","true"):I.removeAttribute("aria-current")})}const M=(_,I,F)=>{m(_),_.tagName!=="BUTTON"&&(v(_,"button"),_.addEventListener("keydown",E)),f(_,F),d(_,I)},j=_=>{s&&s!==_.target&&!s.contains(_.target)&&(r=!0),e.a11y.clicked=!0},D=()=>{r=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e.destroyed||(e.a11y.clicked=!1)})})},w=_=>{o=new Date().getTime()},P=_=>{if(e.a11y.clicked||!e.params.a11y.scrollOnFocus||new Date().getTime()-o<100)return;const I=_.target.closest(`.${e.params.slideClass}, swiper-slide`);if(!I||!e.slides.includes(I))return;s=I;const F=e.slides.indexOf(I)===e.activeIndex,X=e.params.watchSlidesProgress&&e.visibleSlides&&e.visibleSlides.includes(I);F||X||_.sourceCapabilities&&_.sourceCapabilities.firesTouchEvents||(e.isHorizontal()?e.el.scrollLeft=0:e.el.scrollTop=0,requestAnimationFrame(()=>{r||(e.params.loop?e.slideToLoop(e.getSlideIndexWhenGrid(parseInt(I.getAttribute("data-swiper-slide-index"))),0):e.slideTo(e.getSlideIndexWhenGrid(e.slides.indexOf(I)),0),r=!1)}))},O=()=>{const _=e.params.a11y;_.itemRoleDescriptionMessage&&y(e.slides,_.itemRoleDescriptionMessage),_.slideRole&&v(e.slides,_.slideRole);const I=e.slides.length;_.slideLabelMessage&&e.slides.forEach((F,X)=>{const K=e.params.loop?parseInt(F.getAttribute("data-swiper-slide-index"),10):X,dt=_.slideLabelMessage.replace(/\{\{index\}\}/,K+1).replace(/\{\{slidesLength\}\}/,I);f(F,dt)})},H=()=>{const _=e.params.a11y;e.el.append(i);const I=e.el;_.containerRoleDescriptionMessage&&y(I,_.containerRoleDescriptionMessage),_.containerMessage&&f(I,_.containerMessage),_.containerRole&&v(I,_.containerRole);const F=e.wrapperEl,X=_.id||F.getAttribute("id")||`swiper-wrapper-${l(16)}`;if(g(F,X),_.wrapperLiveRegion){const Ct=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";A(F,Ct)}O();let{nextEl:K,prevEl:dt}=e.navigation?e.navigation:{};K=at(K),dt=at(dt),K&&K.forEach(Ct=>M(Ct,X,_.nextSlideMessage)),dt&&dt.forEach(Ct=>M(Ct,X,_.prevSlideMessage)),R()&&at(e.pagination.el).forEach(z=>{z.addEventListener("keydown",E)}),kt().addEventListener("visibilitychange",w),e.el.addEventListener("focus",P,!0),e.el.addEventListener("focus",P,!0),e.el.addEventListener("pointerdown",j,!0),e.el.addEventListener("pointerup",D,!0)};function G(){i&&i.remove();let{nextEl:_,prevEl:I}=e.navigation?e.navigation:{};_=at(_),I=at(I),_&&_.forEach(X=>X.removeEventListener("keydown",E)),I&&I.forEach(X=>X.removeEventListener("keydown",E)),R()&&at(e.pagination.el).forEach(K=>{K.removeEventListener("keydown",E)}),kt().removeEventListener("visibilitychange",w),e.el&&typeof e.el!="string"&&(e.el.removeEventListener("focus",P,!0),e.el.removeEventListener("pointerdown",j,!0),e.el.removeEventListener("pointerup",D,!0))}n("beforeInit",()=>{i=te("span",e.params.a11y.notificationClass),i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true")}),n("afterInit",()=>{e.params.a11y.enabled&&H()}),n("slidesLengthChange snapGridLengthChange slidesGridLengthChange",()=>{e.params.a11y.enabled&&O()}),n("fromEdge toEdge afterInit lock unlock",()=>{e.params.a11y.enabled&&k()}),n("paginationUpdate",()=>{e.params.a11y.enabled&&N()}),n("destroy",()=>{e.params.a11y.enabled&&G()})}function vh({swiper:e,extendParams:t,on:n}){t({history:{enabled:!1,root:"",replaceState:!1,key:"slides",keepQuery:!1}});let i=!1,r={};const s=y=>y.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,""),o=y=>{const d=vt();let f;y?f=new URL(y):f=d.location;const g=f.pathname.slice(1).split("/").filter(E=>E!==""),A=g.length,p=g[A-2],S=g[A-1];return{key:p,value:S}},c=(y,d)=>{const f=vt();if(!i||!e.params.history.enabled)return;let g;e.params.url?g=new URL(e.params.url):g=f.location;const A=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${d}"]`):e.slides[d];let p=s(A.getAttribute("data-history"));if(e.params.history.root.length>0){let E=e.params.history.root;E[E.length-1]==="/"&&(E=E.slice(0,E.length-1)),p=`${E}/${y?`${y}/`:""}${p}`}else g.pathname.includes(y)||(p=`${y?`${y}/`:""}${p}`);e.params.history.keepQuery&&(p+=g.search);const S=f.history.state;S&&S.value===p||(e.params.history.replaceState?f.history.replaceState({value:p},null,p):f.history.pushState({value:p},null,p))},l=(y,d,f)=>{if(d)for(let g=0,A=e.slides.length;g<A;g+=1){const p=e.slides[g];if(s(p.getAttribute("data-history"))===d){const E=e.getSlideIndex(p);e.slideTo(E,y,f)}}else e.slideTo(0,y,f)},m=()=>{r=o(e.params.url),l(e.params.speed,r.value,!1)},b=()=>{const y=vt();if(e.params.history){if(!y.history||!y.history.pushState){e.params.history.enabled=!1,e.params.hashNavigation.enabled=!0;return}if(i=!0,r=o(e.params.url),!r.key&&!r.value){e.params.history.replaceState||y.addEventListener("popstate",m);return}l(0,r.value,e.params.runCallbacksOnInit),e.params.history.replaceState||y.addEventListener("popstate",m)}},v=()=>{const y=vt();e.params.history.replaceState||y.removeEventListener("popstate",m)};n("init",()=>{e.params.history.enabled&&b()}),n("destroy",()=>{e.params.history.enabled&&v()}),n("transitionEnd _freeModeNoMomentumRelease",()=>{i&&c(e.params.history.key,e.activeIndex)}),n("slideChange",()=>{i&&e.params.cssMode&&c(e.params.history.key,e.activeIndex)})}function bh({swiper:e,extendParams:t,emit:n,on:i}){let r=!1;const s=kt(),o=vt();t({hashNavigation:{enabled:!1,replaceState:!1,watchState:!1,getSlideIndex(v,y){if(e.virtual&&e.params.virtual.enabled){const d=e.slides.find(g=>g.getAttribute("data-hash")===y);return d?parseInt(d.getAttribute("data-swiper-slide-index"),10):0}return e.getSlideIndex(It(e.slidesEl,`.${e.params.slideClass}[data-hash="${y}"], swiper-slide[data-hash="${y}"]`)[0])}}});const c=()=>{n("hashChange");const v=s.location.hash.replace("#",""),y=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],d=y?y.getAttribute("data-hash"):"";if(v!==d){const f=e.params.hashNavigation.getSlideIndex(e,v);if(typeof f>"u"||Number.isNaN(f))return;e.slideTo(f)}},l=()=>{if(!r||!e.params.hashNavigation.enabled)return;const v=e.virtual&&e.params.virtual.enabled?e.slidesEl.querySelector(`[data-swiper-slide-index="${e.activeIndex}"]`):e.slides[e.activeIndex],y=v?v.getAttribute("data-hash")||v.getAttribute("data-history"):"";e.params.hashNavigation.replaceState&&o.history&&o.history.replaceState?(o.history.replaceState(null,null,`#${y}`||""),n("hashSet")):(s.location.hash=y||"",n("hashSet"))},m=()=>{if(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)return;r=!0;const v=s.location.hash.replace("#","");if(v){const d=e.params.hashNavigation.getSlideIndex(e,v);e.slideTo(d||0,0,e.params.runCallbacksOnInit,!0)}e.params.hashNavigation.watchState&&o.addEventListener("hashchange",c)},b=()=>{e.params.hashNavigation.watchState&&o.removeEventListener("hashchange",c)};i("init",()=>{e.params.hashNavigation.enabled&&m()}),i("destroy",()=>{e.params.hashNavigation.enabled&&b()}),i("transitionEnd _freeModeNoMomentumRelease",()=>{r&&l()}),i("slideChange",()=>{r&&e.params.cssMode&&l()})}function yh({swiper:e,extendParams:t,on:n,emit:i,params:r}){e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let s,o,c=r&&r.autoplay?r.autoplay.delay:3e3,l=r&&r.autoplay?r.autoplay.delay:3e3,m,b=new Date().getTime(),v,y,d,f,g,A,p;function S(I){!e||e.destroyed||!e.wrapperEl||I.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",S),!(p||I.detail&&I.detail.bySwiperTouchMove)&&j())}const E=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?v=!0:v&&(l=m,v=!1);const I=e.autoplay.paused?m:b+l-new Date().getTime();e.autoplay.timeLeft=I,i("autoplayTimeLeft",I,I/c),o=requestAnimationFrame(()=>{E()})},k=()=>{let I;return e.virtual&&e.params.virtual.enabled?I=e.slides.find(X=>X.classList.contains("swiper-slide-active")):I=e.slides[e.activeIndex],I?parseInt(I.getAttribute("data-swiper-autoplay"),10):void 0},L=I=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),E();let F=typeof I>"u"?e.params.autoplay.delay:I;c=e.params.autoplay.delay,l=e.params.autoplay.delay;const X=k();!Number.isNaN(X)&&X>0&&typeof I>"u"&&(F=X,c=X,l=X),m=F;const K=e.params.speed,dt=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(K,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,K,!0,!0),i("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(K,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,K,!0,!0),i("autoplay")),e.params.cssMode&&(b=new Date().getTime(),requestAnimationFrame(()=>{L()})))};return F>0?(clearTimeout(s),s=setTimeout(()=>{dt()},F)):requestAnimationFrame(()=>{dt()}),F},R=()=>{b=new Date().getTime(),e.autoplay.running=!0,L(),i("autoplayStart")},N=()=>{e.autoplay.running=!1,clearTimeout(s),cancelAnimationFrame(o),i("autoplayStop")},M=(I,F)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(s),I||(A=!0);const X=()=>{i("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",S):j()};if(e.autoplay.paused=!0,F){g&&(m=e.params.autoplay.delay),g=!1,X();return}m=(m||e.params.autoplay.delay)-(new Date().getTime()-b),!(e.isEnd&&m<0&&!e.params.loop)&&(m<0&&(m=0),X())},j=()=>{e.isEnd&&m<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(b=new Date().getTime(),A?(A=!1,L(m)):L(),e.autoplay.paused=!1,i("autoplayResume"))},D=()=>{if(e.destroyed||!e.autoplay.running)return;const I=kt();I.visibilityState==="hidden"&&(A=!0,M(!0)),I.visibilityState==="visible"&&j()},w=I=>{I.pointerType==="mouse"&&(A=!0,p=!0,!(e.animating||e.autoplay.paused)&&M(!0))},P=I=>{I.pointerType==="mouse"&&(p=!1,e.autoplay.paused&&j())},O=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",w),e.el.addEventListener("pointerleave",P))},H=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",w),e.el.removeEventListener("pointerleave",P))},G=()=>{kt().addEventListener("visibilitychange",D)},_=()=>{kt().removeEventListener("visibilitychange",D)};n("init",()=>{e.params.autoplay.enabled&&(O(),G(),R())}),n("destroy",()=>{H(),_(),e.autoplay.running&&N()}),n("_freeModeStaticRelease",()=>{(d||A)&&j()}),n("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?N():M(!0,!0)}),n("beforeTransitionStart",(I,F,X)=>{e.destroyed||!e.autoplay.running||(X||!e.params.autoplay.disableOnInteraction?M(!0,!0):N())}),n("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){N();return}y=!0,d=!1,A=!1,f=setTimeout(()=>{A=!0,d=!0,M(!0)},200)}}),n("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!y)){if(clearTimeout(f),clearTimeout(s),e.params.autoplay.disableOnInteraction){d=!1,y=!1;return}d&&e.params.cssMode&&j(),d=!1,y=!1}}),n("slideChange",()=>{e.destroyed||!e.autoplay.running||(g=!0)}),Object.assign(e.autoplay,{start:R,stop:N,pause:M,resume:j})}function Sh({swiper:e,extendParams:t,on:n}){t({thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-thumbs"}});let i=!1,r=!1;e.thumbs={swiper:null};function s(){const l=e.thumbs.swiper;if(!l||l.destroyed)return;const m=l.clickedIndex,b=l.clickedSlide;if(b&&b.classList.contains(e.params.thumbs.slideThumbActiveClass)||typeof m>"u"||m===null)return;let v;l.params.loop?v=parseInt(l.clickedSlide.getAttribute("data-swiper-slide-index"),10):v=m,e.params.loop?e.slideToLoop(v):e.slideTo(v)}function o(){const{thumbs:l}=e.params;if(i)return!1;i=!0;const m=e.constructor;if(l.swiper instanceof m){if(l.swiper.destroyed)return i=!1,!1;e.thumbs.swiper=l.swiper,Object.assign(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),Object.assign(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper.update()}else if(Dn(l.swiper)){const b=Object.assign({},l.swiper);Object.assign(b,{watchSlidesProgress:!0,slideToClickedSlide:!1}),e.thumbs.swiper=new m(b),r=!0}return e.thumbs.swiper.el.classList.add(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",s),!0}function c(l){const m=e.thumbs.swiper;if(!m||m.destroyed)return;const b=m.params.slidesPerView==="auto"?m.slidesPerViewDynamic():m.params.slidesPerView;let v=1;const y=e.params.thumbs.slideThumbActiveClass;if(e.params.slidesPerView>1&&!e.params.centeredSlides&&(v=e.params.slidesPerView),e.params.thumbs.multipleActiveThumbs||(v=1),v=Math.floor(v),m.slides.forEach(g=>g.classList.remove(y)),m.params.loop||m.params.virtual&&m.params.virtual.enabled)for(let g=0;g<v;g+=1)It(m.slidesEl,`[data-swiper-slide-index="${e.realIndex+g}"]`).forEach(A=>{A.classList.add(y)});else for(let g=0;g<v;g+=1)m.slides[e.realIndex+g]&&m.slides[e.realIndex+g].classList.add(y);const d=e.params.thumbs.autoScrollOffset,f=d&&!m.params.loop;if(e.realIndex!==m.realIndex||f){const g=m.activeIndex;let A,p;if(m.params.loop){const S=m.slides.find(E=>E.getAttribute("data-swiper-slide-index")===`${e.realIndex}`);A=m.slides.indexOf(S),p=e.activeIndex>e.previousIndex?"next":"prev"}else A=e.realIndex,p=A>e.previousIndex?"next":"prev";f&&(A+=p==="next"?d:-1*d),m.visibleSlidesIndexes&&m.visibleSlidesIndexes.indexOf(A)<0&&(m.params.centeredSlides?A>g?A=A-Math.floor(b/2)+1:A=A+Math.floor(b/2)-1:A>g&&m.params.slidesPerGroup,m.slideTo(A,l?0:void 0))}}n("beforeInit",()=>{const{thumbs:l}=e.params;if(!(!l||!l.swiper))if(typeof l.swiper=="string"||l.swiper instanceof HTMLElement){const m=kt(),b=()=>{const y=typeof l.swiper=="string"?m.querySelector(l.swiper):l.swiper;if(y&&y.swiper)l.swiper=y.swiper,o(),c(!0);else if(y){const d=`${e.params.eventsPrefix}init`,f=g=>{l.swiper=g.detail[0],y.removeEventListener(d,f),o(),c(!0),l.swiper.update(),e.update()};y.addEventListener(d,f)}return y},v=()=>{if(e.destroyed)return;b()||requestAnimationFrame(v)};requestAnimationFrame(v)}else o(),c(!0)}),n("slideChange update resize observerUpdate",()=>{c()}),n("setTransition",(l,m)=>{const b=e.thumbs.swiper;!b||b.destroyed||b.setTransition(m)}),n("beforeDestroy",()=>{const l=e.thumbs.swiper;!l||l.destroyed||r&&l.destroy()}),Object.assign(e.thumbs,{init:o,update:c})}function xh({swiper:e,extendParams:t,emit:n,once:i}){t({freeMode:{enabled:!1,momentum:!0,momentumRatio:1,momentumBounce:!0,momentumBounceRatio:1,momentumVelocityRatio:1,sticky:!1,minimumVelocity:.02}});function r(){if(e.params.cssMode)return;const c=e.getTranslate();e.setTranslate(c),e.setTransition(0),e.touchEventsData.velocities.length=0,e.freeMode.onTouchEnd({currentPos:e.rtl?e.translate:-e.translate})}function s(){if(e.params.cssMode)return;const{touchEventsData:c,touches:l}=e;c.velocities.length===0&&c.velocities.push({position:l[e.isHorizontal()?"startX":"startY"],time:c.touchStartTime}),c.velocities.push({position:l[e.isHorizontal()?"currentX":"currentY"],time:oe()})}function o({currentPos:c}){if(e.params.cssMode)return;const{params:l,wrapperEl:m,rtlTranslate:b,snapGrid:v,touchEventsData:y}=e,f=oe()-y.touchStartTime;if(c<-e.minTranslate()){e.slideTo(e.activeIndex);return}if(c>-e.maxTranslate()){e.slides.length<v.length?e.slideTo(v.length-1):e.slideTo(e.slides.length-1);return}if(l.freeMode.momentum){if(y.velocities.length>1){const R=y.velocities.pop(),N=y.velocities.pop(),M=R.position-N.position,j=R.time-N.time;e.velocity=M/j,e.velocity/=2,Math.abs(e.velocity)<l.freeMode.minimumVelocity&&(e.velocity=0),(j>150||oe()-R.time>300)&&(e.velocity=0)}else e.velocity=0;e.velocity*=l.freeMode.momentumVelocityRatio,y.velocities.length=0;let g=1e3*l.freeMode.momentumRatio;const A=e.velocity*g;let p=e.translate+A;b&&(p=-p);let S=!1,E;const k=Math.abs(e.velocity)*20*l.freeMode.momentumBounceRatio;let L;if(p<e.maxTranslate())l.freeMode.momentumBounce?(p+e.maxTranslate()<-k&&(p=e.maxTranslate()-k),E=e.maxTranslate(),S=!0,y.allowMomentumBounce=!0):p=e.maxTranslate(),l.loop&&l.centeredSlides&&(L=!0);else if(p>e.minTranslate())l.freeMode.momentumBounce?(p-e.minTranslate()>k&&(p=e.minTranslate()+k),E=e.minTranslate(),S=!0,y.allowMomentumBounce=!0):p=e.minTranslate(),l.loop&&l.centeredSlides&&(L=!0);else if(l.freeMode.sticky){let R;for(let N=0;N<v.length;N+=1)if(v[N]>-p){R=N;break}Math.abs(v[R]-p)<Math.abs(v[R-1]-p)||e.swipeDirection==="next"?p=v[R]:p=v[R-1],p=-p}if(L&&i("transitionEnd",()=>{e.loopFix()}),e.velocity!==0){if(b?g=Math.abs((-p-e.translate)/e.velocity):g=Math.abs((p-e.translate)/e.velocity),l.freeMode.sticky){const R=Math.abs((b?-p:p)-e.translate),N=e.slidesSizesGrid[e.activeIndex];R<N?g=l.speed:R<2*N?g=l.speed*1.5:g=l.speed*2.5}}else if(l.freeMode.sticky){e.slideToClosest();return}l.freeMode.momentumBounce&&S?(e.updateProgress(E),e.setTransition(g),e.setTranslate(p),e.transitionStart(!0,e.swipeDirection),e.animating=!0,Wn(m,()=>{!e||e.destroyed||!y.allowMomentumBounce||(n("momentumBounce"),e.setTransition(l.speed),setTimeout(()=>{e.setTranslate(E),Wn(m,()=>{!e||e.destroyed||e.transitionEnd()})},0))})):e.velocity?(n("_freeModeNoMomentumRelease"),e.updateProgress(p),e.setTransition(g),e.setTranslate(p),e.transitionStart(!0,e.swipeDirection),e.animating||(e.animating=!0,Wn(m,()=>{!e||e.destroyed||e.transitionEnd()}))):e.updateProgress(p),e.updateActiveIndex(),e.updateSlidesClasses()}else if(l.freeMode.sticky){e.slideToClosest();return}else l.freeMode&&n("_freeModeNoMomentumRelease");(!l.freeMode.momentum||f>=l.longSwipesMs)&&(n("_freeModeStaticRelease"),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses())}Object.assign(e,{freeMode:{onTouchStart:r,onTouchMove:s,onTouchEnd:o}})}function Ah({swiper:e,extendParams:t,on:n}){t({grid:{rows:1,fill:"column"}});let i,r,s,o;const c=()=>{let f=e.params.spaceBetween;return typeof f=="string"&&f.indexOf("%")>=0?f=parseFloat(f.replace("%",""))/100*e.size:typeof f=="string"&&(f=parseFloat(f)),f},l=f=>{const{slidesPerView:g}=e.params,{rows:A,fill:p}=e.params.grid,S=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:f.length;s=Math.floor(S/A),Math.floor(S/A)===S/A?i=S:i=Math.ceil(S/A)*A,g!=="auto"&&p==="row"&&(i=Math.max(i,g*A)),r=i/A},m=()=>{e.slides&&e.slides.forEach(f=>{f.swiperSlideGridSet&&(f.style.height="",f.style[e.getDirectionLabel("margin-top")]="")})},b=(f,g,A)=>{const{slidesPerGroup:p}=e.params,S=c(),{rows:E,fill:k}=e.params.grid,L=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:A.length;let R,N,M;if(k==="row"&&p>1){const j=Math.floor(f/(p*E)),D=f-E*p*j,w=j===0?p:Math.min(Math.ceil((L-j*E*p)/E),p);M=Math.floor(D/w),N=D-M*w+j*p,R=N+M*i/E,g.style.order=R}else k==="column"?(N=Math.floor(f/E),M=f-N*E,(N>s||N===s&&M===E-1)&&(M+=1,M>=E&&(M=0,N+=1))):(M=Math.floor(f/r),N=f-M*r);g.row=M,g.column=N,g.style.height=`calc((100% - ${(E-1)*S}px) / ${E})`,g.style[e.getDirectionLabel("margin-top")]=M!==0?S&&`${S}px`:"",g.swiperSlideGridSet=!0},v=(f,g)=>{const{centeredSlides:A,roundLengths:p}=e.params,S=c(),{rows:E}=e.params.grid;if(e.virtualSize=(f+S)*i,e.virtualSize=Math.ceil(e.virtualSize/E)-S,e.params.cssMode||(e.wrapperEl.style[e.getDirectionLabel("width")]=`${e.virtualSize+S}px`),A){const k=[];for(let L=0;L<g.length;L+=1){let R=g[L];p&&(R=Math.floor(R)),g[L]<e.virtualSize+g[0]&&k.push(R)}g.splice(0,g.length),g.push(...k)}},y=()=>{o=e.params.grid&&e.params.grid.rows>1},d=()=>{const{params:f,el:g}=e,A=f.grid&&f.grid.rows>1;o&&!A?(g.classList.remove(`${f.containerModifierClass}grid`,`${f.containerModifierClass}grid-column`),s=1,e.emitContainerClasses()):!o&&A&&(g.classList.add(`${f.containerModifierClass}grid`),f.grid.fill==="column"&&g.classList.add(`${f.containerModifierClass}grid-column`),e.emitContainerClasses()),o=A};n("init",y),n("update",d),e.grid={initSlides:l,unsetSlides:m,updateSlide:b,updateWrapperSize:v}}function Eh(e){const t=this,{params:n,slidesEl:i}=t;n.loop&&t.loopDestroy();const r=s=>{if(typeof s=="string"){const o=document.createElement("div");ye(o,s),i.append(o.children[0]),ye(o,"")}else i.append(s)};if(typeof e=="object"&&"length"in e)for(let s=0;s<e.length;s+=1)e[s]&&r(e[s]);else r(e);t.recalcSlides(),n.loop&&t.loopCreate(),(!n.observer||t.isElement)&&t.update()}function Th(e){const t=this,{params:n,activeIndex:i,slidesEl:r}=t;n.loop&&t.loopDestroy();let s=i+1;const o=c=>{if(typeof c=="string"){const l=document.createElement("div");ye(l,c),r.prepend(l.children[0]),ye(l,"")}else r.prepend(c)};if(typeof e=="object"&&"length"in e){for(let c=0;c<e.length;c+=1)e[c]&&o(e[c]);s=i+e.length}else o(e);t.recalcSlides(),n.loop&&t.loopCreate(),(!n.observer||t.isElement)&&t.update(),t.slideTo(s,0,!1)}function Ch(e,t){const n=this,{params:i,activeIndex:r,slidesEl:s}=n;let o=r;i.loop&&(o-=n.loopedSlides,n.loopDestroy(),n.recalcSlides());const c=n.slides.length;if(e<=0){n.prependSlide(t);return}if(e>=c){n.appendSlide(t);return}let l=o>e?o+1:o;const m=[];for(let b=c-1;b>=e;b-=1){const v=n.slides[b];v.remove(),m.unshift(v)}if(typeof t=="object"&&"length"in t){for(let b=0;b<t.length;b+=1)t[b]&&s.append(t[b]);l=o>e?o+t.length:o}else s.append(t);for(let b=0;b<m.length;b+=1)s.append(m[b]);n.recalcSlides(),i.loop&&n.loopCreate(),(!i.observer||n.isElement)&&n.update(),i.loop?n.slideTo(l+n.loopedSlides,0,!1):n.slideTo(l,0,!1)}function kh(e){const t=this,{params:n,activeIndex:i}=t;let r=i;n.loop&&(r-=t.loopedSlides,t.loopDestroy());let s=r,o;if(typeof e=="object"&&"length"in e){for(let c=0;c<e.length;c+=1)o=e[c],t.slides[o]&&t.slides[o].remove(),o<s&&(s-=1);s=Math.max(s,0)}else o=e,t.slides[o]&&t.slides[o].remove(),o<s&&(s-=1),s=Math.max(s,0);t.recalcSlides(),n.loop&&t.loopCreate(),(!n.observer||t.isElement)&&t.update(),n.loop?t.slideTo(s+t.loopedSlides,0,!1):t.slideTo(s,0,!1)}function Lh(){const e=this,t=[];for(let n=0;n<e.slides.length;n+=1)t.push(n);e.removeSlide(t)}function Mh({swiper:e}){Object.assign(e,{appendSlide:Eh.bind(e),prependSlide:Th.bind(e),addSlide:Ch.bind(e),removeSlide:kh.bind(e),removeAllSlides:Lh.bind(e)})}function fn(e){const{effect:t,swiper:n,on:i,setTranslate:r,setTransition:s,overwriteParams:o,perspective:c,recreateShadows:l,getEffectParams:m}=e;i("beforeInit",()=>{if(n.params.effect!==t)return;n.classNames.push(`${n.params.containerModifierClass}${t}`),c&&c()&&n.classNames.push(`${n.params.containerModifierClass}3d`);const v=o?o():{};Object.assign(n.params,v),Object.assign(n.originalParams,v)}),i("setTranslate _virtualUpdated",()=>{n.params.effect===t&&r()}),i("setTransition",(v,y)=>{n.params.effect===t&&s(y)}),i("transitionEnd",()=>{if(n.params.effect===t&&l){if(!m||!m().slideShadows)return;n.slides.forEach(v=>{v.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(y=>y.remove())}),l()}});let b;i("virtualUpdate",()=>{n.params.effect===t&&(n.slides.length||(b=!0),requestAnimationFrame(()=>{b&&n.slides&&n.slides.length&&(r(),b=!1)}))})}function Yn(e,t){const n=en(t);return n!==t&&(n.style.backfaceVisibility="hidden",n.style["-webkit-backface-visibility"]="hidden"),n}function _i({swiper:e,duration:t,transformElements:n,allSlides:i}){const{activeIndex:r}=e,s=o=>o.parentElement?o.parentElement:e.slides.find(l=>l.shadowRoot&&l.shadowRoot===o.parentNode);if(e.params.virtualTranslate&&t!==0){let o=!1,c;i?c=n:c=n.filter(l=>{const m=l.classList.contains("swiper-slide-transform")?s(l):l;return e.getSlideIndex(m)===r}),c.forEach(l=>{Wn(l,()=>{if(o||!e||e.destroyed)return;o=!0,e.animating=!1;const m=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(m)})})}}function Ph({swiper:e,extendParams:t,on:n}){t({fadeEffect:{crossFade:!1}}),fn({effect:"fade",swiper:e,on:n,setTranslate:()=>{const{slides:s}=e,o=e.params.fadeEffect;for(let c=0;c<s.length;c+=1){const l=e.slides[c];let b=-l.swiperSlideOffset;e.params.virtualTranslate||(b-=e.translate);let v=0;e.isHorizontal()||(v=b,b=0);const y=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(l.progress),0):1+Math.min(Math.max(l.progress,-1),0),d=Yn(o,l);d.style.opacity=y,d.style.transform=`translate3d(${b}px, ${v}px, 0px)`}},setTransition:s=>{const o=e.slides.map(c=>en(c));o.forEach(c=>{c.style.transitionDuration=`${s}ms`}),_i({swiper:e,duration:s,transformElements:o,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function wh({swiper:e,extendParams:t,on:n}){t({cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}});const i=(c,l,m)=>{let b=m?c.querySelector(".swiper-slide-shadow-left"):c.querySelector(".swiper-slide-shadow-top"),v=m?c.querySelector(".swiper-slide-shadow-right"):c.querySelector(".swiper-slide-shadow-bottom");b||(b=te("div",`swiper-slide-shadow-cube swiper-slide-shadow-${m?"left":"top"}`.split(" ")),c.append(b)),v||(v=te("div",`swiper-slide-shadow-cube swiper-slide-shadow-${m?"right":"bottom"}`.split(" ")),c.append(v)),b&&(b.style.opacity=Math.max(-l,0)),v&&(v.style.opacity=Math.max(l,0))};fn({effect:"cube",swiper:e,on:n,setTranslate:()=>{const{el:c,wrapperEl:l,slides:m,width:b,height:v,rtlTranslate:y,size:d,browser:f}=e,g=Oi(e),A=e.params.cubeEffect,p=e.isHorizontal(),S=e.virtual&&e.params.virtual.enabled;let E=0,k;A.shadow&&(p?(k=e.wrapperEl.querySelector(".swiper-cube-shadow"),k||(k=te("div","swiper-cube-shadow"),e.wrapperEl.append(k)),k.style.height=`${b}px`):(k=c.querySelector(".swiper-cube-shadow"),k||(k=te("div","swiper-cube-shadow"),c.append(k))));for(let R=0;R<m.length;R+=1){const N=m[R];let M=R;S&&(M=parseInt(N.getAttribute("data-swiper-slide-index"),10));let j=M*90,D=Math.floor(j/360);y&&(j=-j,D=Math.floor(-j/360));const w=Math.max(Math.min(N.progress,1),-1);let P=0,O=0,H=0;M%4===0?(P=-D*4*d,H=0):(M-1)%4===0?(P=0,H=-D*4*d):(M-2)%4===0?(P=d+D*4*d,H=d):(M-3)%4===0&&(P=-d,H=3*d+d*4*D),y&&(P=-P),p||(O=P,P=0);const G=`rotateX(${g(p?0:-j)}deg) rotateY(${g(p?j:0)}deg) translate3d(${P}px, ${O}px, ${H}px)`;w<=1&&w>-1&&(E=M*90+w*90,y&&(E=-M*90-w*90)),N.style.transform=G,A.slideShadows&&i(N,w,p)}if(l.style.transformOrigin=`50% 50% -${d/2}px`,l.style["-webkit-transform-origin"]=`50% 50% -${d/2}px`,A.shadow)if(p)k.style.transform=`translate3d(0px, ${b/2+A.shadowOffset}px, ${-b/2}px) rotateX(89.99deg) rotateZ(0deg) scale(${A.shadowScale})`;else{const R=Math.abs(E)-Math.floor(Math.abs(E)/90)*90,N=1.5-(Math.sin(R*2*Math.PI/360)/2+Math.cos(R*2*Math.PI/360)/2),M=A.shadowScale,j=A.shadowScale/N,D=A.shadowOffset;k.style.transform=`scale3d(${M}, 1, ${j}) translate3d(0px, ${v/2+D}px, ${-v/2/j}px) rotateX(-89.99deg)`}const L=(f.isSafari||f.isWebView)&&f.needPerspectiveFix?-d/2:0;l.style.transform=`translate3d(0px,0,${L}px) rotateX(${g(e.isHorizontal()?0:E)}deg) rotateY(${g(e.isHorizontal()?-E:0)}deg)`,l.style.setProperty("--swiper-cube-translate-z",`${L}px`)},setTransition:c=>{const{el:l,slides:m}=e;if(m.forEach(b=>{b.style.transitionDuration=`${c}ms`,b.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(v=>{v.style.transitionDuration=`${c}ms`})}),e.params.cubeEffect.shadow&&!e.isHorizontal()){const b=l.querySelector(".swiper-cube-shadow");b&&(b.style.transitionDuration=`${c}ms`)}},recreateShadows:()=>{const c=e.isHorizontal();e.slides.forEach(l=>{const m=Math.max(Math.min(l.progress,1),-1);i(l,m,c)})},getEffectParams:()=>e.params.cubeEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0})})}function un(e,t,n){const i=`swiper-slide-shadow${n?`-${n}`:""}${e?` swiper-slide-shadow-${e}`:""}`,r=en(t);let s=r.querySelector(`.${i.split(" ").join(".")}`);return s||(s=te("div",i.split(" ")),r.append(s)),s}function Rh({swiper:e,extendParams:t,on:n}){t({flipEffect:{slideShadows:!0,limitRotation:!0}});const i=(c,l)=>{let m=e.isHorizontal()?c.querySelector(".swiper-slide-shadow-left"):c.querySelector(".swiper-slide-shadow-top"),b=e.isHorizontal()?c.querySelector(".swiper-slide-shadow-right"):c.querySelector(".swiper-slide-shadow-bottom");m||(m=un("flip",c,e.isHorizontal()?"left":"top")),b||(b=un("flip",c,e.isHorizontal()?"right":"bottom")),m&&(m.style.opacity=Math.max(-l,0)),b&&(b.style.opacity=Math.max(l,0))};fn({effect:"flip",swiper:e,on:n,setTranslate:()=>{const{slides:c,rtlTranslate:l}=e,m=e.params.flipEffect,b=Oi(e);for(let v=0;v<c.length;v+=1){const y=c[v];let d=y.progress;e.params.flipEffect.limitRotation&&(d=Math.max(Math.min(y.progress,1),-1));const f=y.swiperSlideOffset;let A=-180*d,p=0,S=e.params.cssMode?-f-e.translate:-f,E=0;e.isHorizontal()?l&&(A=-A):(E=S,S=0,p=-A,A=0),y.style.zIndex=-Math.abs(Math.round(d))+c.length,m.slideShadows&&i(y,d);const k=`translate3d(${S}px, ${E}px, 0px) rotateX(${b(p)}deg) rotateY(${b(A)}deg)`,L=Yn(m,y);L.style.transform=k}},setTransition:c=>{const l=e.slides.map(m=>en(m));l.forEach(m=>{m.style.transitionDuration=`${c}ms`,m.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(b=>{b.style.transitionDuration=`${c}ms`})}),_i({swiper:e,duration:c,transformElements:l})},recreateShadows:()=>{e.params.flipEffect,e.slides.forEach(c=>{let l=c.progress;e.params.flipEffect.limitRotation&&(l=Math.max(Math.min(c.progress,1),-1)),i(c,l)})},getEffectParams:()=>e.params.flipEffect,perspective:()=>!0,overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}function Dh({swiper:e,extendParams:t,on:n}){t({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),fn({effect:"coverflow",swiper:e,on:n,setTranslate:()=>{const{width:s,height:o,slides:c,slidesSizesGrid:l}=e,m=e.params.coverflowEffect,b=e.isHorizontal(),v=e.translate,y=b?-v+s/2:-v+o/2,d=b?m.rotate:-m.rotate,f=m.depth,g=Oi(e);for(let A=0,p=c.length;A<p;A+=1){const S=c[A],E=l[A],k=S.swiperSlideOffset,L=(y-k-E/2)/E,R=typeof m.modifier=="function"?m.modifier(L):L*m.modifier;let N=b?d*R:0,M=b?0:d*R,j=-f*Math.abs(R),D=m.stretch;typeof D=="string"&&D.indexOf("%")!==-1&&(D=parseFloat(m.stretch)/100*E);let w=b?0:D*R,P=b?D*R:0,O=1-(1-m.scale)*Math.abs(R);Math.abs(P)<.001&&(P=0),Math.abs(w)<.001&&(w=0),Math.abs(j)<.001&&(j=0),Math.abs(N)<.001&&(N=0),Math.abs(M)<.001&&(M=0),Math.abs(O)<.001&&(O=0);const H=`translate3d(${P}px,${w}px,${j}px)  rotateX(${g(M)}deg) rotateY(${g(N)}deg) scale(${O})`,G=Yn(m,S);if(G.style.transform=H,S.style.zIndex=-Math.abs(Math.round(R))+1,m.slideShadows){let _=b?S.querySelector(".swiper-slide-shadow-left"):S.querySelector(".swiper-slide-shadow-top"),I=b?S.querySelector(".swiper-slide-shadow-right"):S.querySelector(".swiper-slide-shadow-bottom");_||(_=un("coverflow",S,b?"left":"top")),I||(I=un("coverflow",S,b?"right":"bottom")),_&&(_.style.opacity=R>0?R:0),I&&(I.style.opacity=-R>0?-R:0)}}},setTransition:s=>{e.slides.map(c=>en(c)).forEach(c=>{c.style.transitionDuration=`${s}ms`,c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(l=>{l.style.transitionDuration=`${s}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}function Ih({swiper:e,extendParams:t,on:n}){t({creativeEffect:{limitProgress:1,shadowPerProgress:!1,progressMultiplier:1,perspective:!0,prev:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1},next:{translate:[0,0,0],rotate:[0,0,0],opacity:1,scale:1}}});const i=o=>typeof o=="string"?o:`${o}px`;fn({effect:"creative",swiper:e,on:n,setTranslate:()=>{const{slides:o,wrapperEl:c,slidesSizesGrid:l}=e,m=e.params.creativeEffect,{progressMultiplier:b}=m,v=e.params.centeredSlides,y=Oi(e);if(v){const d=l[0]/2-e.params.slidesOffsetBefore||0;c.style.transform=`translateX(calc(50% - ${d}px))`}for(let d=0;d<o.length;d+=1){const f=o[d],g=f.progress,A=Math.min(Math.max(f.progress,-m.limitProgress),m.limitProgress);let p=A;v||(p=Math.min(Math.max(f.originalProgress,-m.limitProgress),m.limitProgress));const S=f.swiperSlideOffset,E=[e.params.cssMode?-S-e.translate:-S,0,0],k=[0,0,0];let L=!1;e.isHorizontal()||(E[1]=E[0],E[0]=0);let R={translate:[0,0,0],rotate:[0,0,0],scale:1,opacity:1};A<0?(R=m.next,L=!0):A>0&&(R=m.prev,L=!0),E.forEach((O,H)=>{E[H]=`calc(${O}px + (${i(R.translate[H])} * ${Math.abs(A*b)}))`}),k.forEach((O,H)=>{let G=R.rotate[H]*Math.abs(A*b);k[H]=G}),f.style.zIndex=-Math.abs(Math.round(g))+o.length;const N=E.join(", "),M=`rotateX(${y(k[0])}deg) rotateY(${y(k[1])}deg) rotateZ(${y(k[2])}deg)`,j=p<0?`scale(${1+(1-R.scale)*p*b})`:`scale(${1-(1-R.scale)*p*b})`,D=p<0?1+(1-R.opacity)*p*b:1-(1-R.opacity)*p*b,w=`translate3d(${N}) ${M} ${j}`;if(L&&R.shadow||!L){let O=f.querySelector(".swiper-slide-shadow");if(!O&&R.shadow&&(O=un("creative",f)),O){const H=m.shadowPerProgress?A*(1/m.limitProgress):A;O.style.opacity=Math.min(Math.max(Math.abs(H),0),1)}}const P=Yn(m,f);P.style.transform=w,P.style.opacity=D,R.origin&&(P.style.transformOrigin=R.origin)}},setTransition:o=>{const c=e.slides.map(l=>en(l));c.forEach(l=>{l.style.transitionDuration=`${o}ms`,l.querySelectorAll(".swiper-slide-shadow").forEach(m=>{m.style.transitionDuration=`${o}ms`})}),_i({swiper:e,duration:o,transformElements:c,allSlides:!0})},perspective:()=>e.params.creativeEffect.perspective,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}function Oh({swiper:e,extendParams:t,on:n}){t({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),fn({effect:"cards",swiper:e,on:n,setTranslate:()=>{const{slides:s,activeIndex:o,rtlTranslate:c}=e,l=e.params.cardsEffect,{startTranslate:m,isTouched:b}=e.touchEventsData,v=c?-e.translate:e.translate;for(let y=0;y<s.length;y+=1){const d=s[y],f=d.progress,g=Math.min(Math.max(f,-4),4);let A=d.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(A-=s[0].swiperSlideOffset);let p=e.params.cssMode?-A-e.translate:-A,S=0;const E=-100*Math.abs(g);let k=1,L=-l.perSlideRotate*g,R=l.perSlideOffset-Math.abs(g)*.75;const N=e.virtual&&e.params.virtual.enabled?e.virtual.from+y:y,M=(N===o||N===o-1)&&g>0&&g<1&&(b||e.params.cssMode)&&v<m,j=(N===o||N===o+1)&&g<0&&g>-1&&(b||e.params.cssMode)&&v>m;if(M||j){const O=(1-Math.abs((Math.abs(g)-.5)/.5))**.5;L+=-28*g*O,k+=-.5*O,R+=96*O,S=`${(l.rotate||e.isHorizontal()?-25:0)*O*Math.abs(g)}%`}if(g<0?p=`calc(${p}px ${c?"-":"+"} (${R*Math.abs(g)}%))`:g>0?p=`calc(${p}px ${c?"-":"+"} (-${R*Math.abs(g)}%))`:p=`${p}px`,!e.isHorizontal()){const O=S;S=p,p=O}const D=g<0?`${1+(1-k)*g}`:`${1-(1-k)*g}`,w=`
        translate3d(${p}, ${S}, ${E}px)
        rotateZ(${l.rotate?c?-L:L:0}deg)
        scale(${D})
      `;if(l.slideShadows){let O=d.querySelector(".swiper-slide-shadow");O||(O=un("cards",d)),O&&(O.style.opacity=Math.min(Math.max((Math.abs(g)-.5)/.5,0),1))}d.style.zIndex=-Math.abs(Math.round(f))+s.length;const P=Yn(l,d);P.style.transform=w}},setTransition:s=>{const o=e.slides.map(c=>en(c));o.forEach(c=>{c.style.transitionDuration=`${s}ms`,c.querySelectorAll(".swiper-slide-shadow").forEach(l=>{l.style.transitionDuration=`${s}ms`})}),_i({swiper:e,duration:s,transformElements:o})},perspective:()=>!0,overwriteParams:()=>({_loopSwapReset:!1,watchSlidesProgress:!0,loopAdditionalSlides:e.params.cardsEffect.rotate?3:2,centeredSlides:!0,virtualTranslate:!e.params.cssMode})})}const _h=[oh,ah,lh,uh,dh,hh,fh,mh,ph,gh,vh,bh,yh,Sh,xh,Ah,Mh,Ph,wh,Rh,Dh,Ih,Oh];Qt.use(_h);window.Swiper=Qt;
